{"version":3,"file":"js/app.ab508494.js","mappings":"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","sources":["webpack://seal/./src/App.vue","webpack://seal/./src/components/Title.vue","webpack://seal/./src/components/Title.vue?1484","webpack://seal/./src/components/SwitchView.vue","webpack://seal/./src/components/SwitchView.vue?8753","webpack://seal/./src/components/SwitchLanguage.vue","webpack://seal/./src/components/SwitchLanguage.vue?da31","webpack://seal/./src/components/Timeline.vue","webpack://seal/./src/components/timeline_widgets/TimeAxis.vue","webpack://seal/./src/data/TimeLineData.js","webpack://seal/./src/theme/lang.js","webpack://seal/./src/theme/type_color.js","webpack://seal/./src/utils/data_process.js","webpack://seal/./src/components/timeline_widgets/TimeAxis.vue?4069","webpack://seal/./src/components/timeline_widgets/SealCard.vue","webpack://seal/./src/utils/timescale_param.js","webpack://seal/./src/utils/timeline/seal_card_func.js","webpack://seal/./src/utils/timeline/render_link_func.js","webpack://seal/./src/utils/timeline/handle_timeline_data.js","webpack://seal/./src/utils/timeline/interaction_func.js","webpack://seal/./src/components/timeline_widgets/SealCard.vue?6f12","webpack://seal/./src/components/timeline_widgets/CollectorCard.vue","webpack://seal/./src/utils/timeline/collector_card_func.js","webpack://seal/./src/components/timeline_widgets/CollectorCard.vue?83c5","webpack://seal/./src/utils/copy.js","webpack://seal/./src/data/Data.js","webpack://seal/./src/components/Timeline.vue?dfd9","webpack://seal/./src/components/Overview.vue","webpack://seal/./src/components/overview_widgets/OverviewCard.vue","webpack://seal/./src/utils/overview/overview_function.js","webpack://seal/./src/components/overview_widgets/OverviewCard.vue?291f","webpack://seal/./src/components/overview_widgets/Thumbnail.vue","webpack://seal/./src/components/overview_widgets/Thumbnail.vue?1968","webpack://seal/./src/utils/transition/overview_and_layout.js","webpack://seal/./src/components/Overview.vue?361c","webpack://seal/./src/components/LayoutView.vue","webpack://seal/./src/components/layout_widgets/LayoutCard.vue","webpack://seal/./src/components/layout_widgets/LayoutCard.vue?753b","webpack://seal/./src/utils/layout_view/layout_function_v2.js","webpack://seal/./src/utils/layout_view/layout_function.js","webpack://seal/./src/components/LayoutView.vue?edb6","webpack://seal/./src/components/LeftPanel.vue","webpack://seal/./src/utils/left_panel/barchart_function.js","webpack://seal/./src/utils/left_panel/detail_info_function.js","webpack://seal/./src/utils/left_panel/render_icon_function.js","webpack://seal/./src/components/LeftPanel.vue?bfa8","webpack://seal/./src/App.vue?7ccd","webpack://seal/./src/router/index.js","webpack://seal/./src/store/index.js","webpack://seal/./src/plugins/element.js","webpack://seal/./src/main.js","webpack://seal/webpack/bootstrap","webpack://seal/webpack/runtime/chunk loaded","webpack://seal/webpack/runtime/compat get default export","webpack://seal/webpack/runtime/define property getters","webpack://seal/webpack/runtime/global","webpack://seal/webpack/runtime/hasOwnProperty shorthand","webpack://seal/webpack/runtime/make namespace object","webpack://seal/webpack/runtime/node module decorator","webpack://seal/webpack/runtime/jsonp chunk loading","webpack://seal/webpack/startup"],"sourcesContent":["<template>\r\n    <router-view />\r\n    <div class=\"app backgrounded\">\r\n        <div class=\"app-canvas\" v-if=\"render_main\"\r\n            :style=\"{ left: (window_width - render_width) / 2 + 'px', top: (window_height - render_height) / 2 + 'px', width: render_width + 'px', height: render_height + 'px' }\">\r\n            <div class=\"header\">\r\n                <Title></Title>\r\n                <SwitchView></SwitchView>\r\n            </div>\r\n            <div class=\"left-panel\">\r\n                <LeftPanel></LeftPanel>\r\n            </div>\r\n            <div class=\"main-panel\">\r\n                <div id=\"main-view\" v-if=\"render_main\">\r\n                    <Overview\r\n                        v-show=\"\r\n                            cur_view === 'overview' || overlay_view === 'overview'\r\n                        \"\r\n                        :canvas_width=\"canvas_width\"\r\n                        :canvas_height=\"canvas_height\"\r\n                    ></Overview>\r\n                    <Timeline\r\n                        v-show=\"\r\n                            cur_view === 'timeline'\r\n                        \"\r\n                        :canvas_width=\"canvas_width\"\r\n                        :canvas_height=\"canvas_height\"\r\n                    ></Timeline>\r\n                    <LayoutView\r\n                        v-show=\"\r\n                            cur_view === 'layout' || overlay_view === 'layout'\r\n                        \"\r\n                        :canvas_width=\"canvas_width\"\r\n                        :canvas_height=\"canvas_height\"\r\n                    ></LayoutView>\r\n                </div>\r\n            </div>\r\n        </div> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nconst $ = require(\"jquery\");\r\n\r\n// import { PageSize } from \"@/data/Data.js\";\r\n\r\nimport Title from \"./components/Title.vue\";\r\nimport SwitchView from \"./components/SwitchView.vue\";\r\nimport SwitchLanguage from \"./components/SwitchLanguage.vue\";\r\nimport Timeline from \"./components/Timeline.vue\";\r\nimport Overview from \"./components/Overview.vue\";\r\nimport LayoutView from \"./components/LayoutView.vue\";\r\nimport LeftPanel from \"./components/LeftPanel.vue\";\r\n// import TimeAxis from \"./components/TimeAxis.vue\";\r\n\r\n\r\nimport { mapState } from \"vuex\";\r\n\r\nconst baseSize = 16;\r\n\r\nconst margin = {\r\n    left: 0.05,\r\n    right: 0.05,\r\n    top: 0.05,\r\n    bottom: 0.05,\r\n};\r\n\r\nexport default {\r\n    name: \"App\",\r\n    data() {\r\n        return {\r\n            render_main: false,\r\n            renderComponent: true,\r\n            canvas_width: null,\r\n            canvas_height: null,\r\n\r\n            window_width: null, // 当前窗口实际大小\r\n            window_height: null,\r\n\r\n            render_width: null, // 需要渲染的窗口大小\r\n            render_height: null,\r\n        };\r\n    },\r\n    components: {\r\n        SwitchView,\r\n        Title,\r\n        SwitchLanguage,\r\n        Timeline,\r\n        Overview,\r\n        LayoutView,\r\n        LeftPanel,\r\n        // TimeAxis,\r\n    },\r\n    computed: {\r\n        ...mapState([\"cur_view\", \"overlay_view\"]),\r\n\r\n    },\r\n    watch: {\r\n\r\n    },\r\n    methods: {\r\n        setRem() {\r\n            // let width = window.innerWidth;\r\n            // let height = window.innerHeight;\r\n            let width = this.render_width\r\n            let height = this.render_height\r\n            const scale = Math.max(width, height) / 1280;\r\n            let rem = baseSize * Math.min(scale, 2);\r\n            rem = Math.min(rem, 16);\r\n            this.$store.commit(\"changeRem\", rem);\r\n            document.documentElement.style.fontSize = rem + \"px\";\r\n        },\r\n        setCanvas() { // 确定画布的大小\r\n            let width = window.innerWidth;\r\n            let height = window.innerHeight;\r\n\r\n            this.window_width = window.innerWidth;\r\n            this.window_height = window.innerHeight;\r\n            // 将画布默认为16:9\r\n            if (width / height > 16 / 9) { // 以height为基准\r\n                width = height * 16 / 9\r\n            } else { // 以width为基准\r\n                height = width * 9 / 16\r\n            }\r\n            // 整个画布的渲染大小\r\n            this.render_width = width;\r\n            this.render_height = height;\r\n            // main_panel的窗口大小\r\n            this.canvas_width = width * (1 - 10 / 100)\r\n            this.canvas_height = height * (1 - 6.4 / 100)\r\n        },\r\n        initialize() {\r\n            const self = this       \r\n            self.setCanvas();\r\n            self.setRem();\r\n            // 弃用\r\n            // that.canvas_width = $(\".main-panel\").width();\r\n            // that.canvas_height = $(\".main-panel\").height();\r\n\r\n            setTimeout(() => {\r\n                self.render_main = true;\r\n            }, 500);\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        // console.log('windows width', $(window).width(), $(document).width(), window.innerWidth)\r\n        // console.log('windows height', $(window).height(), $(document).height(), window.innerHeight)\r\n        this.initialize();\r\n        window.addEventListener(\"resize\", function() {\r\n            // 在窗口大小调整时执行的操作\r\n            that.renderComponent = false;\r\n            that.render_main = false;\r\n            that.initialize();\r\n            setTimeout(() => {\r\n                that.renderComponent = true;\r\n            }, 500);\r\n            // console.log(\"窗口大小已调整\", that.render_width, that.window_width);\r\n        });\r\n        // window.onresize = () => {\r\n        //     this.renderComponent = false;\r\n        //     this.initialize();\r\n        //     setTimeout(() => {\r\n        //         this.renderComponent = true;\r\n        //     }, 500);\r\n        // };\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n::-webkit-scrollbar {\r\n    /* width : 3px; */\r\n    width: 0;\r\n    height: 1px;\r\n}\r\n\r\n*::-webkit-scrollbar {\r\n    fill: #b19c9b;\r\n    color: #b19c9b;\r\n    /* width: 0.25em; */\r\n}\r\n\r\n*::-webkit-scrollbar-track {\r\n    -webkit-box-shadow: inset 0 0 0.6vh rgba(0, 0, 0, 0.3);\r\n    border-radius: 2px;\r\n}\r\n\r\n*::-webkit-scrollbar-thumb {\r\n    background-color: #b19c9b;\r\n    /* outline: 0.1vh solid #B19C9B; */\r\n    border-radius: 2px;\r\n}\r\n\r\nhtml,\r\nbody {\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n\r\n* {\r\n    margin: 0;\r\n    overflow: hidden;\r\n    user-select: none;\r\n}\r\n\r\n#app {\r\n    font-family: Baskerville, FZQINGKBYSJF, Avenir, Helvetica, Arial, sans-serif;\r\n    /* font-family: Georgia, FZQINGKBYSJF, Avenir, Helvetica, Arial, sans-serif; */\r\n    /* font-family: STZhongsong, Arial; */\r\n    -webkit-font-smoothing: antialiased;\r\n    -moz-osx-font-smoothing: grayscale;\r\n    text-align: center;\r\n    color: #2c3e50;\r\n    height: 100%;\r\n    width: 100%;\r\n}\r\n@font-face {\r\n    font-family: \"FZQINGKBYSJF\";\r\n    src: url(\"./assets/fonts/FZQINGKBYSJF.TTF\") format(\"truetype\");\r\n}\r\n\r\n@font-face {\r\n    font-family: \"SONGTI\";\r\n    src: url(\"./assets/fonts/FZQINGKBYSJF.TTF\");\r\n}\r\n\r\n.backgrounded {\r\n    background-image: url(\"./assets/background.png\");\r\n    background-attachment: fixed;\r\n}\r\n</style>\r\n\r\n<style scoped lang=\"scss\">\r\n.app {\r\n    height: 100vh;\r\n    width: 100vw;\r\n    .app-canvas {\r\n        position: absolute;\r\n\r\n        $title-height: 6.4%;\r\n        $left-panel-width: 12%; // 10%\r\n        // $bottom-panel-height: 10%;\r\n\r\n        $switch-lang-width: $left-panel-width;\r\n\r\n        .header {\r\n            position: absolute;\r\n            height: $title-height;\r\n            width: 100%;\r\n            // background-color: rgba(240, 248, 255, 0.085);\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: space-between;\r\n        }\r\n\r\n        .left-panel {\r\n            position: absolute;\r\n            width: $left-panel-width;\r\n            // height: 100vh - $title-height - $bottom-panel-height;\r\n            height: 100% - $title-height;\r\n            top: $title-height;\r\n            // font-family: FZQINGKBYSJF;\r\n            // background-color: rgba(13, 79, 137, 0.05);\r\n        }\r\n\r\n        .main-panel {\r\n            position: absolute;\r\n            // height: 100% - $title-height - $bottom-panel-height;\r\n            height: 100% - $title-height;\r\n            width: calc(100% - $left-panel-width); // calc(100% - $left-panel-width)\r\n            left: $left-panel-width; // $left-panel-width\r\n            top: $title-height;\r\n            // background-color: rgba(240, 255, 255, 0.282);\r\n\r\n            #main-view {\r\n                & > div {\r\n                    position: absolute;\r\n                }\r\n                position: relative;\r\n                height: 100%;\r\n                width: 100%;\r\n                // background-color: rgba(240, 255, 255, 1);\r\n                // font-family: FZQINGKBYSJF;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"container\">\r\n        <div class=\"title-name\">\r\n            {{ title[language] }}\r\n        </div>\r\n\r\n        <!-- <div class=\"lang-select\">\r\n            <el-dropdown\r\n                trigger=\"click\"\r\n                popper-class=\"articleDropdownPopper\"\r\n                @command=\"handleSelectChange($event)\"\r\n            >\r\n                <span class=\"el-dropdown-link\">\r\n                    {{ lang_dict[language] }}\r\n                    <el-icon class=\"el-icon--right\"><arrow-down /></el-icon>\r\n                </span>\r\n                <template #dropdown>\r\n                    <el-dropdown-menu class=\"articleDropdownMenu\">\r\n                        <el-dropdown-item\r\n                            v-for=\"item in langs\"\r\n                            :key=\"item\"\r\n                            :command=\"item\"\r\n                            class=\"dropdownItem\"\r\n                            >{{ lang_dict[item] }}</el-dropdown-item\r\n                        >\r\n                    </el-dropdown-menu>\r\n                </template>\r\n            </el-dropdown>\r\n        </div> -->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nexport default {\r\n    name: \"Title\",\r\n    data() {\r\n        return {\r\n            // cur_lang: \"zh\",\r\n            langs: [\"zh\", \"en\"],\r\n            title: {\r\n                zh: \"印章可视化\", // 印章时间线\r\n                en: \"Seal Visualization\",\r\n            },\r\n            lang_dict: {\r\n                zh: \"中文\",\r\n                en: \"English\",\r\n            },\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState([\"language\"]),\r\n    },\r\n    methods: {\r\n        handleSelectChange(e) {\r\n            console.log(e);\r\n            this.cur_lang = e;\r\n            this.$store.commit(\"changeLanguage\", e);\r\n        },\r\n        initialize() {},\r\n    },\r\n    mounted() {\r\n        this.initialize();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: center;\r\n\r\n    .title-name {\r\n        font-size: 2rem;\r\n        font-weight: bold;\r\n        text-align: center;\r\n        padding: 1rem;\r\n    }\r\n\r\n    .lang-select {\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n    }\r\n\r\n    .el-dropdown-link {\r\n        cursor: pointer;\r\n        margin-left: 5px;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 1.2rem;\r\n        // font-family: \"Linux Libertine\", \"Georgia\", \"Times\", serif;\r\n\r\n        .folderIcon {\r\n            font-size: 0.8rem;\r\n            margin-right: 8px;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./Title.vue?vue&type=template&id=49ce326a&scoped=true\"\nimport script from \"./Title.vue?vue&type=script&lang=js\"\nexport * from \"./Title.vue?vue&type=script&lang=js\"\n\nimport \"./Title.vue?vue&type=style&index=0&id=49ce326a&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49ce326a\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"container\">\r\n        <div class=\"buttons\">\r\n            <div\r\n                v-for=\"(view_name, idx) in views\"\r\n                :key=\"'view-buttion-' + idx\"\r\n                :class=\"view_name === cur_view ? 'button selected' : 'button'\"\r\n                @click=\"view_name === 'timeline' || cur_view === 'timeline' ? $store.commit('changeCurViewForce', view_name) : $store.commit('changeCurView', view_name)\"\r\n            > <!--changeCurViewForce-->\r\n                {{ view_names[view_name][language] }}\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nexport default {\r\n    name: \"SwitchView\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            views: [\"overview\", \"layout\", \"timeline\"],\r\n            view_names: {\r\n                overview: {\r\n                    zh: \"总览\",\r\n                    en: \"Overview\",\r\n                },\r\n                layout: {\r\n                    zh: \"抽象布局\",\r\n                    en: \"Abstract Layout\",\r\n                },\r\n                timeline: {\r\n                    zh: \"时间线\",\r\n                    en: \"Timeline\",\r\n                },\r\n            },\r\n            checkbox_name: {\r\n                zh: \"展示流出事件\",\r\n                en: \"Show Outflow Events\",\r\n            },\r\n            showoutflow: true,\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\"]),\r\n        view_name_list() {\r\n            return this.views.map((d) => this.view_names[d][this.language]);\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { },\r\n    },\r\n    mounted() {\r\n        this.initialize();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    .buttons {\r\n        display: flex;\r\n        flex-direction: row;\r\n        height: 3.5rem;\r\n        align-items: center;\r\n\r\n        .button {\r\n            padding: 0.5rem;\r\n            margin: 0.5rem;\r\n            border: 1px solid black;\r\n            border-radius: 0.5rem;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .button:hover {\r\n            background-color: #dfdbdb;\r\n            // font-weight: bold;\r\n        }\r\n\r\n        // .button.selected {\r\n        //     background-color: #fefefe;\r\n        //     // font-weight: bold;\r\n        // }\r\n    }\r\n}\r\n</style>\r\n","import { render } from \"./SwitchView.vue?vue&type=template&id=1705f66d&scoped=true\"\nimport script from \"./SwitchView.vue?vue&type=script&lang=js\"\nexport * from \"./SwitchView.vue?vue&type=script&lang=js\"\n\nimport \"./SwitchView.vue?vue&type=style&index=0&id=1705f66d&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1705f66d\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"container\">\r\n        <div class=\"langs\">\r\n            <div class=\"lang\" v-for=\"(lang, idx) in langs\">{{ lang }}</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n    name: \"SwitchLanguage\",\r\n    data() {\r\n        return {\r\n            langs: [\"zh\", \"en\", \"jp\"],\r\n        };\r\n    },\r\n    computed: {\r\n        ...mapState([\"language\"]),\r\n    },\r\n    methods: {\r\n        initialize() {},\r\n    },\r\n    mounted() {\r\n        this.initialize();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.container {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n}\r\n</style>\r\n","import { render } from \"./SwitchLanguage.vue?vue&type=template&id=5531fe56&scoped=true\"\nimport script from \"./SwitchLanguage.vue?vue&type=script&lang=js\"\nexport * from \"./SwitchLanguage.vue?vue&type=script&lang=js\"\n\nimport \"./SwitchLanguage.vue?vue&type=style&index=0&id=5531fe56&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5531fe56\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"timeline-container\">\r\n        <div class=\"seal-card\">\r\n            <SealCard\r\n                :canvas_width=\"canvas_width\"\r\n                :canvas_height=\"canvas_height\"\r\n                :data=\"data\"\r\n            ></SealCard>\r\n        </div>\r\n        <div class=\"time-axis\">\r\n            <TimeAxis\r\n                :canvas_width=\"canvas_width\"\r\n                :canvas_height=\"canvas_height\"\r\n                :data=\"data\"\r\n            ></TimeAxis>\r\n        </div>\r\n        <div class=\"collector-card\">\r\n            <CollectorCard\r\n                :canvas_width=\"canvas_width\"\r\n                :canvas_height=\"canvas_height\"\r\n                :data=\"data\"\r\n            ></CollectorCard>\r\n        </div>\r\n        <div class=\"link-container\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\nconst time_duration = 1000,\r\n      timeout_duration = 100\r\n\r\nimport TimeAxis from \"./timeline_widgets/TimeAxis.vue\";\r\nimport SealCard from \"./timeline_widgets/SealCard.vue\";\r\nimport CollectorCard from \"./timeline_widgets/CollectorCard.vue\";\r\n\r\nimport * as Data from \"@/data/Data.js\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\nimport * as DataProcess from \"@/utils/data_process\"\r\n\r\nexport default {\r\n    name: \"Timeline\",\r\n    components: {\r\n        TimeAxis,\r\n        SealCard,\r\n        CollectorCard\r\n    },\r\n    data() {\r\n        return {\r\n           data: null,\r\n        };\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\", \"hover\", \"transition\"]),\r\n    \r\n    },\r\n    watch: {\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n            if (newValue !== oldValue) {\r\n                if (newValue === 'timeline') {\r\n                    console.log('从其他视图切换到timeline视图啦')\r\n                } else { // 从timeline切换到其他视图\r\n                    console.log('从timeline视图切换到其他视图啦')\r\n                }\r\n            }\r\n        },\r\n        selection: { // 注意：当前select || hover 均为单选，而非List\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal === 'timeline' && newVal !== oldVal) {\r\n                    self.renderCollectorCard()\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        hover: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal === 'timeline' && newVal !== oldVal) {\r\n\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        transition: {\r\n            handler: function (newVal, _) {\r\n                const self = this\r\n                if (newVal.to === 'timeline' || newVal.from === 'timeline') {\r\n                    self.$store.commit(\"changeCurViewForce\", newVal.to)        \r\n                }\r\n            },\r\n            deep: true,\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { },\r\n        getSubSet() { // 使用部分样本进行demo展示\r\n            const self = this\r\n            self.data = {\r\n                \"painting_name\": self.data['painting_name'],\r\n                \"meta_data\": self.data['meta_data'],\r\n                \"collectors\": self.data['collectors'].slice(0, 1)\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        let whole_data = Data.read_data() // 首先读入总体的\r\n        for (let i in whole_data) {\r\n            if (whole_data[i]['painting_name'] === that.painting_name) {\r\n                that.data = whole_data[i]\r\n            }\r\n        }\r\n        // that.getSubSet() // 用于测试的demo\r\n        that.data = DataProcess.getCollectorColor(that.data)\r\n        // console.log(\"seal_data\", that.data)\r\n        that.initialize();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.timeline-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0%;\r\n    top: 0%;\r\n\r\n    $axis-panel-height: 10%;\r\n    $seal-card-height: 35%; // 90%\r\n    $collector-card-height: 53%; // 55%\r\n    .seal-card {\r\n        position: absolute;\r\n        height: $seal-card-height;\r\n        left: 0.5%;\r\n        width: 99%;\r\n        top: 0%;\r\n        z-index: 1;\r\n        // background-color: rgba(91, 203, 23, 0.15);\r\n    }\r\n    .time-axis {\r\n        position: absolute;\r\n        height: $axis-panel-height;\r\n        left: 0.5%;\r\n        width: 99%;\r\n        top: $seal-card-height + 0.5%;\r\n        // z-index: 1;\r\n    }\r\n    .collector-card {\r\n        position: absolute;\r\n        height: $collector-card-height;\r\n        left: 0.5%;\r\n        width: 99%;\r\n        top: $axis-panel-height + $seal-card-height;\r\n        overflow-x: auto;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n    .collector-card::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n    .link-container {\r\n        position: absolute;\r\n        left: 0.5%;\r\n        width: 99%;\r\n        top: 0;\r\n        height: $seal-card-height;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n}\r\n\r\n\r\n</style>\r\n","<template>\r\n    <div class=\"timeAxis-container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nconst d3 = require(\"d3\");\r\nimport * as Data from \"@/data/TimeLineData\";\r\n// import { get_book_traj } from \"@/data/BookTraj\";\r\n// import * as BookTraj from \"@/data/BookTraj\";\r\n// import { type_color } from \"@/theme\";\r\nimport * as Translate from \"@/theme/lang\";\r\n// import * as RenderAxis from \"@/data/timeline/timeline_full/render_axis\"\r\nimport * as DataProcess from \"@/utils/data_process\"\r\n\r\nconst $ = require(\"jquery\");\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\nexport default {\r\nname: \"TimeAxis\",\r\nprops: [\r\n    \"canvasWidth\",\r\n    \"canvasHeight\",\r\n    \"timeStart\",\r\n    \"timeEnd\",\r\n    \"isEvent\",\r\n    \"isDynasty\",\r\n    // \"timeGran\",\r\n    \"events\"\r\n],\r\ndata() {\r\n    return {\r\n        // isEvent: true,\r\n        // isDynasty: true,\r\n        data: null, // 读入的总数据\r\n        specialData: {}, // 只将special events保留的data\r\n        specialEvents: {}, // 用于绘制special event circle的data + 包含每本书special events的数据\r\n        timeGran: \"year\",\r\n        time_range_click: null, // 用于标志时间段刷选的是哪一个\r\n        event_offset: 0, // y_offset of event_circle\r\n        };\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\", \"data\"],\r\n    computed: {\r\n        ...mapState([\"yearRange\", \"transition\", \"rem\", \"overlay_duration\", \"cur_view\", \"language\", \"painting_name\"]),\r\n    },\r\n    watch: {  \r\n        language: function(newVal, oldVal) { // 切换语言的接口\r\n            console.log('timeAxis切换语言', newVal)\r\n            this.initializeTimeline(\r\n            this.canvasWidth,\r\n            this.canvasHeight,\r\n            this.timeStart,\r\n            this.timeEnd,\r\n            this.isDynasty,\r\n            this.isEvent\r\n            )\r\n        },\r\n        // cur_view: function(newVal, oldVal) {\r\n        //     this.initializeTimeline(\r\n        //         this.canvasWidth,\r\n        //         this.canvasHeight,\r\n        //         this.timeStart,\r\n        //         this.timeEnd,\r\n        //         this.isDynasty,\r\n        //         this.isEvent\r\n        //     )\r\n        // },\r\n    },\r\n    methods: {\r\n        initializeTimeline(\r\n        // sWidth = $(\".app\").width() * 0.85 * 1.176, // main-panel换参数了，修改为原$('.app') * 0.85, 1.176 * 0.85 ≈ 1\r\n        sWidth = $(\".main-panel\").width() * 0.99, // $(\".time-axis\").width()\r\n        sHeight= $(\".main-panel\").height() * 0.1,\r\n        // sHeight = DataProcess.vhToPx(10),\r\n        // 下列参数值改为可变形式\r\n        // yearStart = 1000, // 1101(ori)， 1090\r\n        yearStart = 1450, // 1101(ori)， 1090\r\n        yearEnd = 1965, // 1953(ori)， 1965\r\n        dynasty,\r\n        event,\r\n        yearStep = 25\r\n        ) {\r\n        const self = this\r\n        const width = sWidth;\r\n        console.log('timeAxisSize', [sWidth, sHeight])\r\n        console.log('rem', this.rem) // 大屏：20\r\n        console.log('timeAxis-sWidth-sHeight', sWidth, sHeight)\r\n        const height = (sHeight / sWidth) * width;\r\n        let ih = height * (1 - margin.top - margin.bottom);\r\n        let iw = width * (1 - margin.left - margin.right);\r\n        // 控制栏总宽度\r\n        let cw = iw / 10;\r\n        this.bins = Data.getBins(yearStart, yearEnd, yearStep);\r\n        this.periodLegendData = Data.getPeriodLegend();\r\n        this.bigEventData = Data.getBigEvent();\r\n        this.jpPeriodData = Data.getJpPeriodData();\r\n        console.log('yearStart, yarEnd', [yearStart, yearEnd])\r\n        // console.log('cw', cw, margin.left * sWidth)\r\n        this.timeScale = d3.scaleLinear()\r\n                            .domain([yearStart, yearEnd])\r\n                            .range([0.08 * sWidth, iw])\r\n\r\n        let stepWidth =\r\n            this.timeScale(yearStart + yearStep) - this.timeScale(yearStart);\r\n        let bandWidth = stepWidth / 3;\r\n        let gapWidth = (stepWidth - bandWidth) / 2;\r\n        d3.select(this.$el).select('svg').remove()\r\n        // container\r\n        this.svg = d3\r\n            .select(this.$el)\r\n            .append(\"svg\")\r\n            .attr(\"height\", `${sHeight}`)\r\n            .attr(\"width\", `${iw}`)\r\n            // .attr(\"viewBox\", `0 0 ${width} ${height}`)\r\n        let bottomAxis = d3\r\n            .axisBottom(this.timeScale)\r\n            .ticks((yearEnd - yearStart) / yearStep)\r\n            .tickFormat((d) => d);\r\n        // 分割线与文字分隔竖线之间的距离\r\n        let gap = ih / 15;\r\n        // 分割线起始位置\r\n        let divloc = ih / 5;\r\n        // 文字分割线高度\r\n        let th = ih / 10;\r\n        // 时间范围轴的宽度\r\n        let rw = 10;\r\n\r\n        // main container\r\n        this.container = this.svg\r\n                                .append(\"g\")\r\n                                .attr('id', 'timeline-full-axis')\r\n\r\n        // 控制栏\r\n        // 分割线\r\n        this.container.append(\"g\").call((g) => {\r\n            g.append(\"line\")\r\n                .attr(\"transform\", `translate(0, ${1.5})`)\r\n                .attr(\"stroke\", \"#6a4c2a\")\r\n                .attr(\"x1\", 0)\r\n                .attr(\"x2\", 0.08 * sWidth - 2 * gap)\r\n                .attr(\"stroke-width\", 1.5);\r\n        });\r\n        this.container.append(\"g\").call((g) => {\r\n            g.append(\"line\")\r\n                .attr(\"transform\", `translate(${0}, ${3 * divloc - divloc / 3 + gap + th})`) // max = ih\r\n                .attr(\"stroke\", \"#6a4c2a\")\r\n                .attr(\"x1\", 0)\r\n                .attr(\"x2\", 0.08 * sWidth - 2 * gap)\r\n                .attr(\"stroke-width\", 1.5);\r\n        });\r\n        // 文字提示方框+文字\r\n        this.container.append(\"g\")\r\n            .attr(\"transform\", `translate(${0}, ${gap})`) // max = ih\r\n            .call((g) => {\r\n            g.append(\"rect\")\r\n            .attr(\"x\", 0)\r\n            .attr(\"y\", divloc / 2)\r\n            .attr(\"width\", divloc / 4)\r\n            .attr(\"height\", divloc / 4)\r\n            .attr(\"stroke\", \"#6a4c2a\")\r\n            // .attr(\"stroke-width\", 1.5)\r\n            .attr(\"fill\", \"#6a4c2a\");\r\n            g.append(\"text\")\r\n            .attr(\"x\", divloc / 2 )\r\n            .attr(\"y\", divloc * 5 / 6)\r\n            .style(\"fill\", \"#6a4c2a\")\r\n            .attr(\"font-size\", self.rem * 0.9)\r\n            .attr(\"font-family\", \"FZQINGKBYSJF\")\r\n            .text(() => {\r\n                if (this.language === 'zh') {\r\n                    return Translate.axis_labels['时间（公元）'].zh\r\n                } else if (this.language === 'en') {\r\n                    return Translate.axis_labels['时间（公元）'].en\r\n                }    \r\n            })\r\n        });\r\n\r\n        this.container.append(\"g\").call((g) => {\r\n            g.append(\"rect\")\r\n                .attr(\"x\", 0)\r\n                .attr(\"y\", 3 * divloc - 5 * divloc / 12) // 3 * divloc / 10 + 4 * divloc\r\n                .attr(\"width\", divloc / 4)\r\n                .attr(\"height\", divloc / 4)\r\n                .attr(\"stroke\", \"#6e4d2b\")\r\n                .attr(\"fill\", \"#6e4d2b\");\r\n            g.append(\"text\")\r\n                .attr(\"x\", divloc / 2)\r\n                .attr(\"y\", 3 * divloc - divloc / 12) // 4 * divloc + 6.5 * divloc / 10\r\n                .style(\"fill\", \"#6e4d2b\")\r\n                .attr(\"font-size\", self.rem * 0.9)\r\n                .attr(\"font-family\", \"FZQINGKBYSJF\")\r\n                .text(() => {\r\n                    if (this.language === 'zh') {\r\n                        return '朝代' // Translate.axis_labels['朝代'].zh\r\n                    } else if (this.language === 'en') {\r\n                        return  'Dynasty' // Translate.axis_labels['朝代'].en, 可能没有存储“朝代”的英文翻译\r\n                    }    \r\n                })\r\n        })\r\n        this.event_offset = 3 * divloc - divloc / 5 + 2 * gap + th\r\n        this.container\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(${0}, ${0})`) // 3 * divloc - divloc / 3 + gap + th\r\n            .call(bottomAxis)\r\n            .call((g) => {\r\n            g.select(\".domain\")\r\n                .attr(\"stroke\", \"#6a4c2a\")\r\n                .attr(\"stroke-width\", 2)\r\n                .attr(\"transform\", `translate(0, ${1.5})`);\r\n            g.selectAll(\".tick\")\r\n                .append(\"line\")\r\n                .attr(\"stroke\", \"#ad9278\")\r\n                .attr(\"y2\", function (d) {\r\n                    if (d % 100 === 0) return 10;\r\n                    else { return 6 } \r\n                })\r\n                .attr(\"stroke-width\", 1)\r\n                // .style('visibility', (d) => d === 1960? 'hidden' : 'block')\r\n            g.selectAll(\"text\")\r\n                .text(function (d) {\r\n                    if (d == 0) return 1;\r\n                    else return d;\r\n                })\r\n                .attr(\"font-size\", function (d) {\r\n                    if (d % 100 === 0) return self.rem * 0.6;\r\n                    else return self.rem * 0.5;\r\n                })\r\n                .attr(\"dy\", function (d) {\r\n                    if (d % 100 === 0) return 5;\r\n                    else return 2;\r\n                })\r\n                .attr('font-weight', (d) => d % 100 === 0 ? 'bold' : null)\r\n                .attr(\"fill\", \"#5a3a20\")\r\n                .attr(\"alignment-baseline\", \"hanging\")\r\n                // .style('visibility', (d) => d === 1960? 'hidden' : 'block')\r\n            });\r\n        // 分隔线\r\n        // if (dynasty == true) {\r\n        this.container\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(${0}, ${1.7 * divloc + divloc / 5})`)\r\n            .call((g) => {\r\n                g.append(\"line\")\r\n                .attr(\"stroke\", \"#ad9278\")\r\n                .attr(\"x1\", 0.08 * sWidth)\r\n                .attr(\"x2\", iw)\r\n                .attr(\"stroke-width\", 0.8);\r\n            });\r\n\r\n        // period legend\r\n        this.container\r\n            .append(\"g\")\r\n            .selectAll(\"g\")\r\n            .data(this.periodLegendData)\r\n            .join(\"g\")\r\n            .attr(\"x\", (d) => this.timeScale(d[0]))\r\n            .attr(\"transform\", (d) => `translate(${this.timeScale(d[1])}, 0)`) // 3 * divloc - divloc / 3 + gap + th\r\n            .call((g) => {\r\n                g.append(\"line\")\r\n                    .attr(\"transform\", `translate(${0}, ${5 * divloc / 2 - 0.5 * gap})`) // divloc + divloc / 5 + 0.5 * gap\r\n                    .attr(\"stroke\", \"#ad9278\")\r\n                    .attr(\"y2\", th + divloc / 5)\r\n                    .attr(\"stroke-width\", 0.8)\r\n                    .style('display', (d) => d[0] === '宋'? 'none': 'block')\r\n                g.append(\"text\")\r\n                    .attr(\"transform\", `translate(${3}, ${5 * divloc / 2 - 0.5 * gap + th * 3 / 4})`)\r\n                    .text(d => {\r\n                        if (this.language === 'zh') {\r\n                            return Translate.dynasties.China[d[0]].zh\r\n                        } else if (this.language === 'en') {\r\n                            return Translate.dynasties.China[d[0]].en\r\n                        }    \r\n                    })\r\n                    .attr(\r\n                        \"x\",\r\n                        (d) => 0.5 * (this.timeScale(d[2]) - this.timeScale(d[1])) - 3\r\n                    )\r\n                    .attr(\"y\", -5);\r\n                g.selectAll(\"text\")\r\n                    .attr(\"font-family\", \"FZQINGKBYSJF\")\r\n                    .attr(\"font-size\", self.rem * 0.8)\r\n                    .attr(\"fill\", \"#6e4d2b\")\r\n                    .attr(\"alignment-baseline\", \"hanging\")\r\n                    .attr(\"text-anchor\", \"middle\")\r\n                    .style('cursor', 'pointer') // hover上去以后鼠标变为手的形状\r\n            });\r\n   \r\n        // 拖动轴(最下面的line)\r\n        this.container // 目前是最上面的轴\r\n            .append(\"line\")\r\n            .attr(\"transform\", `translate(${0}, ${3 * divloc - divloc / 3 + gap + th})`) // 移动到最上面\r\n            .attr(\"x1\", 0.08 * sWidth)\r\n            .attr(\"x2\", iw)\r\n            .attr(\"stroke\", \"#6a4c2a\")\r\n            .attr(\"stroke-width\", 2);\r\n        },\r\n    },\r\n    mounted() {\r\n        // this.data = get_book_traj().book_traj // 获取总数据\r\n        this.initializeTimeline(\r\n        this.canvasWidth,\r\n        this.canvasHeight,\r\n        this.timeStart,\r\n        this.timeEnd,\r\n        this.isDynasty,\r\n        this.isEvent\r\n        );\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.timeAxis-container {\r\n    user-select: none;\r\n}\r\n</style>","import * as d3 from \"d3\";\r\n\r\nlet period_legend = [\r\n    // ['秦', -221, -202],\r\n    // ['西汉', -202, 8],\r\n    // ['', 8, 25],\r\n    // ['东汉', 25, 220],\r\n    // ['三国', 220, 265],\r\n    // ['两晋', 265, 420],\r\n    // ['南北朝', 420, 581],\r\n    // ['隋', 581, 618],\r\n    // ['唐', 618, 907],\r\n    // ['五代十国', 907, 960],\r\n    ['宋', 960, 1271],\r\n    ['元', 1271, 1368],\r\n    ['明', 1368, 1644],\r\n    ['清', 1644, 1912],\r\n    ['民国', 1912, 1950] // 民国\r\n];\r\nlet jp_period_legend_old = [\r\n    // ['院政', 1068, 1185],\r\n    ['镰仓', 1185, 1333],\r\n    ['南北朝', 1333, 1392],\r\n    ['室町', 1392, 1573],\r\n    ['织丰', 1573, 1603],\r\n    ['江户', 1603, 1868],\r\n    ['帝国', 1868, 1965]\r\n]\r\n\r\nlet jp_period_legend = [ // 待添加\r\n    ['平安', 960, 1192],\r\n    // ['镰仓', 1068, 1334],\r\n    ['镰仓', 1192, 1334],\r\n    ['南北朝', 1334, 1392],\r\n    ['室町', 1392, 1603],\r\n    ['江户', 1603, 1869],\r\n    ['明治', 1869, 1912],\r\n    ['大正', 1912, 1927],\r\n    ['昭和', 1927, 1965]\r\n]\r\n// 尝试加入清代的年号数据\r\nlet qing_nainhao = [\r\n    ['天命', 1616],\r\n    ['天聪', 1627],\r\n    ['崇德', 1636],\r\n    ['顺治', 1644],\r\n    ['康熙', 1662],\r\n    ['雍正', 1723],\r\n    ['乾隆', 1736],\r\n    ['嘉庆', 1796],\r\n    ['道光', 1821],\r\n    ['咸丰', 1851],\r\n    ['同治', 1862],\r\n    ['光绪', 1875],\r\n    ['宣统', 1909]\r\n]\r\n\r\n// 安史之乱（755-763）、靖康之乱（1127）、蒙古兵南侵（1273）、明初大移民（1370-1417）……)\r\nlet big_event = [\r\n        ['秦末农民起义', -209],\r\n        // ['王莽篡汉', 6],\r\n        // ['光武中兴', 41],\r\n        ['文景之治', -104],\r\n        ['夷陵之战', 221],\r\n        ['永嘉之乱', 311],\r\n        ['贞观之治', 627],\r\n        ['安史之乱', 755],\r\n        ['陈桥兵变', 960],\r\n        ['靖康之乱', 1127],\r\n        ['襄阳之战', 1267],\r\n        ['明初大移民', 1370],\r\n        ['满清入关', 1644]\r\n    ]\r\n\r\nlet od_data = {};\r\n\r\nexport function getDataByTimeRange(l, r) {\r\n    return od_data.filter(d => (+d.index_year >= l && +d.index_year < r));\r\n}\r\n\r\nexport function getBins(l, r, step) {\r\n    let bins = d3.range(Math.ceil((r - l) / step)).map(d => [l + d * step, l + d * step + step]);\r\n    return bins\r\n}\r\n\r\nexport function getPeriodLegend() {\r\n    return period_legend;\r\n}\r\n\r\nexport function getQingNianhao() {\r\n    return qing_nainhao;\r\n}\r\n\r\nexport function getBigEvent() {\r\n    return big_event;\r\n}\r\n\r\nexport function getJpPeriodData() {\r\n    return jp_period_legend;\r\n}\r\n\r\n","import * as BookTraj from \"@/data/BookTraj_old\"\r\nexport const book_types = {\r\n    经部: {\r\n        zh: \"经部\",\r\n        zh_0: \"经\",\r\n        en: \"Classics\",\r\n        en_0: \"Cl\"\r\n    },\r\n    史部: {\r\n        zh: \"史部\",\r\n        zh_0: \"史\",\r\n        en: \"Histories\",\r\n        en_0: \"H\"\r\n    },\r\n    子部: {\r\n        zh: \"子部\",\r\n        zh_0: \"子\",\r\n        en: \"Masters\",\r\n        en_0: \"M\"\r\n    },\r\n    集部: {\r\n        zh: \"集部\",\r\n        zh_0: \"集\",\r\n        en: \"Collections\",\r\n        en: \"Co\"\r\n    }\r\n};\r\n\r\nexport const library_types = {\r\n    机构类型: {\r\n        zh: \"机构类型\",\r\n        en: \"organization type\"\r\n    },\r\n    皇家: {\r\n        zh: \"皇家\",\r\n        en: \"Royal family\"\r\n    },\r\n    公家: {\r\n        zh: \"公家\",\r\n        en: \"Public family\"\r\n    },\r\n    大學: {\r\n        zh: \"大學\",\r\n        en: \"college\"\r\n    },\r\n    寺廟: {\r\n        zh: \"寺廟\",\r\n        en: \"temple\"\r\n    },\r\n    私人: {\r\n        zh: \"私人\",\r\n        en: \"private\"\r\n    },\r\n    不详: {\r\n        zh: \"不详\",\r\n        en: \"unknown\"\r\n    },\r\n    其他: {\r\n        zh: \"其他\",\r\n        en: \"others\"\r\n    }\r\n};\r\n\r\nexport const agent_types = {\r\n    人物类型: {\r\n        zh: \"人物类型\",\r\n        en: \"character type\"\r\n    },\r\n    皇室: {\r\n        zh: \"皇室\",\r\n        en: \"royal family\"\r\n    },\r\n    官員: {\r\n        zh: \"官員\",\r\n        en: \"official\"\r\n    },\r\n    學者: {\r\n        zh: \"學者\",\r\n        en: \"scholar\"\r\n    },\r\n    僧侶: {\r\n        zh: \"僧侶\",\r\n        en: \"monk\"\r\n    },\r\n    商人: {\r\n        zh: \"商人\",\r\n        en: \"businessmen\"\r\n    },\r\n    不详: {\r\n        zh: \"不详\",\r\n        en: \"unkonwn\"\r\n    }\r\n};\r\n\r\nexport const dynasties = {\r\n    China: {\r\n        宋: {\r\n            zh: \"宋\",\r\n            en: \"Song\"\r\n        },\r\n        元: {\r\n            zh: \"元\",\r\n            en: \"Yuan\"\r\n        },\r\n        明: {\r\n            zh: \"明\",\r\n            en: \"Ming\"\r\n        },\r\n        清: {\r\n            zh: \"清\",\r\n            en: \"Qing\"\r\n        },\r\n        民国: {\r\n            zh: \"民国\",\r\n            en: \"Republic of China\"\r\n        }\r\n    },\r\n    Japan: {\r\n        平安: {\r\n            zh: \"平安\",\r\n            en: \"Heian Period\"\r\n        },\r\n        镰仓: {\r\n            zh: \"镰仓\",\r\n            en: \"Kamakura Period\"\r\n        },\r\n        南北朝: {\r\n            zh: \"南北朝\",\r\n            en: \"North and South Dynasties\"\r\n        },\r\n        室町: {\r\n            zh: \"室町\",\r\n            en: \"Muromachi Period\"\r\n        },\r\n        江户: {\r\n            zh: \"江户\",\r\n            en: \"Edo Period\"\r\n        },\r\n        明治: {\r\n            zh: \"明治\",\r\n            en: \"Meiji Period\"\r\n        },\r\n        大正: {\r\n            zh: \"大正\",\r\n            en: \"Taisho Period\"\r\n        },\r\n        昭和: {\r\n            zh: \"昭和\",\r\n            en: \"Showa Period\"\r\n        }\r\n    }\r\n};\r\n\r\nexport const axis_labels = {\r\n    '时间（公元）': { // 有中文括号，就用引号引起来\r\n        zh: \"时间（公元）\",\r\n        en: \"Time (AD)\"\r\n    },\r\n    中国朝代: {\r\n        zh: \"中国朝代\",\r\n        en: \"Chinese Dynasty\"\r\n    },\r\n    日本朝代: {\r\n        zh: \"日本朝代\",\r\n        en: \"Japanese Dynasty\"\r\n    },\r\n    刊刻: {\r\n        zh: \"刊刻\",\r\n        en: \"Engrave\"\r\n    },\r\n    最后一次在中国: {\r\n        zh: \"最后一次在中国\",\r\n        en: \"Last Seen in China\"\r\n    },\r\n    首次传入日本: {\r\n        zh: \"首次传入日本\",\r\n        en: \"First Introduced to Japan\"\r\n    }\r\n};\r\n\r\n// export const locations = {\r\n//     中国: { zh: \"中国\", en: \"China\" },\r\n// };\r\n\r\nexport const locations = {\r\n    \"京都府\": {\r\n        \"zh\": \"京都府\",\r\n        \"en\": \"Kyoto\"\r\n    },\r\n    \"東京都\": {\r\n        \"zh\": \"東京都\",\r\n        \"en\": \"Tokyo\",\r\n    },\r\n    \"高麗\": {\r\n        \"zh\": \"高麗\",\r\n        \"en\": \"Koryo\"\r\n    },\r\n    \"東陽\": {\r\n        \"zh\": \"東陽\",\r\n        \"en\": \"Dongyang\"\r\n    },\r\n    \"岡山\": {\r\n        \"zh\": \"岡山\",\r\n        \"en\": \"Okayama\"\r\n    },\r\n    \"奈良\": {\r\n        \"zh\": \"奈良\",\r\n        \"en\": \"Nara\"\r\n    },\r\n    \"鐮倉\": {\r\n        \"zh\": \"鐮倉\",\r\n        \"en\": \"Kamakura\"\r\n    },\r\n    \"蒲生\": {\r\n        \"zh\": \"蒲生\",\r\n        \"en\": \"Burson\"\r\n    },\r\n    \"四川\": {\r\n        \"zh\": \"四川\",\r\n        \"en\": \"Sichuan\"\r\n    },\r\n    \"大分\": {\r\n        \"zh\": \"大分\",\r\n        \"en\": \"Oita\"\r\n    },\r\n    \"湖南\": {\r\n        \"zh\": \"湖南\",\r\n        \"en\": \"Hunan\"\r\n    },\r\n    \"肇慶\": {\r\n        \"zh\": \"肇慶\",\r\n        \"en\": \"Zhaoqing\"\r\n    },\r\n    \"福建\": {\r\n        \"zh\": \"福建\",\r\n        \"en\": \"Fujian\"\r\n    },\r\n    \"文京\": {\r\n        \"zh\": \"文京\",\r\n        \"en\": \"Bunkyo\"\r\n    },\r\n    \"吉林\": {\r\n        \"zh\": \"吉林\",\r\n        \"en\": \"Jilin\"\r\n    },\r\n    \"大阪\": {\r\n        \"zh\": \"大阪\",\r\n        \"en\": \"Osaka\"\r\n    },\r\n    \"舒縣\": {\r\n        \"zh\": \"舒縣\",\r\n        \"en\": \"Shu County\"\r\n    },\r\n    \"高知\": {\r\n        \"zh\": \"高知\",\r\n        \"en\": \"Kochi\"\r\n    },\r\n    \"內務省\": {\r\n        \"zh\": \"內務省\",\r\n        \"en\": \"Ministry of Internal Affairs\"\r\n    },\r\n    \"京都\": {\r\n        \"zh\": \"京都\",\r\n        \"en\": \"Kyoto\"\r\n    },\r\n    \"安徽\": {\r\n        \"zh\": \"安徽\",\r\n        \"en\": \"Anhui\"\r\n    },\r\n    \"陽新\": {\r\n        \"zh\": \"陽新\",\r\n        \"en\": \"Yangxin\"\r\n    },\r\n    \"正定\": {\r\n        \"zh\": \"正定\",\r\n        \"en\": \"Zhengding\"\r\n    },\r\n    \"上野忍岡\": {\r\n        \"zh\": \"上野忍岡\",\r\n        \"en\": \"Nobuoka Ueno\"\r\n    },\r\n    \"東山道地區\": {\r\n        \"zh\": \"東山道地區\",\r\n        \"en\": \"Higashiyama area\"\r\n    },\r\n    \"朝鮮\": {\r\n        \"zh\": \"朝鮮\",\r\n        \"en\": \"North Korea\"\r\n    },\r\n    \"中國\": {\r\n        \"zh\": \"中國\",\r\n        \"en\": \"China\"\r\n    },\r\n    \"姬路\": {\r\n        \"zh\": \"姬路\",\r\n        \"en\": \"Himeji\"\r\n    },\r\n    \"杭州\": {\r\n        \"zh\": \"杭州\",\r\n        \"en\": \"Hangzhou\"\r\n    },\r\n    \"首爾\": {\r\n        \"zh\": \"首爾\",\r\n        \"en\": \"Seoul\"\r\n    },\r\n    \"四國\": {\r\n        \"zh\": \"四國\",\r\n        \"en\": \"Shikoku\"\r\n    },\r\n    \"廣東\": {\r\n        \"zh\": \"廣東\",\r\n        \"en\": \"Guangdong\"\r\n    },\r\n    \"寧波\": {\r\n        \"zh\": \"寧波\",\r\n        \"en\": \"Ningbo\"\r\n    },\r\n    \"東山\": {\r\n        \"zh\": \"東山\",\r\n        \"en\": \"Higashiyama\"\r\n    },\r\n    \"东山区\": {\r\n        \"zh\": \"东山区\",\r\n        \"en\": \"Higashiyama Ward\"\r\n    },\r\n    \"吉州\": {\r\n        \"zh\": \"吉州\",\r\n        \"en\": \"Jizhou\"\r\n    },\r\n    \"南平\": {\r\n        \"zh\": \"南平\",\r\n        \"en\": \"Nanping\"\r\n    },\r\n    \"北區\": {\r\n        \"zh\": \"北區\",\r\n        \"en\": \"North District\"\r\n    },\r\n    \"千代田\": {\r\n        \"zh\": \"千代田\",\r\n        \"en\": \"Chiyoda\"\r\n    },\r\n    \"浙江\": {\r\n        \"zh\": \"浙江\",\r\n        \"en\": \"Zhejiang\"\r\n    },\r\n    \"鎌倉\": {\r\n        \"zh\": \"鎌倉\",\r\n        \"en\": \"Kamakura\"\r\n    },\r\n    \"張家港\": {\r\n        \"zh\": \"張家港\",\r\n        \"en\": \"Zhangjiagang\"\r\n    },\r\n    \"神奈川\": {\r\n        \"zh\": \"神奈川\",\r\n        \"en\": \"Kanagawa\"\r\n    },\r\n    \"相國寺\": {\r\n        \"zh\": \"相國寺\",\r\n        \"en\": \"Prime Temple\"\r\n    },\r\n    \"揚州\": {\r\n        \"zh\": \"揚州\",\r\n        \"en\": \"Yangzhou\"\r\n    },\r\n    \"北京\": {\r\n        \"zh\": \"北京\",\r\n        \"en\": \"Beijing\"\r\n    },\r\n    \"八幡\": {\r\n        \"zh\": \"八幡\",\r\n        \"en\": \"Yawata\"\r\n    },\r\n    \"當塗\": {\r\n        \"zh\": \"當塗\",\r\n        \"en\": \"Dangtu\"\r\n    },\r\n    \"上京\": {\r\n        \"zh\": \"上京\",\r\n        \"en\": \"Kamikyo\"\r\n    },\r\n    \"坡平\": {\r\n        \"zh\": \"坡平\",\r\n        \"en\": \"Pyeong\"\r\n    },\r\n    \"天津\": {\r\n        \"zh\": \"天津\",\r\n        \"en\": \"Tianjin\"\r\n    },\r\n    \"江西\": {\r\n        \"zh\": \"江西\",\r\n        \"en\": \"Jiangxi\"\r\n    },\r\n    \"河北\": {\r\n        \"zh\": \"河北\",\r\n        \"en\": \"Hebei\"\r\n    },\r\n    \"南昌\": {\r\n        \"zh\": \"南昌\",\r\n        \"en\": \"Nanchang\"\r\n    },\r\n    \"日本\": {\r\n        \"zh\": \"日本\",\r\n        \"en\": \"Japan\"\r\n    },\r\n    \"贛州\": {\r\n        \"zh\": \"贛州\",\r\n        \"en\": \"Ganzhou\"\r\n    },\r\n    \"紅葉山\": {\r\n        \"zh\": \"紅葉山\",\r\n        \"en\": \"Kaya Hill\"\r\n    },\r\n    \"東京\": {\r\n        \"zh\": \"東京\",\r\n        \"en\": \"Tokyo\"\r\n    },\r\n    \"吉安\": {\r\n        \"zh\": \"吉安\",\r\n        \"en\": \"Ji'an\"\r\n    },\r\n    \"建甌\": {\r\n        \"zh\": \"建甌\",\r\n        \"en\": \"Jian'ou\"\r\n    },\r\n    \"中心皇宮內舊御府圖書館\": {\r\n        \"zh\": \"中心皇宮內舊御府圖書館\",\r\n        \"en\": \"Central Imperial Palace Old Imperial Palace Library\"\r\n    },\r\n    \"上海\": {\r\n        \"zh\": \"上海\",\r\n        \"en\": \"Shanghai\"\r\n    },\r\n    \"安康\": {\r\n        \"zh\": \"安康\",\r\n        \"en\": \"Ankang\"\r\n    },\r\n    \"成都\": {\r\n        \"zh\": \"成都\",\r\n        \"en\": \"Chengdu\"\r\n    },\r\n    \"青浦\": {\r\n        \"zh\": \"青浦\",\r\n        \"en\": \"Qingpu\"\r\n    },\r\n    \"福井\": {\r\n        \"zh\": \"福井\",\r\n        \"en\": \"Fukui\"\r\n    },\r\n    \"鹿兒島\": {\r\n        \"zh\": \"鹿兒島\",\r\n        \"en\": \"Kagoshima\"\r\n    },\r\n    \"江南\": {\r\n        \"zh\": \"江南\",\r\n        \"en\": \"Jiangnan\"\r\n    },\r\n    \"蘇州\": {\r\n        \"zh\": \"蘇州\",\r\n        \"en\": \"Suzhou\"\r\n    },\r\n    \"滋賀\": {\r\n        \"zh\": \"滋賀\",\r\n        \"en\": \"Shiga\"\r\n    },\r\n    \"右京\": {\r\n        \"zh\": \"右京\",\r\n        \"en\": \"Yukyo\"\r\n    },\r\n    \"港區\": {\r\n        \"zh\": \"港區\",\r\n        \"en\": \"Port Ward\"\r\n    },\r\n    \"江蘇\": {\r\n        \"zh\": \"江蘇\",\r\n        \"en\": \"Jiangsu\"\r\n    },\r\n    \"台東\": {\r\n        \"zh\": \"台東\",\r\n        \"en\": \"Taidong\"\r\n    },\r\n    \"湖北\": {\r\n        \"zh\": \"湖北\",\r\n        \"en\": \"Hubei\"\r\n    },\r\n    \"建瓯\": {\r\n        \"zh\": \"建瓯\",\r\n        \"en\": \"Jianou\"\r\n    },\r\n    \"豐島\": {\r\n        \"zh\": \"豐島\",\r\n        \"en\": \"Toshima\"\r\n    },\r\n    \"佐伯\": {\r\n        \"zh\": \"佐伯\",\r\n        \"en\": \"Zabe\"\r\n    },\r\n    \"崑山\": {\r\n        \"zh\": \"崑山\",\r\n        \"en\": \"Kunshan\"\r\n    },\r\n    \"陝西\": {\r\n        \"zh\": \"陝西\",\r\n        \"en\": \"Shaanxi\"\r\n    },\r\n    \"長春\": {\r\n        \"zh\": \"長春\",\r\n        \"en\": \"Changchun\"\r\n    },\r\n    \"紹興\": {\r\n        \"zh\": \"紹興\",\r\n        \"en\": \"Shaoxing\"\r\n    },\r\n    \"開城市\": {\r\n        \"zh\": \"開城市\",\r\n        \"en\": \"Kaesong\"\r\n    },\r\n    \"韓國\": {\r\n        \"zh\": \"韓國\",\r\n        \"en\": \"South Korea\"\r\n    },\r\n    \"建陽\": {\r\n        \"zh\": \"建陽\",\r\n        \"en\": \"Jianyang\"\r\n    },\r\n    \"橫濱\": {\r\n        \"zh\": \"橫濱\",\r\n        \"en\": \"Yokohama\"\r\n    },\r\n    \"臺東\": {\r\n        \"zh\": \"臺東\",\r\n        \"en\": \"Taitung\"\r\n    },\r\n    \"金澤町\": {\r\n        \"zh\": \"金澤町\",\r\n        \"en\": \"Kanazawa\"\r\n    },\r\n    \"北堀町\": {\r\n        \"zh\": \"北堀町\",\r\n        \"en\": \"Kitahori Machi\"\r\n    },\r\n    \"上野公園北\": {\r\n        \"zh\": \"上野公園北\",\r\n        \"en\": \"Ueno Park North\"\r\n    },\r\n    \"北之丸公園\": {\r\n        \"zh\": \"北之丸公園\",\r\n        \"en\": \"Kitamaru Park\"\r\n    },\r\n    \"麻沙鎮\": {\r\n        \"zh\": \"麻沙鎮\",\r\n        \"en\": \"Masha town\"\r\n    },\r\n    \"上野\": {\r\n        \"zh\": \"上野\",\r\n        \"en\": \"Ueno\"\r\n    },\r\n    \"嵯峨\": {\r\n        \"zh\": \"嵯峨\",\r\n        \"en\": \"ridge\"\r\n    },\r\n    \"金澤\": {\r\n        \"zh\": \"金澤\",\r\n        \"en\": \"Kanazawa\"\r\n    },\r\n    \"赤坂離宮\": {\r\n        \"zh\": \"赤坂離宮\",\r\n        \"en\": \"Akasaka Isomiya\"\r\n    },\r\n    \"本町\": {\r\n        \"zh\": \"本町\",\r\n        \"en\": \"Motomachi\"\r\n    },\r\n    \"湯島\": {\r\n        \"zh\": \"湯島\",\r\n        \"en\": \"Yujima\"\r\n    },\r\n    \"戶塚\": {\r\n        \"zh\": \"戶塚\",\r\n        \"en\": \"Tozuka\"\r\n    },\r\n    \"日野町\": {\r\n        \"zh\": \"日野町\",\r\n        \"en\": \"Hino machi\"\r\n    },\r\n    \"安福\": {\r\n        \"zh\": \"安福\",\r\n        \"en\": \"Anfu\"\r\n    },\r\n    \"南禪寺\": {\r\n        \"zh\": \"南禪寺\",\r\n        \"en\": \"Nanzen Temple\"\r\n    },\r\n    \"神田佐九間町\": {\r\n        \"zh\": \"神田佐九間町\",\r\n        \"en\": \"Sakuma Kanda\"\r\n    },\r\n    \"霞关\": {\r\n        \"zh\": \"霞关\",\r\n        \"en\": \"Kasumigaseki\"\r\n    },\r\n    \"西湖\": {\r\n        \"zh\": \"西湖\",\r\n        \"en\": \"West Lake\"\r\n    },\r\n    \"皇居\": {\r\n        \"zh\": \"皇居\",\r\n        \"en\": \"Imperial residence\"\r\n    },\r\n    \"藏前町\": {\r\n        \"zh\": \"藏前町\",\r\n        \"en\": \"Ashiemachi\"\r\n    }\r\n}\r\n\r\nexport const book_name_lang = {\r\n    \"詩童子問二十卷\": {\r\n        \"zh\": \"詩童子問二十卷\",\r\n        \"en\": \"The poet asked the twenty volumes\"\r\n    },\r\n    \"重廣分門三蘇先生文粹\": {\r\n        \"zh\": \"重廣分門三蘇先生文粹\",\r\n        \"en\": \"Heavy wide division of three Su Mr. Cultural essence\"\r\n    },\r\n    \"王荊文公詩\": {\r\n        \"zh\": \"王荊文公詩\",\r\n        \"en\": \"The poems of Wang Jing and Wen Gong\"\r\n    },\r\n    \"附音傍訓晦庵論語句解二卷\": {\r\n        \"zh\": \"附音傍訓晦庵論語句解二卷\",\r\n        \"en\": \"Attached to the sound of Xun Hanguan analects sentence solution two volumes\"\r\n    },\r\n    \"中州集\": {\r\n        \"zh\": \"中州集\",\r\n        \"en\": \"Zhongzhou collection\"\r\n    },\r\n    \"諸病源候論\": {\r\n        \"zh\": \"諸病源候論\",\r\n        \"en\": \"On the pathogenesis of various diseases\"\r\n    },\r\n    \"文中子中說\": {\r\n        \"zh\": \"文中子中說\",\r\n        \"en\": \"The article said\"\r\n    },\r\n    \"村西集\": {\r\n        \"zh\": \"村西集\",\r\n        \"en\": \"Cun Xiji\"\r\n    },\r\n    \"東坡集\": {\r\n        \"zh\": \"東坡集\",\r\n        \"en\": \"Dongpo collection\"\r\n    },\r\n    \"四書輯釋\": {\r\n        \"zh\": \"四書輯釋\",\r\n        \"en\": \"The four books are released\"\r\n    },\r\n    \"正法眼藏\": {\r\n        \"zh\": \"正法眼藏\",\r\n        \"en\": \"The right way is hidden in the eyes\"\r\n    },\r\n    \"史記\": {\r\n        \"zh\": \"史記\",\r\n        \"en\": \"Historical records\"\r\n    },\r\n    \"集韻\": {\r\n        \"zh\": \"集韻\",\r\n        \"en\": \"Collection of rhyme\"\r\n    },\r\n    \"游宦紀聞\": {\r\n        \"zh\": \"游宦紀聞\",\r\n        \"en\": \"You eunuch chronicle\"\r\n    },\r\n    \"集千家註分類杜工部詩\": {\r\n        \"zh\": \"集千家註分類杜工部詩\",\r\n        \"en\": \"Collection of thousands of notes classification Du Gongbu poetry\"\r\n    },\r\n    \"新編排韻增廣事類氏族大全\": {\r\n        \"zh\": \"新編排韻增廣事類氏族大全\",\r\n        \"en\": \"New arrangement of rhyme to increase the matter of clan completions\"\r\n    },\r\n    \"詩緝三十六卷\": {\r\n        \"zh\": \"詩緝三十六卷\",\r\n        \"en\": \"Poetry volume 36\"\r\n    },\r\n    \"十七史詳節\": {\r\n        \"zh\": \"十七史詳節\",\r\n        \"en\": \"Seventeen sections of history\"\r\n    },\r\n    \"呂氏家塾讀詩記\": {\r\n        \"zh\": \"呂氏家塾讀詩記\",\r\n        \"en\": \"Lu's family school read poetry\"\r\n    },\r\n    \"程朱二先生周易傳義\": {\r\n        \"zh\": \"程朱二先生周易傳義\",\r\n        \"en\": \"Mr. Cheng, Zhu and Zhou Yi preached righteousness\"\r\n    },\r\n    \"太平寰宇記\": {\r\n        \"zh\": \"太平寰宇記\",\r\n        \"en\": \"Taiping World Book\"\r\n    },\r\n    \"王文公文集\": {\r\n        \"zh\": \"王文公文集\",\r\n        \"en\": \"The collected works of Wang Wengong\"\r\n    },\r\n    \"文選（明州本）\": {\r\n        \"zh\": \"文選（明州本）\",\r\n        \"en\": \"Selected texts (Mingzhou Edition)\"\r\n    },\r\n    \"孝經\": {\r\n        \"zh\": \"孝經\",\r\n        \"en\": \"Filial piety sutra\"\r\n    },\r\n    \"楊氏家藏方\": {\r\n        \"zh\": \"楊氏家藏方\",\r\n        \"en\": \"Yang's family Tibetan prescription\"\r\n    },\r\n    \"論語注疏\": {\r\n        \"zh\": \"論語注疏\",\r\n        \"en\": \"The Analects of Confucius\"\r\n    },\r\n    \"故唐律疏議名例篇\": {\r\n        \"zh\": \"故唐律疏議名例篇\",\r\n        \"en\": \"Therefore, the Tang Dynasty law sparsely discussed famous examples\"\r\n    },\r\n    \"崔舍人玉堂類稿\": {\r\n        \"zh\": \"崔舍人玉堂類稿\",\r\n        \"en\": \"Cui Sheren jade Hall class manuscript\"\r\n    },\r\n    \"周易本义附錄集註十卷\": {\r\n        \"zh\": \"周易本义附錄集註十卷\",\r\n        \"en\": \"Zhouyi original meaning Appendix notes ten volumes\"\r\n    },\r\n    \"春秋胡氏傳附錄纂疏\": {\r\n        \"zh\": \"春秋胡氏傳附錄纂疏\",\r\n        \"en\": \"The Spring and Autumn Hu appendix is sparse\"\r\n    },\r\n    \"歐陽文忠公集\": {\r\n        \"zh\": \"歐陽文忠公集\",\r\n        \"en\": \"Ouyang Wenzhong Gongji\"\r\n    },\r\n    \"禪林類聚\": {\r\n        \"zh\": \"禪林類聚\",\r\n        \"en\": \"Zen forest together\"\r\n    },\r\n    \"新編四六必用方與勝覽\": {\r\n        \"zh\": \"新編四六必用方與勝覽\",\r\n        \"en\": \"The new 46 will use Fang and Sheng Shan\"\r\n    },\r\n    \"論衡\": {\r\n        \"zh\": \"論衡\",\r\n        \"en\": \"On balance\"\r\n    },\r\n    \"北礀集\": {\r\n        \"zh\": \"北礀集\",\r\n        \"en\": \"Beiqiji\"\r\n    },\r\n    \"聯燈會要\": {\r\n        \"zh\": \"聯燈會要\",\r\n        \"en\": \"The lights will be\"\r\n    },\r\n    \"增廣太平惠民和劑局方\": {\r\n        \"zh\": \"增廣太平惠民和劑局方\",\r\n        \"en\": \"Enlarge Taiping benefit people and drug bureau side\"\r\n    },\r\n    \"古今韻會舉要\": {\r\n        \"zh\": \"古今韻會舉要\",\r\n        \"en\": \"Ancient and modern rhyme will mention\"\r\n    },\r\n    \"誠齋四六發遣膏馥\": {\r\n        \"zh\": \"誠齋四六發遣膏馥\",\r\n        \"en\": \"Cheng Zhai four six hair send ointment Fu\"\r\n    },\r\n    \"景文宋公集\": {\r\n        \"zh\": \"景文宋公集\",\r\n        \"en\": \"Jingwen Song Gong set\"\r\n    },\r\n    \"太平御覽\": {\r\n        \"zh\": \"太平御覽\",\r\n        \"en\": \"Peaceful view\"\r\n    },\r\n    \"詩集傳音釋\": {\r\n        \"zh\": \"詩集傳音釋\",\r\n        \"en\": \"A collection of poems is translated\"\r\n    },\r\n    \"天台陳先生類編花果卉木全芳備祖\": {\r\n        \"zh\": \"天台陳先生類編花果卉木全芳備祖\",\r\n        \"en\": \"Rooftop Mr. Chen type braid flowers and flowers wood full aromatic prepared ancestor\"\r\n    },\r\n    \"四書章圖纂釋\": {\r\n        \"zh\": \"四書章圖纂釋\",\r\n        \"en\": \"The four books and chapters of the map compilation\"\r\n    },\r\n    \"寒山詩集\": {\r\n        \"zh\": \"寒山詩集\",\r\n        \"en\": \"Hanshan poetry collection\"\r\n    },\r\n    \"本草衍義\": {\r\n        \"zh\": \"本草衍義\",\r\n        \"en\": \"The implication of materia medica\"\r\n    },\r\n    \"禮記集說\": {\r\n        \"zh\": \"禮記集說\",\r\n        \"en\": \"The book of Rites says\"\r\n    },\r\n    \"魏氏家藏方\": {\r\n        \"zh\": \"魏氏家藏方\",\r\n        \"en\": \"Wei's family Tibetan prescriptions\"\r\n    },\r\n    \"尚書正義\": {\r\n        \"zh\": \"尚書正義\",\r\n        \"en\": \"Justice of the book\"\r\n    },\r\n    \"纂圖增新群書類要類事林廣記\": {\r\n        \"zh\": \"纂圖增新群書類要類事林廣記\",\r\n        \"en\": \"The compilation of new books to add to the class of things in the broad records\"\r\n    },\r\n    \"春秋諸傳會通\": {\r\n        \"zh\": \"春秋諸傳會通\",\r\n        \"en\": \"The Spring and Autumn generations will pass through\"\r\n    },\r\n    \"爾雅注疏\": {\r\n        \"zh\": \"爾雅注疏\",\r\n        \"en\": \"A surname\"\r\n    },\r\n    \"初學記\": {\r\n        \"zh\": \"初學記\",\r\n        \"en\": \"Beginner's record\"\r\n    },\r\n    \"通典\": {\r\n        \"zh\": \"通典\",\r\n        \"en\": \"General code\"\r\n    },\r\n    \"世說新語\": {\r\n        \"zh\": \"世說新語\",\r\n        \"en\": \"The world speaks a new language\"\r\n    },\r\n    \"文選（贛州本）\": {\r\n        \"zh\": \"文選（贛州本）\",\r\n        \"en\": \"Selected Texts (Ganzhou version)\"\r\n    },\r\n    \"新編類要圖註本草\": {\r\n        \"zh\": \"新編類要圖註本草\",\r\n        \"en\": \"The new class diagram notes materia medica\"\r\n    },\r\n    \"西翁近藁\": {\r\n        \"zh\": \"西翁近藁\",\r\n        \"en\": \"Scion chinensis\"\r\n    },\r\n    \"大方廣佛華嚴經\": {\r\n        \"zh\": \"大方廣佛華嚴經\",\r\n        \"en\": \"Generous and broad Buddha and strict sutras\"\r\n    },\r\n    \"誠齋先生南海集\": {\r\n        \"zh\": \"誠齋先生南海集\",\r\n        \"en\": \"Mr. Seizai Nanhai Collection\"\r\n    },\r\n    \"春秋經傳集解三十卷\": {\r\n        \"zh\": \"春秋經傳集解三十卷\",\r\n        \"en\": \"The Spring and Autumn classics collected 30 volumes\"\r\n    },\r\n    \"國朝文類\": {\r\n        \"zh\": \"國朝文類\",\r\n        \"en\": \"Chinese and Korean characters\"\r\n    },\r\n    \"誠齋集\": {\r\n        \"zh\": \"誠齋集\",\r\n        \"en\": \"Seisaiji\"\r\n    },\r\n    \"禪宗頌古聯珠通集\": {\r\n        \"zh\": \"禪宗頌古聯珠通集\",\r\n        \"en\": \"Zen song ancient Lianzhu Tong set\"\r\n    }\r\n}\r\n\r\nexport const agent_trans_name = {\r\n    \"掘正意\": {\r\n        \"zh\": \"掘正意\",\r\n        \"en\": \"Jue Zhengyi\"\r\n    },\r\n    \"釋宗杲\": {\r\n        \"zh\": \"釋宗杲\",\r\n        \"en\": \"Shi Zonggao\"\r\n    },\r\n    \"寺田弘(一名盛業，字士弘，號望南)\": {\r\n        \"zh\": \"寺田弘(一名盛業，字士弘，號望南)\",\r\n        \"en\": \"Hiroshi Terada (a Seigyo, courtesy name Shiko, alias Bonan)\"\r\n    },\r\n    \"寺田弘\": {\r\n        \"zh\": \"寺田弘\",\r\n        \"en\": \"Hiroshi Terada\"\r\n    },\r\n    \"蘇軾\": {\r\n        \"zh\": \"蘇軾\",\r\n        \"en\": \"Su Shi\"\r\n    },\r\n    \"沢田一斎\": {\r\n        \"zh\": \"沢田一斎\",\r\n        \"en\": \"Issai Sawada\"\r\n    },\r\n    \"宋祁\": {\r\n        \"zh\": \"宋祁\",\r\n        \"en\": \"Song Qi\"\r\n    },\r\n    \"巢元方\": {\r\n        \"zh\": \"巢元方\",\r\n        \"en\": \"Neiyuan formula\"\r\n    },\r\n    \"朱熹/程復心\": {\r\n        \"zh\": \"朱熹/程復心\",\r\n        \"en\": \"Zhu Xi/Cheng Fuxin\"\r\n    },\r\n    \"僧玄興\": {\r\n        \"zh\": \"僧玄興\",\r\n        \"en\": \"Monk Xuanxing\"\r\n    },\r\n    \"德富蘇峰\": {\r\n        \"zh\": \"德富蘇峰\",\r\n        \"en\": \"Soho Tokutomi\"\r\n    },\r\n    \"菅原在輔\": {\r\n        \"zh\": \"菅原在輔\",\r\n        \"en\": \"Arisuke Sugawara\"\r\n    },\r\n    \"小倉祐利\": {\r\n        \"zh\": \"小倉祐利\",\r\n        \"en\": \"Yuri Ogura\"\r\n    },\r\n    \"寶英\": {\r\n        \"zh\": \"寶英\",\r\n        \"en\": \"Baoying\"\r\n    },\r\n    \"丹波氏(即多紀氏，多紀元孝等)\": {\r\n        \"zh\": \"丹波氏(即多紀氏，多紀元孝等)\",\r\n        \"en\": \"Tanba (i.e. Taki, Mototaka Taki, etc.)\"\r\n    },\r\n    // addtion\r\n    \"丹波氏\": {\r\n        \"zh\": \"丹波氏\",\r\n        \"en\": \"Tanba etc.\"\r\n    },\r\n    \"蕭統/李善/五臣（呂延濟、劉良、張銑、呂向、李周瀚）\": {\r\n        \"zh\": \"蕭統/李善/五臣（呂延濟、劉良、張銑、呂向、李周瀚）\",\r\n        \"en\": \"Xiao Tong/LI Shan/Wu Chen (LV Yanji, Liu Liang, Zhang Mill, Lu Xiang, LI Zhouhan)\"\r\n    },\r\n    // addition\r\n    \"蕭統（等）\": {\r\n        \"zh\": \"蕭統（等）\",\r\n        \"en\": \"Xiao Tong etc.\"\r\n    },\r\n    \"陳景沂/祝穆\": {\r\n        \"zh\": \"陳景沂/祝穆\",\r\n        \"en\": \"Chen Jingyi/Zhu Mu\"\r\n    },\r\n    \"丁度\": {\r\n        \"zh\": \"丁度\",\r\n        \"en\": \"Butyl degree\"\r\n    },\r\n    \"釋悟明\": {\r\n        \"zh\": \"釋悟明\",\r\n        \"en\": \"enlightenment\"\r\n    },\r\n    \"圓種\": {\r\n        \"zh\": \"圓種\",\r\n        \"en\": \"Round species\"\r\n    },\r\n    \"愛新覺羅顒琰、旻宁、奕詝、载淳、载湉、溥仪\": {\r\n        \"zh\": \"愛新覺羅顒琰、旻宁、奕詝、载淳、载湉、溥仪\",\r\n        \"en\": \"Aisin Jogoro, Minning, Yi wisdom, Jaisun, Jaishu, Pu Yi\"\r\n    },\r\n    // addition\r\n    \"愛新覺羅顒琰（等）\": {\r\n        \"zh\": \"愛新覺羅顒琰（等）\",\r\n        \"en\": \"Aisin Jogoro etc.\"\r\n    },\r\n    \"李昉\": {\r\n        \"zh\": \"李昉\",\r\n        \"en\": \"Li Fang\"\r\n    },\r\n    \"岡本況齋\": {\r\n        \"zh\": \"岡本況齋\",\r\n        \"en\": \"Kyosai Okamoto\"\r\n    },\r\n    \"王安石\": {\r\n        \"zh\": \"王安石\",\r\n        \"en\": \"Wang Anshi\"\r\n    },\r\n    \"高麗肅宗\": {\r\n        \"zh\": \"高麗肅宗\",\r\n        \"en\": \"King Sukjong of Goryeo\"\r\n    },\r\n    \"真勢中洲\": {\r\n        \"zh\": \"真勢中洲\",\r\n        \"en\": \"Chusyu Mase\"\r\n    },\r\n    \"聖一國師\": {\r\n        \"zh\": \"聖一國師\",\r\n        \"en\": \"Syoichi-kokushi\"\r\n    },\r\n    \"市橋長昭\": {\r\n        \"zh\": \"市橋長昭\",\r\n        \"en\": \"Nagaaki Ichihashi\"\r\n    },\r\n    \"陳澔\": {\r\n        \"zh\": \"陳澔\",\r\n        \"en\": \"Chen ho\"\r\n    },\r\n    \"寺田望南\": {\r\n        \"zh\": \"寺田望南\",\r\n        \"en\": \"Terada Bonan\"\r\n    },\r\n    \"毛利高翰\": {\r\n        \"zh\": \"毛利高翰\",\r\n        \"en\": \"Takanaka Mori\"\r\n    },\r\n    \"柴邦彥\": {\r\n        \"zh\": \"柴邦彥\",\r\n        \"en\": \"Kunihiko Shiba\"\r\n    },\r\n    \"寒山\": {\r\n        \"zh\": \"寒山\",\r\n        \"en\": \"Cold mountain\"\r\n    },\r\n    \"王安石/李壁/劉辰翁\": {\r\n        \"zh\": \"王安石/李壁/劉辰翁\",\r\n        \"en\": \"Wang Anshi/Li Bi/Liu Chenweng\"\r\n    },\r\n    // addition\r\n    \"王安石（等）\": {\r\n        \"zh\": \"王安石（等）\",\r\n        \"en\": \"Wang Anshi etc.\"\r\n    },\r\n    \"杜甫/徐居仁/黃鶴\": {\r\n        \"zh\": \"杜甫/徐居仁/黃鶴\",\r\n        \"en\": \"Du Fu/Xu Juren/Huang He\"\r\n    },\r\n    // addtion\r\n    \"杜甫（等）\": {\r\n        \"zh\": \"杜甫（等）\",\r\n        \"en\": \"Du Fu etc.\"\r\n    },\r\n    \"劉渙\": {\r\n        \"zh\": \"劉渙\",\r\n        \"en\": \"Liu Huan\"\r\n    },\r\n    \"許謙\": {\r\n        \"zh\": \"許謙\",\r\n        \"en\": \"Xu Qian\"\r\n    },\r\n    \"范履祥\": {\r\n        \"zh\": \"范履祥\",\r\n        \"en\": \"Fan Luxiang\"\r\n    },\r\n    \"毋逢辰\": {\r\n        \"zh\": \"毋逢辰\",\r\n        \"en\": \"Wu Fengchen\"\r\n    },\r\n    \"林恕\": {\r\n        \"zh\": \"林恕\",\r\n        \"en\": \"Lin Shu\"\r\n    },\r\n    \"清田儋叟\": {\r\n        \"zh\": \"清田儋叟\",\r\n        \"en\": \"Tanso Seita\"\r\n    },\r\n    \"多紀元德\": {\r\n        \"zh\": \"多紀元德\",\r\n        \"en\": \"Motonori Taki\"\r\n    },\r\n    \"森立之\": {\r\n        \"zh\": \"森立之\",\r\n        \"en\": \"Risshi Mori\"\r\n    },\r\n    \"實叉難陀\": {\r\n        \"zh\": \"實叉難陀\",\r\n        \"en\": \"Shiharnanda\"\r\n    },\r\n    \"董楷\": {\r\n        \"zh\": \"董楷\",\r\n        \"en\": \"Dong Kai\"\r\n    },\r\n    \"狩谷棭齋\": {\r\n        \"zh\": \"狩谷棭齋\",\r\n        \"en\": \"Ekisai Kariya\"\r\n    },\r\n    \"溥傑\": {\r\n        \"zh\": \"溥傑\",\r\n        \"en\": \"Pu Jie\"\r\n    },\r\n    \"山田業廣\": {\r\n        \"zh\": \"山田業廣\",\r\n        \"en\": \"Gyoko Yamada\"\r\n    },\r\n    \"朝鮮世宗\": {\r\n        \"zh\": \"朝鮮世宗\",\r\n        \"en\": \"Joseon Sejong\"\r\n    },\r\n    \"陳元靚\": {\r\n        \"zh\": \"陳元靚\",\r\n        \"en\": \"Chen Yuanliang\"\r\n    },\r\n    \"呂祖謙\": {\r\n        \"zh\": \"呂祖謙\",\r\n        \"en\": \"Lv Zuqian\"\r\n    },\r\n    \"祝穆\": {\r\n        \"zh\": \"祝穆\",\r\n        \"en\": \"Zhu Mu\"\r\n    },\r\n    \"孔穎達/王德韶/李子雲/朱長才/蘇德融/隋德素/王士雄/趙弘智/長孫無忌/李勣/于志寧/張行成/高季輔/褚遂良/柳奭/谷那律/劉伯莊/賈公彥/范義頵/齊威/柳士宣/孔志約/趙君贊/薛伯珍/史士弘/鄭祖玄/周玄達/李玄植/王真儒\": {\r\n        \"zh\": \"孔穎達/王德韶/李子雲/朱長才/蘇德融/隋德素/王士雄/趙弘智/長孫無忌/李勣/于志寧/張行成/高季輔/褚遂良/柳奭/谷那律/劉伯莊/賈公彥/范義頵/齊威/柳士宣/孔志約/趙君贊/薛伯珍/史士弘/鄭祖玄/周玄達/李玄植/王真儒\",\r\n        \"en\": \"Kong Yingda/Wang Deshao/Li Ziyun/Zhu Changcai/Su Delong/Sui Desu/Wang Shixiong/Zhao Hongzhi/Changsun Wuji/Li Merit/Yu Zhining/Zhang Xingcheng/Gao Jifu/Chu Suiliang/Liu Shi/Gu Nalu/Liu Bozhuang/Jia Gongyan/Fan Yishuang/Qi Wei/Liu Shixuan/Kong Zhiyao/Zhao Junzan/Xue Bozhen/Shi Shihong/Zheng Zuxuan/Zhou Xuanda/Li Xuanshik/Wang Zhenru\"\r\n    },\r\n    // addition\r\n    \"孔穎達（等）\": {\r\n        \"zh\": \"孔穎達（等）\",\r\n        \"en\": \"Kong Yingda etc.\"\r\n    },\r\n    \"李公凱\": {\r\n        \"zh\": \"李公凱\",\r\n        \"en\": \"Li Gongkai\"\r\n    },\r\n    \"張清子\": {\r\n        \"zh\": \"張清子\",\r\n        \"en\": \"Zhang Qingzi\"\r\n    },\r\n    \"井口蘭雪\": {\r\n        \"zh\": \"井口蘭雪\",\r\n        \"en\": \"Ransetsu Iguchi\"\r\n    },\r\n    \"歐陽修\": {\r\n        \"zh\": \"歐陽修\",\r\n        \"en\": \"Ouyang Xiu\"\r\n    },\r\n    \"顧然\": {\r\n        \"zh\": \"顧然\",\r\n        \"en\": \"Gu Ran\"\r\n    },\r\n    \"溥儀/溥傑\": {\r\n        \"zh\": \"溥儀/溥傑\",\r\n        \"en\": \"Pu Yi/Pu Jie\"\r\n    },\r\n    \"寇宗奭\": {\r\n        \"zh\": \"寇宗奭\",\r\n        \"en\": \"Kou Zongshi\"\r\n    },\r\n    \"樂史\": {\r\n        \"zh\": \"樂史\",\r\n        \"en\": \"Leshi\"\r\n    },\r\n    \"彭寅翁\": {\r\n        \"zh\": \"彭寅翁\",\r\n        \"en\": \"Peng Yin Weng\"\r\n    },\r\n    \"河合元升\": {\r\n        \"zh\": \"河合元升\",\r\n        \"en\": \"Gensyo Kawai\"\r\n    },\r\n    \"毛利高標\": {\r\n        \"zh\": \"毛利高標\",\r\n        \"en\": \"Takasue Mori\"\r\n    },\r\n    \"余彥國\": {\r\n        \"zh\": \"余彥國\",\r\n        \"en\": \"Yu Yanguo\"\r\n    },\r\n    \"宇喜多秀家\": {\r\n        \"zh\": \"宇喜多秀家\",\r\n        \"en\": \"Hideie Ukita\"\r\n    },\r\n    \"德川家齊\": {\r\n        \"zh\": \"德川家齊\",\r\n        \"en\": \"Ienari Tokugawa\"\r\n    },\r\n    \"愛新覺羅弘曆\": {\r\n        \"zh\": \"愛新覺羅弘曆\",\r\n        \"en\": \"Aixinjueluo Hongli\"\r\n    },\r\n    \"王通/阮逸\": {\r\n        \"zh\": \"王通/阮逸\",\r\n        \"en\": \"Wang Tong/Ruan Yi\"\r\n    },\r\n    \"陳齊巖\": {\r\n        \"zh\": \"陳齊巖\",\r\n        \"en\": \"Chen Qiyan\"\r\n    },\r\n    \"納蘭揆敘\": {\r\n        \"zh\": \"納蘭揆敘\",\r\n        \"en\": \"Naran Cosur\"\r\n    },\r\n    \"余志安\": {\r\n        \"zh\": \"余志安\",\r\n        \"en\": \"Yu Zhi 'an\"\r\n    },\r\n    \"吳岫\": {\r\n        \"zh\": \"吳岫\",\r\n        \"en\": \"Wu Xiu\"\r\n    },\r\n    \"樋口光義\": {\r\n        \"zh\": \"樋口光義\",\r\n        \"en\": \"Mitsuyoshi Higuchi\"\r\n    },\r\n    \"真定提學龍山趙候國寶\": {\r\n        \"zh\": \"真定提學龍山趙候國寶\",\r\n        \"en\": \"Really set learning Longshan Zhao Hou national treasure\"\r\n    },\r\n    \"狩谷望之\": {\r\n        \"zh\": \"狩谷望之\",\r\n        \"en\": \"Mochiyuki Kariya\"\r\n    },\r\n    \"魏峴\": {\r\n        \"zh\": \"魏峴\",\r\n        \"en\": \"Wei Xian\"\r\n    },\r\n    \"芝野六助\": {\r\n        \"zh\": \"芝野六助\",\r\n        \"en\": \"Rokusuke Shibano\"\r\n    },\r\n    \"細川十洲(潤次郎)\": {\r\n        \"zh\": \"細川十洲(潤次郎)\",\r\n        \"en\": \"Hosokawa Jyussyu (Jyunjiro)\"\r\n    },\r\n    // addtion\r\n    \"細川十洲\": {\r\n        \"zh\": \"細川十洲\",\r\n        \"en\": \"Hosokawa Jyussyu\"\r\n    },\r\n    \"譚景星/陳泗孔\": {\r\n        \"zh\": \"譚景星/陳泗孔\",\r\n        \"en\": \"Tan Jingxing/Chen Sikong\"\r\n    },\r\n    \"溥儀/日本天皇\": {\r\n        \"zh\": \"溥儀/日本天皇\",\r\n        \"en\": \"Pu Yi/The Emperor of Japan\"\r\n    },\r\n    \"多紀元孝\": {\r\n        \"zh\": \"多紀元孝\",\r\n        \"en\": \"Mototaka Taki\"\r\n    },\r\n    \"趙善繼/盧欽\": {\r\n        \"zh\": \"趙善繼/盧欽\",\r\n        \"en\": \"Zhao Shanji/Lu Qin\"\r\n    },\r\n    \"王充\": {\r\n        \"zh\": \"王充\",\r\n        \"en\": \"Wang Chong\"\r\n    },\r\n    \"張世南\": {\r\n        \"zh\": \"張世南\",\r\n        \"en\": \"Zhang Shinan\"\r\n    },\r\n    \"蘇天爵\": {\r\n        \"zh\": \"蘇天爵\",\r\n        \"en\": \"Su Tianjue\"\r\n    },\r\n    \"蘇洵/蘇軾/蘇轍/闕名\": {\r\n        \"zh\": \"蘇洵/蘇軾/蘇轍/闕名\",\r\n        \"en\": \"Su Xun/Su Shi/Su Zhe/Que name\"\r\n    },\r\n    // addtion\r\n    \"蘇洵（等）\": {\r\n        \"zh\": \"蘇洵（等）\",\r\n        \"en\": \"Su Xun etc.\"\r\n    },\r\n    \"心華元棣\": {\r\n        \"zh\": \"心華元棣\",\r\n        \"en\": \"Shinge Gentei\"\r\n    },\r\n    \"曲直瀨養安院家\": {\r\n        \"zh\": \"曲直瀨養安院家\",\r\n        \"en\": \"Manase-yoanin\"\r\n    },\r\n    \"唐寅\": {\r\n        \"zh\": \"唐寅\",\r\n        \"en\": \"Tang Yin\"\r\n    },\r\n    \"倪士毅\": {\r\n        \"zh\": \"倪士毅\",\r\n        \"en\": \"Ni Shiyi\"\r\n    },\r\n    \"林衡\": {\r\n        \"zh\": \"林衡\",\r\n        \"en\": \"Lin Heng\"\r\n    },\r\n    \"崔敦诗\": {\r\n        \"zh\": \"崔敦诗\",\r\n        \"en\": \"Choi Dunshi\"\r\n    },\r\n    \"郭璞/邢昺\": {\r\n        \"zh\": \"郭璞/邢昺\",\r\n        \"en\": \"Guo Pu/Xing Bing\"\r\n    },\r\n    \"邢昺\": {\r\n        \"zh\": \"邢昺\",\r\n        \"en\": \"Xing Bing\"\r\n    },\r\n    \"堀正意\": {\r\n        \"zh\": \"堀正意\",\r\n        \"en\": \"Masaoki Hori\"\r\n    },\r\n    \"山内豊信\": {\r\n        \"zh\": \"山内豊信\",\r\n        \"en\": \"Toyoshige Yamauchi\"\r\n    },\r\n    \"錢孫愛\": {\r\n        \"zh\": \"錢孫愛\",\r\n        \"en\": \"Qian Sunai\"\r\n    },\r\n    \"釋居簡\": {\r\n        \"zh\": \"釋居簡\",\r\n        \"en\": \"A surname\"\r\n    },\r\n    \"日典\": {\r\n        \"zh\": \"日典\",\r\n        \"en\": \"Nitten\"\r\n    },\r\n    \"木村正辭\": {\r\n        \"zh\": \"木村正辭\",\r\n        \"en\": \"Masakoto Kimura\"\r\n    },\r\n    \"渡邊霞亭\": {\r\n        \"zh\": \"渡邊霞亭\",\r\n        \"en\": \"Katei Watanabe\"\r\n    },\r\n    \"楊倓\": {\r\n        \"zh\": \"楊倓\",\r\n        \"en\": \"Yang Yan\"\r\n    },\r\n    \"尹瑜\": {\r\n        \"zh\": \"尹瑜\",\r\n        \"en\": \"Yin Yu\"\r\n    },\r\n    \"江戶幕府\": {\r\n        \"zh\": \"江戶幕府\",\r\n        \"en\": \"The Edo shogunate\"\r\n    },\r\n    \"榊原玄輔\": {\r\n        \"zh\": \"榊原玄輔\",\r\n        \"en\": \"Gensuke Sakakibara\"\r\n    },\r\n    \"伊勢屋源七\": {\r\n        \"zh\": \"伊勢屋源七\",\r\n        \"en\": \"Iseya Genshichi\"\r\n    },\r\n    \"林宗二\": {\r\n        \"zh\": \"林宗二\",\r\n        \"en\": \"Rin Soji\"\r\n    },\r\n    \"汪克寬\": {\r\n        \"zh\": \"汪克寬\",\r\n        \"en\": \"Wang Kekuan\"\r\n    },\r\n    \"李隆基\": {\r\n        \"zh\": \"李隆基\",\r\n        \"en\": \"Li Longji\"\r\n    },\r\n    \"汪啟淑\": {\r\n        \"zh\": \"汪啟淑\",\r\n        \"en\": \"Wang Qishu\"\r\n    },\r\n    \"多紀元簡\": {\r\n        \"zh\": \"多紀元簡\",\r\n        \"en\": \"Motoyasu Taki\"\r\n    },\r\n    \"洪适\": {\r\n        \"zh\": \"洪适\",\r\n        \"en\": \"Hong Shi\"\r\n    },\r\n    \"黃公紹/熊忠\": {\r\n        \"zh\": \"黃公紹/熊忠\",\r\n        \"en\": \"Huang Gongshao/Xiong Zhong\"\r\n    },\r\n    \"李濂\": {\r\n        \"zh\": \"李濂\",\r\n        \"en\": \"Li Lian\"\r\n    },\r\n    \"劉義慶/劉孝標\": {\r\n        \"zh\": \"劉義慶/劉孝標\",\r\n        \"en\": \"Liu Yiqing/Liu Xiaobiao\"\r\n    },\r\n    \"楊萬里/周公恕\": {\r\n        \"zh\": \"楊萬里/周公恕\",\r\n        \"en\": \"Yang Wanli/Zhou Gongshu\"\r\n    },\r\n    \"木村蒹葭堂\": {\r\n        \"zh\": \"木村蒹葭堂\",\r\n        \"en\": \"Kenkado Kimura\"\r\n    },\r\n    \"釋道泰/智境\": {\r\n        \"zh\": \"釋道泰/智境\",\r\n        \"en\": \"Shi Tao Tai/Zhi Jing\"\r\n    },\r\n    \"陳師文\": {\r\n        \"zh\": \"陳師文\",\r\n        \"en\": \"Chen Shiwen\"\r\n    },\r\n    \"館機(名機，字樞卿)\": {\r\n        \"zh\": \"館機(名機，字樞卿)\",\r\n        \"en\": \"Pavilion machine (first name machine, Chinese character Shuqing)\"\r\n    },\r\n    // addtiion\r\n    \"館機\": {\r\n        \"zh\": \"館機\",\r\n        \"en\": \"Pavilion machine\"\r\n    },\r\n    \"無學祖元\": {\r\n        \"zh\": \"無學祖元\",\r\n        \"en\": \"Mugaku Sogen\"\r\n    },\r\n    \"聞人模\": {\r\n        \"zh\": \"聞人模\",\r\n        \"en\": \"Human model\"\r\n    },\r\n    \"新見正路\": {\r\n        \"zh\": \"新見正路\",\r\n        \"en\": \"Shinmi Masamichi\"\r\n    },\r\n    \"杜佑\": {\r\n        \"zh\": \"杜佑\",\r\n        \"en\": \"Du You\"\r\n    },\r\n    \"上杉憲實\": {\r\n        \"zh\": \"上杉憲實\",\r\n        \"en\": \"Norizane Uesugi\"\r\n    },\r\n    \"徐堅\": {\r\n        \"zh\": \"徐堅\",\r\n        \"en\": \"Xu Jian\"\r\n    },\r\n    \"楊萬里/楊長儒/羅茂良\": {\r\n        \"zh\": \"楊萬里/楊長儒/羅茂良\",\r\n        \"en\": \"Yang Wanli/Yang Changru/Luo Maoliang\"\r\n    },\r\n    // addtion\r\n    \"楊萬里（等）\": {\r\n        \"zh\": \"楊萬里（等）\",\r\n        \"en\": \"Yang Wanli etc.\"\r\n    },\r\n    \"釋法應/釋普惠\": {\r\n        \"zh\": \"釋法應/釋普惠\",\r\n        \"en\": \"The interpretation of the Fa should be/the interpretation of the Pu Hui\"\r\n    },\r\n    \"余四十三郎\": {\r\n        \"zh\": \"余四十三郎\",\r\n        \"en\": \"Yu 43 lang\"\r\n    },\r\n    \"長孫無忌\": {\r\n        \"zh\": \"長孫無忌\",\r\n        \"en\": \"Eldest son Wuji\"\r\n    },\r\n    \"--\": {\r\n        \"zh\": \"--\",\r\n        \"en\": \"--\"\r\n    }\r\n}\r\n\r\nexport const library_trans_name = {\r\n    \"--\": {\r\n        \"zh\": \"--\",\r\n        \"en\": \"--\"\r\n    },\r\n    \"國立公文書館\": {\r\n        \"zh\": \"國立公文書館\",\r\n        \"en\": \"National Public Library\"\r\n    },\r\n    \"宮内省圖書寮\": {\r\n        \"zh\": \"宮内省圖書寮\",\r\n        \"en\": \"The Tosyoryo Bunko of Imperial Household Agency\"\r\n    },\r\n    \"宮内廳書陵部\": {\r\n        \"zh\": \"宮内廳書陵部\",\r\n        \"en\": \"The Syoryobu Department of Imperial Household Agency\"\r\n    },\r\n    \"圓德寺\": {\r\n        \"zh\": \"圓德寺\",\r\n        \"en\": \"Entokuji Temple\"\r\n    },\r\n    \"日本舊御府圖書館\": {\r\n        \"zh\": \"日本舊御府圖書館\",\r\n        \"en\": \"The Old Imperial Palace Library in Japan\"\r\n    },\r\n    \"妙心寺\": {\r\n        \"zh\": \"妙心寺\",\r\n        \"en\": \"Myoshinji Temple\"\r\n    },\r\n    \"勤有堂\": {\r\n        \"zh\": \"勤有堂\",\r\n        \"en\": \"Qin Yutang\"\r\n    },\r\n    \"清宮内府\": {\r\n        \"zh\": \"清宮内府\",\r\n        \"en\": \"The imperial Palace\"\r\n    },\r\n    \"不二北軒\": {\r\n        \"zh\": \"不二北軒\",\r\n        \"en\": \"North Fuji-an\"\r\n    },\r\n    \"御府圖書\": {\r\n        \"zh\": \"御府圖書\",\r\n        \"en\": \"Imperial house book\"\r\n    },\r\n    \"無範\": {\r\n        \"zh\": \"無範\",\r\n        \"en\": \"Muhan\"\r\n    },\r\n    \"大學校\": {\r\n        \"zh\": \"大學校\",\r\n        \"en\": \"university\"\r\n    },\r\n    \"大學\": {\r\n        \"zh\": \"大學\",\r\n        \"en\": \"university\"\r\n    },\r\n    \"大學校/大學\": {\r\n        \"zh\": \"大學校/大學\",\r\n        \"en\": \"A large school/university\"\r\n    },\r\n    \"趨古齋\": {\r\n        \"zh\": \"趨古齋\",\r\n        \"en\": \"Ancient zhai\"\r\n    },\r\n    \"佐伯藩\": {\r\n        \"zh\": \"佐伯藩\",\r\n        \"en\": \"Saiki Han\"\r\n    },\r\n    \"稱名寺\": {\r\n        \"zh\": \"稱名寺\",\r\n        \"en\": \"Syomyoji Temple\"\r\n    },\r\n    \"德川幕府\": {\r\n        \"zh\": \"德川幕府\",\r\n        \"en\": \"The Tokugawa shogunate\"\r\n    },\r\n    \"心華藏書\": {\r\n        \"zh\": \"心華藏書\",\r\n        \"en\": \"The collection of Shinge Gentei\"\r\n    },\r\n    \"日本政府圖書\": {\r\n        \"zh\": \"日本政府圖書\",\r\n        \"en\": \"Books of Japanese government\"\r\n    },\r\n    \"全谿義塾\": {\r\n        \"zh\": \"全谿義塾\",\r\n        \"en\": \"Jeon Kye Juku\"\r\n    },\r\n    \"内閣文庫\": {\r\n        \"zh\": \"内閣文庫\",\r\n        \"en\": \"Naikoku Bunko\"\r\n    },\r\n    \"崇道精舍\": {\r\n        \"zh\": \"崇道精舍\",\r\n        \"en\": \"Chongdao Jing House\"\r\n    },\r\n    \"艮岳院\": {\r\n        \"zh\": \"艮岳院\",\r\n        \"en\": \"Kongaku-in\"\r\n    },\r\n    \"相國寺\": {\r\n        \"zh\": \"相國寺\",\r\n        \"en\": \"Syokokuji Temple\"\r\n    },\r\n    \"圓覺寺塔中歸源院\": {\r\n        \"zh\": \"圓覺寺塔中歸源院\",\r\n        \"en\": \"Kigenin，Tattyu of Engakuji Temple\"\r\n    },\r\n    \"内務省文庫\": {\r\n        \"zh\": \"内務省文庫\",\r\n        \"en\": \"Library of Home Ministry\"\r\n    },\r\n    \"圓覺寺\": {\r\n        \"zh\": \"圓覺寺\",\r\n        \"en\": \"Engakuji Temple\"\r\n    },\r\n    \"芳春院\": {\r\n        \"zh\": \"芳春院\",\r\n        \"en\": \"Housyunin\"\r\n    },\r\n    \"懷仙樓\": {\r\n        \"zh\": \"懷仙樓\",\r\n        \"en\": \"Huai Xian Lou\"\r\n    },\r\n    \"建依別文庫\": {\r\n        \"zh\": \"建依別文庫\",\r\n        \"en\": \"Takeyoriwake Bunko\"\r\n    },\r\n    \"楓山文庫\": {\r\n        \"zh\": \"楓山文庫\",\r\n        \"en\": \"Momijiyama Bunko\"\r\n    },\r\n    \"聿修堂\": {\r\n        \"zh\": \"聿修堂\",\r\n        \"en\": \"Issyudo\"\r\n    },\r\n    \"宮内省書陵部\": {\r\n        \"zh\": \"宮内省書陵部\",\r\n        \"en\": \"The Syoryobu Department of Imperial Household Agency\"\r\n    },\r\n    \"醫學館\": {\r\n        \"zh\": \"醫學館\",\r\n        \"en\": \"Igakukan\"\r\n    },\r\n    \"京都高山寺\": {\r\n        \"zh\": \"京都高山寺\",\r\n        \"en\": \"Kouzanji Temple，Kyoto\"\r\n    },\r\n    \"江戶醫學館(初名“躋壽館”)\": {\r\n        \"zh\": \"江戶醫學館(初名“躋壽館”)\",\r\n        \"en\": \"Edo Igakukan (original name \\\"Seijyukan\\\")\"\r\n    },\r\n    \"江戶醫學館\": {\r\n        \"zh\": \"江戶醫學館\",\r\n        \"en\": \"Edo Igakukan\"\r\n    },\r\n    \"京都學校\": {\r\n        \"zh\": \"京都學校\",\r\n        \"en\": \"Kyoto school\"\r\n    },\r\n    \"京都妙覺寺\": {\r\n        \"zh\": \"京都妙覺寺\",\r\n        \"en\": \"Myokakuji Temple，Kyoto\"\r\n    },\r\n    \"顏氏家藏\": {\r\n        \"zh\": \"顏氏家藏\",\r\n        \"en\": \"The Yan family stash\"\r\n    },\r\n    \"桂宮文庫\": {\r\n        \"zh\": \"桂宮文庫\",\r\n        \"en\": \"Katsuranomiya Bunko\"\r\n    },\r\n    \"讀杜草堂/靜節山房\": {\r\n        \"zh\": \"讀杜草堂/靜節山房\",\r\n        \"en\": \"Read Du cottage/static section mountain room\"\r\n    },\r\n    \"文化辛未\": {\r\n        \"zh\": \"文化辛未\",\r\n        \"en\": \"Bunka Xinwei\"\r\n    },\r\n    \"躋壽館\": {\r\n        \"zh\": \"躋壽館\",\r\n        \"en\": \"Seijyukan\"\r\n    },\r\n    \"享和壬戌\": {\r\n        \"zh\": \"享和壬戌\",\r\n        \"en\": \"Kyowa Renxu\"\r\n    },\r\n    \"北玉照齋\": {\r\n        \"zh\": \"北玉照齋\",\r\n        \"en\": \"North Jade Light Zhai\"\r\n    },\r\n    \"興國軍\": {\r\n        \"zh\": \"興國軍\",\r\n        \"en\": \"Xingguo army\"\r\n    },\r\n    \"金澤文庫\": {\r\n        \"zh\": \"金澤文庫\",\r\n        \"en\": \"Kanazawa Bunko\"\r\n    },\r\n    \"幕府?\": {\r\n        \"zh\": \"幕府?\",\r\n        \"en\": \"The shogunate?\"\r\n    },\r\n    \"真定\": {\r\n        \"zh\": \"真定\",\r\n        \"en\": \"genidine\"\r\n    },\r\n    \"黃雪書屋\": {\r\n        \"zh\": \"黃雪書屋\",\r\n        \"en\": \"Kosetsu syooku\"\r\n    },\r\n    \"霞亭\": {\r\n        \"zh\": \"霞亭\",\r\n        \"en\": \"Katei\"\r\n    },\r\n    \"學習院\": {\r\n        \"zh\": \"學習院\",\r\n        \"en\": \"Gakusyuin\"\r\n    },\r\n    \"龍眠庵\": {\r\n        \"zh\": \"龍眠庵\",\r\n        \"en\": \"Ryumin-an\"\r\n    },\r\n    \"普門院\": {\r\n        \"zh\": \"普門院\",\r\n        \"en\": \"Fumonin\"\r\n    },\r\n    \"南禪寺金地院\": {\r\n        \"zh\": \"南禪寺金地院\",\r\n        \"en\": \"Konchiin in Nanzenji Temple\"\r\n    },\r\n    \"謙牧堂\": {\r\n        \"zh\": \"謙牧堂\",\r\n        \"en\": \"Chamomido\"\r\n    },\r\n    \"廣壽院\": {\r\n        \"zh\": \"廣壽院\",\r\n        \"en\": \"Kojyuin\"\r\n    },\r\n    \"狩谷棭齋求古樓\": {\r\n        \"zh\": \"狩谷棭齋求古樓\",\r\n        \"en\": \"Kyukoro of Kariya Ekisai\"\r\n    },\r\n    \"金地院\": {\r\n        \"zh\": \"金地院\",\r\n        \"en\": \"Konchiin\"\r\n    },\r\n    \"林氏家塾\": {\r\n        \"zh\": \"林氏家塾\",\r\n        \"en\": \"Rinji kajyuku\"\r\n    },\r\n    \"淺草文庫\": {\r\n        \"zh\": \"淺草文庫\",\r\n        \"en\": \"Bunko Asakusa\"\r\n    },\r\n    \"成簣堂文庫\": {\r\n        \"zh\": \"成簣堂文庫\",\r\n        \"en\": \"Seikido Bunko\"\r\n    },\r\n    \"天祿琳瑯\": {\r\n        \"zh\": \"天祿琳瑯\",\r\n        \"en\": \"The heavens are full of riches\"\r\n    },\r\n    \"天龍寺鹿王院\": {\r\n        \"zh\": \"天龍寺鹿王院\",\r\n        \"en\": \"Rokuohin，Tenryuji Temple\"\r\n    },\r\n    \"戶塚宿\": {\r\n        \"zh\": \"戶塚宿\",\r\n        \"en\": \"Totsuka juku\"\r\n    },\r\n    \"翫月堂\": {\r\n        \"zh\": \"翫月堂\",\r\n        \"en\": \"Gangetsudo\"\r\n    },\r\n    \"太政官文庫\": {\r\n        \"zh\": \"太政官文庫\",\r\n        \"en\": \"Dajyokan Bunko\"\r\n    },\r\n    \"誌書精舍\": {\r\n        \"zh\": \"誌書精舍\",\r\n        \"en\": \"Zhi Shu Jing House\"\r\n    },\r\n    \"増上寺恵照院\": {\r\n        \"zh\": \"増上寺恵照院\",\r\n        \"en\": \"Esyoin in Zoujyoji Temple\"\r\n    },\r\n    \"楓山官庫\": {\r\n        \"zh\": \"楓山官庫\",\r\n        \"en\": \"Momijiyama Bunko\"\r\n    },\r\n    \"昌平坂學問所\": {\r\n        \"zh\": \"昌平坂學問所\",\r\n        \"en\": \"Syoheizaka gakumonjyo\"\r\n    },\r\n    \"神宮寺\": {\r\n        \"zh\": \"神宮寺\",\r\n        \"en\": \"Jinguji\"\r\n    },\r\n    \"寶勝院\": {\r\n        \"zh\": \"寶勝院\",\r\n        \"en\": \"Hosyoin\"\r\n    },\r\n    \"書籍館\": {\r\n        \"zh\": \"書籍館\",\r\n        \"en\": \"Syosekikan\"\r\n    },\r\n    \"玉雲庵 \": {\r\n        \"zh\": \"玉雲庵\",\r\n        \"en\": \"Gyokuun-an\"\r\n    },\r\n    \"内務省\": {\r\n        \"zh\": \"内務省\",\r\n        \"en\": \"Home Ministry\"\r\n    },\r\n    \"帝國博物館\": {\r\n        \"zh\": \"帝國博物館\",\r\n        \"en\": \"Imperial Museum\"\r\n    },\r\n    \"京都五山南禪寺\": {\r\n        \"zh\": \"京都五山南禪寺\",\r\n        \"en\": \"Nanzenji Temple in Kyoto Gozan\"\r\n    },\r\n    \"建安勵賢堂\": {\r\n        \"zh\": \"建安勵賢堂\",\r\n        \"en\": \"Jianan Lixian Hall\"\r\n    },\r\n    \"肇慶軍府\": {\r\n        \"zh\": \"肇慶軍府\",\r\n        \"en\": \"Zhaoqing Jun Fu\"\r\n    },\r\n    \"天龍寺金剛院\": {\r\n        \"zh\": \"天龍寺金剛院\",\r\n        \"en\": \"Kongoin，Tenryuji Temple\"\r\n    },\r\n    \"賜蘆文庫\": {\r\n        \"zh\": \"賜蘆文庫\",\r\n        \"en\": \"Shiro Bunko\"\r\n    },\r\n    \"經筵\": {\r\n        \"zh\": \"經筵\",\r\n        \"en\": \"Longitude feast\"\r\n    },\r\n    \"暢春堂\": {\r\n        \"zh\": \"暢春堂\",\r\n        \"en\": \"Chosyundo\"\r\n    },\r\n    \"植邨書屋\": {\r\n        \"zh\": \"植邨書屋\",\r\n        \"en\": \"Syokuson syooku\"\r\n    },\r\n    \"重光殿?\": {\r\n        \"zh\": \"重光殿?\",\r\n        \"en\": \"The Hall of Heavy Light?\"\r\n    },\r\n    \"朝鮮李氏王朝王宮\": {\r\n        \"zh\": \"朝鮮李氏王朝王宮\",\r\n        \"en\": \"Palace of the Lee Dynasty of Korea\"\r\n    },\r\n    \"紅葉山文庫\": {\r\n        \"zh\": \"紅葉山文庫\",\r\n        \"en\": \"Momijiyama Bunko\"\r\n    }\r\n}\r\n\r\nexport const book_card_trans = {\r\n    responsible_people: {\r\n        \"北宋-邢昺-疏\": {\r\n            \"zh\": \"北宋-邢昺-疏\",\r\n            \"en\": \"Northern Song Dynasty-Xing Bing-Shu\"\r\n        },\r\n        \"唐-李善-注/唐-五臣-注\": {\r\n            \"zh\": \"唐-李善-注/唐-五臣-注\",\r\n            \"en\": \"Tang-Li Shan-Note/Tang-Wu Chen-note\"\r\n        },\r\n        \"唐-實叉難陀-譯\": {\r\n            \"zh\": \"唐-實叉難陀-譯\",\r\n            \"en\": \"Tang-sitchfork Nanda-translated\"\r\n        },\r\n        \"南宋-釋法應-輯集/元-釋普惠-續輯\": {\r\n            \"zh\": \"南宋-釋法應-輯集/元-釋普惠-續輯\",\r\n            \"en\": \"Southern Song Dynasty-Interpretation of Fa-Compilation/Yuan-Interpretation of Pu Hui-sequel\"\r\n        },\r\n        \"元-陳澔-撰\": {\r\n            \"zh\": \"元-陳澔-撰\",\r\n            \"en\": \"Yuan-Chen Ho-Chu\"\r\n        },\r\n        \"唐-李隆基-注\": {\r\n            \"zh\": \"唐-李隆基-注\",\r\n            \"en\": \"Tang-Li Longji-Note\"\r\n        },\r\n        \"晉-郭璞-注/宋-邢昺-疏\": {\r\n            \"zh\": \"晉-郭璞-注/宋-邢昺-疏\",\r\n            \"en\": \"Jin-Guo Pu-Zhu/Song-Xing Bing-Shu\"\r\n        },\r\n        \"唐-長孫無忌等-撰\": {\r\n            \"zh\": \"唐-長孫無忌等-撰\",\r\n            \"en\": \"Written by Tang-Changsun Wuji et al\"\r\n        },\r\n        \"北宋-寇宗奭-撰\": {\r\n            \"zh\": \"北宋-寇宗奭-撰\",\r\n            \"en\": \"Northern Song Dynasty-Written by Kou Zongshi\"\r\n        },\r\n        \"唐-孔穎達-撰/唐-王德韶-撰/唐-李子雲-撰/唐-朱長才-覆審/唐-蘇德融-覆審/唐-隋德素-覆審/唐-王士雄-覆審/唐-趙弘智-覆審/唐-長孫無忌-刊定/唐-李勣-刊定/唐-于志寧-刊定/唐-張行成-刊定/唐-高季輔-刊定/唐-褚遂良-刊定/唐-柳奭-刊定/唐-谷那律-刊定/唐-劉伯莊-刊定/唐-賈公彥-刊定/唐-范義頵-刊定/唐-齊威-刊定/唐-柳士宣-刊定/唐-孔志約-刊定/唐-趙君贊-刊定/唐-薛伯珍-刊定/唐-史士弘-刊定/唐-鄭祖玄-刊定/唐-周玄達-刊定/唐-李玄植-刊定/唐-王真儒-刊定\": {\r\n            \"zh\": \"唐-孔穎達-撰/唐-王德韶-撰/唐-李子雲-撰/唐-朱長才-覆審/唐-蘇德融-覆審/唐-隋德素-覆審/唐-王士雄-覆審/唐-趙弘智-覆審/唐-長孫無忌-刊定/唐-李勣-刊定/唐-于志寧-刊定/唐-張行成-刊定/唐-高季輔-刊定/唐-褚遂良-刊定/唐-柳奭-刊定/唐-谷那律-刊定/唐-劉伯莊-刊定/唐-賈公彥-刊定/唐-范義頵-刊定/唐-齊威-刊定/唐-柳士宣-刊定/唐-孔志約-刊定/唐-趙君贊-刊定/唐-薛伯珍-刊定/唐-史士弘-刊定/唐-鄭祖玄-刊定/唐-周玄達-刊定/唐-李玄植-刊定/唐-王真儒-刊定\",\r\n            \"en\": \"Tang-Kong Yingda-composed etc.\"\r\n        },\r\n        \"宋-呂祖謙-撰\": {\r\n            \"zh\": \"宋-呂祖謙-撰\",\r\n            \"en\": \"Song-Lu Zuqian-Written\"\r\n        },\r\n        \"宋-楊倓-撰\": {\r\n            \"zh\": \"宋-楊倓-撰\",\r\n            \"en\": \"Song-Yang Yan-written\"\r\n        },\r\n        \"宋-釋宗杲-撰\": {\r\n            \"zh\": \"宋-釋宗杲-撰\",\r\n            \"en\": \"Song-Shi Zonggao-Written\"\r\n        },\r\n        \"宋-朱熹-撰/元-程復心-纂釋\": {\r\n            \"zh\": \"宋-朱熹-撰/元-程復心-纂釋\",\r\n            \"en\": \"Song-Zhu Xi-Composition/Yuan-Cheng Fuxin-Compilation\"\r\n        },\r\n        \"元-蘇天爵-編\": {\r\n            \"zh\": \"元-蘇天爵-編\",\r\n            \"en\": \"Yuan-Su Tianjue-Ed\"\r\n        },\r\n        \"宋-張世南-撰\": {\r\n            \"zh\": \"宋-張世南-撰\",\r\n            \"en\": \"Song-Zhang Shi-nan-Written\"\r\n        },\r\n        \"隋-王通-撰/宋-阮逸-注\": {\r\n            \"zh\": \"隋-王通-撰/宋-阮逸-注\",\r\n            \"en\": \"Sui-Wang Tong-Chu/Song-Ruan Yi-Note\"\r\n        },\r\n        \"東漢-王充-撰\": {\r\n            \"zh\": \"東漢-王充-撰\",\r\n            \"en\": \"Eastern Han Dynasty-Wang Chong-Chu\"\r\n        },\r\n        \"南朝宋-劉義慶-撰/南朝梁-劉孝標-注\": {\r\n            \"zh\": \"南朝宋-劉義慶-撰/南朝梁-劉孝標-注\",\r\n            \"en\": \"Southern Song Dynasty-Liu Yiqing-Chu/Southern Liang Dynasty-Liu Xiaobiao-Note\"\r\n        },\r\n        \"漢-司馬遷-撰/南朝宋-裴駰-集解/唐-司馬貞-索隱/唐-張守節-正義\": {\r\n            \"zh\": \"漢-司馬遷-撰/南朝宋-裴駰-集解/唐-司馬貞-索隱/唐-張守節-正義\",\r\n            \"en\": \"Han-Sima Qian-Chu/Song-Pei Houn-Jijie/Tang-Sima Zhen-Suoyin/Tang-Zhang Shoujie-Zhengyi\"\r\n        },\r\n        \"唐-徐堅-撰\": {\r\n            \"zh\": \"唐-徐堅-撰\",\r\n            \"en\": \"Tang-Xu Jian-Chan\"\r\n        },\r\n        \"宋-王安石-撰/宋-李壁-箋註/宋-劉辰翁-評點\": {\r\n            \"zh\": \"宋-王安石-撰/宋-李壁-箋註/宋-劉辰翁-評點\",\r\n            \"en\": \"Song-Wang Anshi-Chu/Song-Li Bi-Annotated Notes/Song-Liu Chenweng-Commentary\"\r\n        },\r\n        \"宋-蘇軾-撰\": {\r\n            \"zh\": \"宋-蘇軾-撰\",\r\n            \"en\": \"Song-Su Shi-Chu\"\r\n        },\r\n        \"唐-杜佑-撰\": {\r\n            \"zh\": \"唐-杜佑-撰\",\r\n            \"en\": \"Tang-Du You-Writing\"\r\n        },\r\n        \"宋-樂史-撰\": {\r\n            \"zh\": \"宋-樂史-撰\",\r\n            \"en\": \"Song-Yue Shi-fiction\"\r\n        },\r\n        \"元-張清子-集注\": {\r\n            \"zh\": \"元-張清子-集注\",\r\n            \"en\": \"Yuan-Zhang Qingzi-Highlights\"\r\n        },\r\n        \"南宋-輔廣\": {\r\n            \"zh\": \"南宋-輔廣\",\r\n            \"en\": \"Southern Song Dynasty-Fu Guang\"\r\n        },\r\n        \"宋-嚴粲-撰\": {\r\n            \"zh\": \"宋-嚴粲-撰\",\r\n            \"en\": \"Song-Yan Can-written\"\r\n        },\r\n        \"晉-杜預-集解\": {\r\n            \"zh\": \"晉-杜預-集解\",\r\n            \"en\": \"Jin-Du Yu-set solution\"\r\n        },\r\n        \"宋-李公凱-撰\": {\r\n            \"zh\": \"宋-李公凱-撰\",\r\n            \"en\": \"Song-Li Gongkai-Written\"\r\n        },\r\n        \"元-李濂-撰\": {\r\n            \"zh\": \"元-李濂-撰\",\r\n            \"en\": \"Yuan-Li Lian-Yan\"\r\n        },\r\n        \"南宋-呂祖謙-纂\": {\r\n            \"zh\": \"南宋-呂祖謙-纂\",\r\n            \"en\": \"Southern Song Dynasty-Lv Zuqian-compiling\"\r\n        },\r\n        \"南宋-祝穆-撰\": {\r\n            \"zh\": \"南宋-祝穆-撰\",\r\n            \"en\": \"Southern Song Dynasty-Zhu Mu-Apocryphal\"\r\n        },\r\n        \"唐-杜甫-撰/宋-徐居仁-編次/宋-黃鶴-補注  \\n\": {\r\n            \"zh\": \"唐-杜甫-撰/宋-徐居仁-編次/宋-黃鶴-補注  \\n\",\r\n            \"en\": \"Tang-Du Fu-Written/Song-Xu Juren-edited/Song-Huang He-Supplementary note\"\r\n        },\r\n        \"南朝梁-蕭統-編撰/唐-李善-注/唐-五臣（呂延濟、劉良、張銑、呂向、李周瀚）-注\": {\r\n            \"zh\": \"南朝梁-蕭統-編撰/唐-李善-注/唐-五臣（呂延濟、劉良、張銑、呂向、李周瀚）-注\",\r\n            \"en\": \"Southern Liang-Xiao Tong-Compiled/Tang-Li Shan-Note/Tang-Wu Chen (Lu Yanji, Liu Liang, Zhang Mian, Lu Xiang, Li Zhouhan)-Note\"\r\n        },\r\n        \"唐-寒山\": {\r\n            \"zh\": \"唐-寒山\",\r\n            \"en\": \"Tang-Han Shan\"\r\n        },\r\n        \"元-譚景星-著/元-陳泗孔-編\": {\r\n            \"zh\": \"元-譚景星-著/元-陳泗孔-編\",\r\n            \"en\": \"Yuan-Tan Jingxing-Authored/Yuan-Chen Sikong-edited\"\r\n        },\r\n        \"南宋-釋居簡\": {\r\n            \"zh\": \"南宋-釋居簡\",\r\n            \"en\": \"Southern Song Dynasty-Shi Ju Jian\"\r\n        },\r\n        \"南宋-魏峴\": {\r\n            \"zh\": \"南宋-魏峴\",\r\n            \"en\": \"Southern Song Dynasty-Wei Xian\"\r\n        },\r\n        \"宋-王安石-撰\": {\r\n            \"zh\": \"宋-王安石-撰\",\r\n            \"en\": \"Song-Wang Anshi-Biography\"\r\n        },\r\n        \"宋-蘇洵 蘇軾 蘇轍-撰/宋-闕名-編\": {\r\n            \"zh\": \"宋-蘇洵 蘇軾 蘇轍-撰/宋-闕名-編\",\r\n            \"en\": \"Song-Su Xun/Su Shi/Su Zhe-compilation/Song-Que name-compilation\"\r\n        },\r\n        \"宋-寇宗奭-撰/[題]宋-劉信甫-校正\": {\r\n            \"zh\": \"宋-寇宗奭-撰/[題]宋-劉信甫-校正\",\r\n            \"en\": \"Song-Kou Zongshi-Written/[title] Song-Liu Xinfu-Correction\"\r\n        },\r\n        \"宋-釋悟明-撰\": {\r\n            \"zh\": \"宋-釋悟明-撰\",\r\n            \"en\": \"Song-Enlightenment-Ming-fiction\"\r\n        },\r\n        \"元-釋道泰 智境-編\": {\r\n            \"zh\": \"元-釋道泰 智境-編\",\r\n            \"en\": \"Yuan-Shi Tao Tai/Zhi Jing-Ed\"\r\n        },\r\n        \"北宋-宋祁-撰\": {\r\n            \"zh\": \"北宋-宋祁-撰\",\r\n            \"en\": \"Northern Song Dynasty-Song Qi-Apocryphal\"\r\n        },\r\n        \"北宋-陳師文等-校正\": {\r\n            \"zh\": \"北宋-陳師文等-校正\",\r\n            \"en\": \"Northern Song Dynasty-Chen Shiwen etc.-Correction\"\r\n        },\r\n        \"北宋-歐陽修-撰\": {\r\n            \"zh\": \"北宋-歐陽修-撰\",\r\n            \"en\": \"Northern Song Dynasty-Ouyang Xiu-Biography\"\r\n        },\r\n        \"元-倪士毅-撰\": {\r\n            \"zh\": \"元-倪士毅-撰\",\r\n            \"en\": \"Yuan-Ni Shiyi-written\"\r\n        },\r\n        \"元-汪克寬-撰\": {\r\n            \"zh\": \"元-汪克寬-撰\",\r\n            \"en\": \"Yuan-Wang Kekuan-written\"\r\n        },\r\n        \"南宋-王稱-著\": {\r\n            \"zh\": \"南宋-王稱-著\",\r\n            \"en\": \"Southern Song Dynasty-Wang Zheng-written\"\r\n        },\r\n        \"北宋-蘇軾-撰/南宋-王十朋-纂集/南宋-赵夔-注\": {\r\n            \"zh\": \"北宋-蘇軾-撰/南宋-王十朋-纂集/南宋-赵夔-注\",\r\n            \"en\": \"Northern Song Dynasty-Su Shi-compilation/Southern Song Dynasty-Wang Shipeng-Compilation/Southern Song Dynasty-Zhao Ku-Notes\"\r\n        },\r\n        \"南宋-楊萬里-著/南宋-楊長儒-編/南宋-羅茂良-校勘\": {\r\n            \"zh\": \"南宋-楊萬里-著/南宋-楊長儒-編/南宋-羅茂良-校勘\",\r\n            \"en\": \"The Southern Song Dynasty-Yang Wanli-Written/The Southern Song Dynasty-Yang Changru-edited/The Southern Song Dynasty-Luo Maoliang-collated\"\r\n        },\r\n        \"南宋-楊萬里-著\": {\r\n            \"zh\": \"南宋-楊萬里-著\",\r\n            \"en\": \"Southern Song Dynasty-Yang Wanli-written\"\r\n        },\r\n        \"南宋-崔敦诗-著\": {\r\n            \"zh\": \"南宋-崔敦诗-著\",\r\n            \"en\": \"Southern Song Dynasty-Cui Dun-written\"\r\n        },\r\n        \"金元之际-元好问-编\": {\r\n            \"zh\": \"金元之际-元好问-编\",\r\n            \"en\": \"Jin-Yuan time-Yuan Haowen-edit\"\r\n        },\r\n        \"宋-李昉-纂\": {\r\n            \"zh\": \"宋-李昉-纂\",\r\n            \"en\": \"Song-Li Fang-Zuo\"\r\n        },\r\n        \"宋-陳景沂-編輯/宋-祝穆-訂正\": {\r\n            \"zh\": \"宋-陳景沂-編輯/宋-祝穆-訂正\",\r\n            \"en\": \"Song-Chen Jingyi-Editor/Song-Zhu Mu-Revision\"\r\n        },\r\n        \"宋-楊萬里-撰述/宋-周公恕-編類\": {\r\n            \"zh\": \"宋-楊萬里-撰述/宋-周公恕-編類\",\r\n            \"en\": \"Song-Yang Wanli-Writing/Song-Zhou Gongshu-editing\"\r\n        },\r\n        \"宋-陳元靚-編\": {\r\n            \"zh\": \"宋-陳元靚-編\",\r\n            \"en\": \"Song-Chen Yuan-Liang-Eds\"\r\n        },\r\n        \"-\": {\r\n            \"zh\": \"-\",\r\n            \"en\": \"-\"\r\n        },\r\n        \"北宋-丁度-修定\": {\r\n            \"zh\": \"北宋-丁度-修定\",\r\n            \"en\": \"Northern Song Dynasty-Ding Du-Xiu Ding\"\r\n        },\r\n        \"隋-巢元方-編撰\": {\r\n            \"zh\": \"隋-巢元方-編撰\",\r\n            \"en\": \"Sui-Chao Yuanfang-Compiled\"\r\n        },\r\n        \"南宋-董楷-撰\": {\r\n            \"zh\": \"南宋-董楷-撰\",\r\n            \"en\": \"Southern Song Dynasty-Dong Kai-written\"\r\n        },\r\n        \"元-許謙-撰\": {\r\n            \"zh\": \"元-許謙-撰\",\r\n            \"en\": \"Yuan-Xu Qian-Yan-Zhuan\"\r\n        },\r\n        \"南宋-黃公紹-編撰; 元-熊忠-舉要\": {\r\n            \"zh\": \"南宋-黃公紹-編撰; 元-熊忠-舉要\",\r\n            \"en\": \"Southern Song Dynasty-Huang Gongshao-Compiled/Yuan-Xiong Zhong-Juyi\"\r\n        }\r\n    },\r\n    volume: {\r\n        \"10\": {\r\n            \"zh\": \"10\",\r\n            \"en\": \"10\"\r\n        },\r\n        \"60\": {\r\n            \"zh\": \"60\",\r\n            \"en\": \"60\"\r\n        },\r\n        \"80\": {\r\n            \"zh\": \"80\",\r\n            \"en\": \"80\"\r\n        },\r\n        \"16\": {\r\n            \"zh\": \"16\",\r\n            \"en\": \"16\"\r\n        },\r\n        \"1\": {\r\n            \"zh\": \"1\",\r\n            \"en\": \"1\"\r\n        },\r\n        \"11\": {\r\n            \"zh\": \"11\",\r\n            \"en\": \"11\"\r\n        },\r\n        \"6\": {\r\n            \"zh\": \"6\",\r\n            \"en\": \"6\"\r\n        },\r\n        \"20\": {\r\n            \"zh\": \"20\",\r\n            \"en\": \"20\"\r\n        },\r\n        \"9\": {\r\n            \"zh\": \"9\",\r\n            \"en\": \"9\"\r\n        },\r\n        \"21\": {\r\n            \"zh\": \"21\",\r\n            \"en\": \"21\"\r\n        },\r\n        \"3\": {\r\n            \"zh\": \"3\",\r\n            \"en\": \"3\"\r\n        },\r\n        \"5\": {\r\n            \"zh\": \"5\",\r\n            \"en\": \"5\"\r\n        },\r\n        \"70\": {\r\n            \"zh\": \"70\",\r\n            \"en\": \"70\"\r\n        },\r\n        \"25\": {\r\n            \"zh\": \"25\",\r\n            \"en\": \"25\"\r\n        },\r\n        \"130\": {\r\n            \"zh\": \"130\",\r\n            \"en\": \"130\"\r\n        },\r\n        \"30\": {\r\n            \"zh\": \"30\",\r\n            \"en\": \"30\"\r\n        },\r\n        \"50\": {\r\n            \"zh\": \"50\",\r\n            \"en\": \"50\"\r\n        },\r\n        \"200\": {\r\n            \"zh\": \"200\",\r\n            \"en\": \"200\"\r\n        },\r\n        \"36\": {\r\n            \"zh\": \"36\",\r\n            \"en\": \"36\"\r\n        },\r\n        \"2\": {\r\n            \"zh\": \"2\",\r\n            \"en\": \"2\"\r\n        },\r\n        \"24\": {\r\n            \"zh\": \"24\",\r\n            \"en\": \"24\"\r\n        },\r\n        \"273\": {\r\n            \"zh\": \"273\",\r\n            \"en\": \"273\"\r\n        },\r\n        \"不分卷\": {\r\n            \"zh\": \"不分卷\",\r\n            \"en\": \"Undivided volume\"\r\n        },\r\n        \"10（外集、語錄不分卷）\": {\r\n            \"zh\": \"10（外集、語錄不分卷）\",\r\n            \"en\": \"10 (external collection, quotations do not separate volumes)\"\r\n        },\r\n        \"100（存1-70）\": {\r\n            \"zh\": \"100（存1-70）\",\r\n            \"en\": \"100 (save 1-70)\"\r\n        },\r\n        \"100（目錄2卷）\": {\r\n            \"zh\": \"100（目錄2卷）\",\r\n            \"en\": \"100 (Directory Volume 2)\"\r\n        },\r\n        \"42(目錄1卷敘例5卷）\": {\r\n            \"zh\": \"42(目錄1卷敘例5卷）\",\r\n            \"en\": \"42(Directory 1 volume Description 5 volumes)\"\r\n        },\r\n        \"存18卷\": {\r\n            \"zh\": \"存18卷\",\r\n            \"en\": \"Save 18 volumes\"\r\n        },\r\n        \"10卷\": {\r\n            \"zh\": \"10卷\",\r\n            \"en\": \"10 volumes\"\r\n        },\r\n        \"全153卷存69卷\": {\r\n            \"zh\": \"全153卷存69卷\",\r\n            \"en\": \"All 153 volumes of 69 volumes\"\r\n        },\r\n        \"14卷+12卷\": {\r\n            \"zh\": \"14卷+12卷\",\r\n            \"en\": \"14 rolls +12 rolls\"\r\n        },\r\n        \"30卷\": {\r\n            \"zh\": \"30卷\",\r\n            \"en\": \"30 volumes\"\r\n        },\r\n        \"133\": {\r\n            \"zh\": \"133\",\r\n            \"en\": \"133\"\r\n        },\r\n        \"8\": {\r\n            \"zh\": \"8\",\r\n            \"en\": \"8\"\r\n        },\r\n        \"1000\": {\r\n            \"zh\": \"1000\",\r\n            \"en\": \"1000\"\r\n        },\r\n        \"原58(現存41)\": {\r\n            \"zh\": \"原58(現存41)\",\r\n            \"en\": \"Original 58(now 41)\"\r\n        },\r\n        \"原41(現存40）\": {\r\n            \"zh\": \"原41(現存40）\",\r\n            \"en\": \"Original 41(extant 40)\"\r\n        },\r\n        \" 10（卷一原缺）\": {\r\n            \"zh\": \" 10（卷一原缺）\",\r\n            \"en\": \"10 (Book I original missing)\"\r\n        },\r\n        \"50（卷四十至四十三原缺，以酌源堂藏本鈔補；卷三十七亦有兩葉為鈔補）\": {\r\n            \"zh\": \"50（卷四十至四十三原缺，以酌源堂藏本鈔補；卷三十七亦有兩葉為鈔補）\",\r\n            \"en\": \"50 (Volume 40 to 43 original missing, with the source of the library notes; Volume 37 also has two leaves for notes)\"\r\n        }\r\n    },\r\n    version: {\r\n        \"南宋蜀大字本\": {\r\n            \"zh\": \"南宋蜀大字本\",\r\n            \"en\": \"Shu characters of the Southern Song Dynasty\"\r\n        },\r\n        \"宋明州六家注本\": {\r\n            \"zh\": \"宋明州六家注本\",\r\n            \"en\": \"Song Mingzhou six annotated\"\r\n        },\r\n        \"南宋紹興府華嚴會小字印本（依紹興府廣教院舊本校勘，傳寫有闕略差訛處，依清涼國師疏文添入改正）\": {\r\n            \"zh\": \"南宋紹興府華嚴會小字印本（依紹興府廣教院舊本校勘，傳寫有闕略差訛處，依清涼國師疏文添入改正）\",\r\n            \"en\": \"Small print of Hua Yan Hui of Shaoxing Prefecture in Southern Song Dynasty (collated according to the old edition of Shaoxing Prefecture College of Education, there are errors in the biography, which are corrected according to the thin text of the cool National Master)\"\r\n        },\r\n        \"元代浙刻本？\": {\r\n            \"zh\": \"元代浙刻本？\",\r\n            \"en\": \"Yuan Dynasty Zhejiang engravings?\"\r\n        },\r\n        \"元天曆元年刻本\": {\r\n            \"zh\": \"元天曆元年刻本\",\r\n            \"en\": \"Yuan calendar first year engraved\"\r\n        },\r\n        \"北宋天聖、明道間小字刻本\": {\r\n            \"zh\": \"北宋天聖、明道間小字刻本\",\r\n            \"en\": \"The Northern Song Dynasty, between the small characters engraved\"\r\n        },\r\n        \"元刻本\": {\r\n            \"zh\": \"元刻本\",\r\n            \"en\": \"metascript\"\r\n        },\r\n        \"元余志安刻本\": {\r\n            \"zh\": \"元余志安刻本\",\r\n            \"en\": \"Yuan Yu Zhi 'an engraved copy\"\r\n        },\r\n        \"南宋孝宗淳熙十二年江南西路轉運司刻寧宗慶元元年重修本\": {\r\n            \"zh\": \"南宋孝宗淳熙十二年江南西路轉運司刻寧宗慶元元年重修本\",\r\n            \"en\": \"The Southern Song Dynasty Xiao Zong Chunxi twelve years south of the South Road transport Department Kerning Zong Qing Yuan first year revision\"\r\n        },\r\n        \"南宋翻刻北宋國子監刻單疏本\": {\r\n            \"zh\": \"南宋翻刻北宋國子監刻單疏本\",\r\n            \"en\": \"The Southern Song Dynasty copied the Northern Song Dynasty Guozijian engraved single thin book\"\r\n        },\r\n        \"南宋浙江南西路轉運司丘崈刊本\": {\r\n            \"zh\": \"南宋浙江南西路轉運司丘崈刊本\",\r\n            \"en\": \"The southern song dynasty in zhejiang province south road transport department 丘崈 versions\"\r\n        },\r\n        \"南宋淳熙年間刻本\": {\r\n            \"zh\": \"南宋淳熙年間刻本\",\r\n            \"en\": \"Engraved in Chunxi period of Southern Song Dynasty\"\r\n        },\r\n        \"南宋刻本\": {\r\n            \"zh\": \"南宋刻本\",\r\n            \"en\": \"The Southern Song Dynasty\"\r\n        },\r\n        \"德新堂刊本\": {\r\n            \"zh\": \"德新堂刊本\",\r\n            \"en\": \"De Xin Tang edition\"\r\n        },\r\n        \"元至正二年刊明成化九年修本\": {\r\n            \"zh\": \"元至正二年刊明成化九年修本\",\r\n            \"en\": \"Yuan to Zheng two years of Ming Chenghua nine years of revision\"\r\n        },\r\n        \"南宋刊本\": {\r\n            \"zh\": \"南宋刊本\",\r\n            \"en\": \"The Southern Song Dynasty edition\"\r\n        },\r\n        \"北宋刻本\": {\r\n            \"zh\": \"北宋刻本\",\r\n            \"en\": \"The Northern Song Dynasty\"\r\n        },\r\n        \"宋孝宗乾道間洪适於紹興府任上精加校刻善本\": {\r\n            \"zh\": \"宋孝宗乾道間洪适於紹興府任上精加校刻善本\",\r\n            \"en\": \"Song Xiaozong Qiandao Hongshi in Shaoxing House on the fine school engraved rare\"\r\n        },\r\n        \"元至元二十五年彭寅翁崇道精舍刻本\": {\r\n            \"zh\": \"元至元二十五年彭寅翁崇道精舍刻本\",\r\n            \"en\": \"Yuan to yuan 25 years Peng Yin Weng Chong Road Jingshe engraving\"\r\n        },\r\n        \"南宋東陽崇川余四十三郎宅刊本\": {\r\n            \"zh\": \"南宋東陽崇川余四十三郎宅刊本\",\r\n            \"en\": \"The Southern Song Dynasty Dongyang Chongchuan Yu forty Sanlang house edition\"\r\n        },\r\n        \"元毋逢辰刊本\": {\r\n            \"zh\": \"元毋逢辰刊本\",\r\n            \"en\": \"This is a rare edition\"\r\n        },\r\n        \"北宋刊本\": {\r\n            \"zh\": \"北宋刊本\",\r\n            \"en\": \"Published in the Northern Song Dynasty\"\r\n        },\r\n        \"元刻元印本\": {\r\n            \"zh\": \"元刻元印本\",\r\n            \"en\": \"Yuan engraving yuan printing\"\r\n        },\r\n        \"元余志安勤有堂刊本\": {\r\n            \"zh\": \"元余志安勤有堂刊本\",\r\n            \"en\": \"Yuzhi Anqin Yutang edition\"\r\n        },\r\n        \"南宋興國軍學刊本\": {\r\n            \"zh\": \"南宋興國軍學刊本\",\r\n            \"en\": \"The Southern Song Dynasty Xingguo Military Science edition\"\r\n        },\r\n        \"南宋末建安刊本\": {\r\n            \"zh\": \"南宋末建安刊本\",\r\n            \"en\": \"Jian 'an edition of the late Southern Song Dynasty\"\r\n        },\r\n        \"元代建刊本\": {\r\n            \"zh\": \"元代建刊本\",\r\n            \"en\": \"The Yuan Dynasty built the edition\"\r\n        },\r\n        \"元代麻沙本（劉氏靜得堂本）\": {\r\n            \"zh\": \"元代麻沙本（劉氏靜得堂本）\",\r\n            \"en\": \"Yuan Dynasty Ma Sha Ben (Liu Jingde Tang Ben)\"\r\n        },\r\n        \"南宋理宗朝建陽坊刻祝穆原本\": {\r\n            \"zh\": \"南宋理宗朝建陽坊刻祝穆原本\",\r\n            \"en\": \"Southern Song Dynasty Lizong Jianyang Square carved Zhu Mu originally\"\r\n        },\r\n        \"元至正八年潘屏山圭山書院刻本\": {\r\n            \"zh\": \"元至正八年潘屏山圭山書院刻本\",\r\n            \"en\": \"Yuan Zhi Zheng eight years Pan Pingshan Guishan Academy engraving\"\r\n        },\r\n        \"宋元遞修贛州州學六臣注本\": {\r\n            \"zh\": \"宋元遞修贛州州學六臣注本\",\r\n            \"en\": \"In the Song and Yuan Dynasties, six ministers of Ganzhou study were prepared\"\r\n        },\r\n        \"南宋無我慧身本\": {\r\n            \"zh\": \"南宋無我慧身本\",\r\n            \"en\": \"The Southern Song Dynasty had no self wisdom\"\r\n        },\r\n        \"元延祐刊本\": {\r\n            \"zh\": \"元延祐刊本\",\r\n            \"en\": \"Motoon-yeonuke edition\"\r\n        },\r\n        \"室町覆宋版（1-4）南宋宋刊本（5-10、語錄）淳祐宋刊本（外集）\": {\r\n            \"zh\": \"室町覆宋版（1-4）南宋宋刊本（5-10、語錄）淳祐宋刊本（外集）\",\r\n            \"en\": \"Muromachi Nanyang Song Edition (1-4) Southern Song Edition (5-10, Quotations) Junyou Song Edition (Outer collection)\"\r\n        },\r\n        \"南宋寶慶刻本\": {\r\n            \"zh\": \"南宋寶慶刻本\",\r\n            \"en\": \"Southern Song Dynasty Baoqing engraving\"\r\n        },\r\n        \"南宋高宗紹興年間龍舒郡齋刻本\": {\r\n            \"zh\": \"南宋高宗紹興年間龍舒郡齋刻本\",\r\n            \"en\": \"An engraving of Longshu County Zhai in the Shaoxing Period of Emperor Gaozong of the Southern Song Dynasty\"\r\n        },\r\n        \"南宋紹興刻本\": {\r\n            \"zh\": \"南宋紹興刻本\",\r\n            \"en\": \"Shaoxing Engraving of the Southern Song Dynasty\"\r\n        },\r\n        \"南宋建安余彥國勵賢堂刻本\": {\r\n            \"zh\": \"南宋建安余彥國勵賢堂刻本\",\r\n            \"en\": \"Jian 'an Yuyan Guo Lixian Hall Engraving of the Southern Song Dynasty\"\r\n        },\r\n        \"元世祖至元年間重刻本\": {\r\n            \"zh\": \"元世祖至元年間重刻本\",\r\n            \"en\": \"Yuan Shizu to Yuan Dynasty reprint\"\r\n        },\r\n        \"元大德十一年初刻本\": {\r\n            \"zh\": \"元大德十一年初刻本\",\r\n            \"en\": \"The original was engraved at the beginning of the eleventh day of the Yuan Dynasty\"\r\n        },\r\n        \"元廬陵古林書堂刊本\": {\r\n            \"zh\": \"元廬陵古林書堂刊本\",\r\n            \"en\": \"Yuan Luling Gulin Book Hall edition\"\r\n        },\r\n        \"南宋慶元周必大本\": {\r\n            \"zh\": \"南宋慶元周必大本\",\r\n            \"en\": \"The Southern Song Dynasty, Qing Yuan Dynasty, Zhou must have a large book\"\r\n        },\r\n        \"元至正二年建安劉叔簡日新書堂刊本\": {\r\n            \"zh\": \"元至正二年建安劉叔簡日新書堂刊本\",\r\n            \"en\": \"Yuan to Zheng two years Jian 'an Liu Shujian New book hall\"\r\n        },\r\n        \"元至正八年建安劉叔簡日新堂刊本\": {\r\n            \"zh\": \"元至正八年建安劉叔簡日新堂刊本\",\r\n            \"en\": \"Yuan Zhizheng eight years Jian 'an Liu Shujian Nissin Tang edition\"\r\n        },\r\n        \"南宋眉山程舍人宅刻本\": {\r\n            \"zh\": \"南宋眉山程舍人宅刻本\",\r\n            \"en\": \"Southern Song Dynasty Meishan Cheng house carved\"\r\n        },\r\n        \"南宋建安魏忠卿家塾刻本\": {\r\n            \"zh\": \"南宋建安魏忠卿家塾刻本\",\r\n            \"en\": \"An engraved copy of Wei Zhongqing Family School in Jian 'an of Southern Song Dynasty\"\r\n        },\r\n        \"南宋端平本\": {\r\n            \"zh\": \"南宋端平本\",\r\n            \"en\": \"The Southern Song Dynasty\"\r\n        },\r\n        \"南宋肇慶軍府刊本\": {\r\n            \"zh\": \"南宋肇慶軍府刊本\",\r\n            \"en\": \"The Southern Song Dynasty Zhaoqing Junfu edition\"\r\n        },\r\n        \"南宋浙中刻本\": {\r\n            \"zh\": \"南宋浙中刻本\",\r\n            \"en\": \"The Central Zhejiang Engraving of the Southern Song Dynasty\"\r\n        },\r\n        \"元乙卯新刊本\": {\r\n            \"zh\": \"元乙卯新刊本\",\r\n            \"en\": \"Yuan Yimao new edition\"\r\n        },\r\n        \"南宋慶元六年成都府學蒲叔獻刊本(鐮倉、天正文祿間補鈔）\": {\r\n            \"zh\": \"南宋慶元六年成都府學蒲叔獻刊本(鐮倉、天正文祿間補鈔）\",\r\n            \"en\": \"In the sixth year of the Qing and Yuan Dynasties of the Southern Song Dynasty, Chengdu Fuxue Pu Shuxian (Kamakura, Tianzhengwen Lu Jian supplement banknotes)\"\r\n        },\r\n        \"南宋刻、元末明初刊、江戶補鈔本\": {\r\n            \"zh\": \"南宋刻、元末明初刊、江戶補鈔本\",\r\n            \"en\": \"The Southern Song Dynasty, the end of the Ming Dynasty, Edo banknote book\"\r\n        },\r\n        \"元順帝至元六年鄭氏積誠堂刊本\": {\r\n            \"zh\": \"元順帝至元六年鄭氏積誠堂刊本\",\r\n            \"en\": \"Yuan-shun Emperor to Yuan-Yuan sixth year published by Zheng Ji Cheng Tang\"\r\n        },\r\n        \"南宋金州軍本\": {\r\n            \"zh\": \"南宋金州軍本\",\r\n            \"en\": \"Jinzhou Army of the Southern Song Dynasty\"\r\n        },\r\n        \"懷仙閣本\": {\r\n            \"zh\": \"懷仙閣本\",\r\n            \"en\": \"Huai Xianji Ben\"\r\n        },\r\n        \"翠巖精舍本\": {\r\n            \"zh\": \"翠巖精舍本\",\r\n            \"en\": \"Cuiyan Jing House this\"\r\n        },\r\n        \"宗文精舍覆刻本\": {\r\n            \"zh\": \"宗文精舍覆刻本\",\r\n            \"en\": \"Zongwen Jingshe engraved copies\"\r\n        }\r\n    },\r\n    location_name: {\r\n        \"蜀\": {\r\n            \"zh\": \"蜀\",\r\n            \"en\": \"shu\"\r\n        },\r\n        \"明州\": {\r\n            \"zh\": \"明州\",\r\n            \"en\": \"Minnesota\"\r\n        },\r\n        \"紹興府\": {\r\n            \"zh\": \"紹興府\",\r\n            \"en\": \"Shaoxing prefecture\"\r\n        },\r\n        \"浙江\": {\r\n            \"zh\": \"浙江\",\r\n            \"en\": \"Zhejiang\"\r\n        },\r\n        \"-\": {\r\n            \"zh\": \"-\",\r\n            \"en\": \"-\"\r\n        },\r\n        \"江南西路轉運司\": {\r\n            \"zh\": \"江南西路轉運司\",\r\n            \"en\": \"Jiangnan West Road transport Department\"\r\n        },\r\n        \"江南州\": {\r\n            \"zh\": \"江南州\",\r\n            \"en\": \"Jiangnan Prefecture\"\r\n        },\r\n        \"當塗郡\": {\r\n            \"zh\": \"當塗郡\",\r\n            \"en\": \"Dangtu county\"\r\n        },\r\n        \"南宋\": {\r\n            \"zh\": \"南宋\",\r\n            \"en\": \"Southern Song Dynasty\"\r\n        },\r\n        \"建安德新堂\": {\r\n            \"zh\": \"建安德新堂\",\r\n            \"en\": \"Build a new hall\"\r\n        },\r\n        \"西湖書院\": {\r\n            \"zh\": \"西湖書院\",\r\n            \"en\": \"West Lake Academy\"\r\n        },\r\n        \"臨安\": {\r\n            \"zh\": \"臨安\",\r\n            \"en\": \"Lin 'an\"\r\n        },\r\n        \"吉州安福\": {\r\n            \"zh\": \"吉州安福\",\r\n            \"en\": \"Keju Anfu\"\r\n        },\r\n        \"東陽\": {\r\n            \"zh\": \"東陽\",\r\n            \"en\": \"Dongyang\"\r\n        },\r\n        \"建陽考亭\": {\r\n            \"zh\": \"建陽考亭\",\r\n            \"en\": \"Jianyang Kaoting\"\r\n        },\r\n        \"江西\": {\r\n            \"zh\": \"江西\",\r\n            \"en\": \"Jiangxi\"\r\n        },\r\n        \"建安\": {\r\n            \"zh\": \"建安\",\r\n            \"en\": \"Jian 'an\"\r\n        },\r\n        \"興國\": {\r\n            \"zh\": \"興國\",\r\n            \"en\": \"Rejuvenate the country\"\r\n        },\r\n        \"建\": {\r\n            \"zh\": \"建\",\r\n            \"en\": \"build\"\r\n        },\r\n        \"圭山書院\": {\r\n            \"zh\": \"圭山書院\",\r\n            \"en\": \"Keisan Seowon\"\r\n        },\r\n        \"贛州\": {\r\n            \"zh\": \"贛州\",\r\n            \"en\": \"Ganzhou\"\r\n        },\r\n        \"湖廣\": {\r\n            \"zh\": \"湖廣\",\r\n            \"en\": \"Huguang\"\r\n        },\r\n        \"龍舒\": {\r\n            \"zh\": \"龍舒\",\r\n            \"en\": \"Long Shu\"\r\n        },\r\n        \"松江澱山\": {\r\n            \"zh\": \"松江澱山\",\r\n            \"en\": \"Songjiang Lake Mountain\"\r\n        },\r\n        \"揚州\": {\r\n            \"zh\": \"揚州\",\r\n            \"en\": \"Yangzhou\"\r\n        },\r\n        \"廬陵\": {\r\n            \"zh\": \"廬陵\",\r\n            \"en\": \"Luling\"\r\n        },\r\n        \"建陽\": {\r\n            \"zh\": \"建陽\",\r\n            \"en\": \"Jianyang\"\r\n        },\r\n        \"肇慶\": {\r\n            \"zh\": \"肇慶\",\r\n            \"en\": \"Zhaoqing\"\r\n        },\r\n        \"成都府學\": {\r\n            \"zh\": \"成都府學\",\r\n            \"en\": \"Chengdu Fuxue\"\r\n        },\r\n        \"金州\": {\r\n            \"zh\": \"金州\",\r\n            \"en\": \"Golden State\"\r\n        },\r\n        \"福建建陽\": {\r\n            \"zh\": \"福建建陽\",\r\n            \"en\": \"Jianyang, Fujian Province\"\r\n        },\r\n        \"福建\": {\r\n            \"zh\": \"福建\",\r\n            \"en\": \"Fujian Province\"\r\n        }\r\n    }\r\n}\r\n\r\nexport const table_title = {\r\n    geoMapTitle: {\r\n        流传详情: {\r\n            \"zh\": \"流传详情\",\r\n            \"en\": \"Circulation Details\"\r\n        },\r\n        书名: {\r\n            \"zh\": \"书名\",\r\n            \"en\": \"Book Name\"\r\n        },\r\n        版本: {\r\n            \"zh\": \"版本\",\r\n            \"en\": \"Version\"\r\n        },\r\n        责任者: {\r\n            \"zh\": \"责任者\",\r\n            \"en\": \"Author\"\r\n        },\r\n        刊刻地: {\r\n            \"zh\": \"刊刻地\",\r\n            \"en\": \"Engraving Place\"\r\n        },\r\n        刊刻时间: {\r\n            \"zh\": \"刊刻时间\",\r\n            \"en\": \"Engraving Time\"\r\n        },\r\n        总卷数: {\r\n            \"zh\": \"总卷数\",\r\n            \"en\": \"Volume\"\r\n        },\r\n        书籍类型: {\r\n            \"zh\": \"书籍类型\",\r\n            \"en\": \"Book type\"\r\n        },\r\n        來源: {\r\n            \"zh\": \"來源\",\r\n            \"en\": \"Source\"\r\n        },\r\n        经手人: {\r\n            \"zh\": \"经手人\",\r\n            \"en\": \"Handler\"\r\n        },\r\n        经手人身份: {\r\n            \"zh\": \"经手人身份\",\r\n            \"en\": \"Handler Type\"\r\n        },\r\n        经手方式: {\r\n            \"zh\": \"经手方式\",\r\n            \"en\": \"Handling Method\"\r\n        },\r\n        数据来源: {\r\n            \"zh\": \"数据来源\",\r\n            \"en\": \"Data source\"\r\n        },\r\n    },\r\n    書名: {\r\n        \"zh\": \"書名\",\r\n        \"en\": \"Book Name\"\r\n    },\r\n    收藏地: {\r\n        \"zh\": \"收藏地\",\r\n        \"en\": \"Collecting Place\"\r\n    },\r\n    '收藏者/經手者': {\r\n        \"zh\": \"收藏者/經手者\",\r\n        \"en\": \"Collector\"\r\n    },\r\n    經手方式: {\r\n        \"zh\": \"經手方式\",\r\n        \"en\": \"Handling Method\"\r\n    },\r\n    地點: {\r\n        \"zh\": \"地點\",\r\n        \"en\": \"Location\"\r\n    },\r\n    時間: {\r\n        \"zh\": \"時間\",\r\n        \"en\": \"Time\"\r\n    },\r\n    次序: {\r\n        \"zh\": \"次序\",\r\n        \"en\": \"Sequence\"\r\n    },\r\n    來源: {\r\n        \"zh\": \"來源\",\r\n        \"en\": \"Source\"\r\n    },\r\n    責任者: {\r\n        \"zh\": \"責任者\",\r\n        \"en\": \"Author\"\r\n    },\r\n    卷數: {\r\n        \"zh\": \"卷數\",\r\n        \"en\": \"Volume\"\r\n    },\r\n    版本: {\r\n        \"zh\": \"版本\",\r\n        \"en\": \"Version\"\r\n    },\r\n    時代: {\r\n        \"zh\": \"時代\",\r\n        \"en\": \"Time Period\"\r\n    },\r\n    刊刻地: {\r\n        \"zh\": \"刊刻地\",\r\n        \"en\": \"Engraving Place\"\r\n    },\r\n    刊刻时间: {\r\n        \"zh\": \"刊刻时间\",\r\n        \"en\": \"Engraving Time\"\r\n    }\r\n}","export let library = {\r\n    皇家: \"#d0494b\",\r\n    公家: \"#a34e49\",\r\n    大學: \"#cc9999\",\r\n    寺廟: \"#e2c027\",\r\n    私人: \"#dfbe96\",\r\n    不详: \"#cfccc9\",\r\n    其他: \"#cfccc9\",\r\n\r\n    dark: {\r\n        皇家: \"#A3393A\",\r\n        公家: \"#783542\",\r\n        大學: \"#A87E7E\",\r\n        寺廟: \"#B89C20\",\r\n        私人: \"#B09676\",\r\n        不详: \"#9C9997\",\r\n        其他: \"#9C9997\",\r\n    },\r\n\r\n    middle: {\r\n        皇家: \"#d0494b\",\r\n        公家: \"#a34e49\",\r\n        大學: \"#cc9999\",\r\n        寺廟: \"#e2c027\",\r\n        私人: \"#dfbe96\",\r\n        不详: \"#cfccc9\",\r\n        其他: \"#cfccc9\",\r\n    },\r\n\r\n    bright_mid: {\r\n        皇家: \"#f75659\",\r\n        公家: \"#db6962\",\r\n        大學: \"#f5b8b8\",\r\n        寺廟: \"#fad42b\",\r\n        私人: \"#fad5a8\",\r\n        不详: \"#f0ece9\",\r\n        其他: \"#f0ece9\",\r\n    },\r\n\r\n    bright: {\r\n        皇家: \"#F04D4E\",\r\n        公家: \"#FF7189\",\r\n        大學: \"#FFBFBF\",\r\n        寺廟: \"#FFD82C\",\r\n        私人: \"#FFD9AB\",\r\n        不详: \"#E8E4E1\",\r\n        其他: \"#E8E4E1\",\r\n    },\r\n};\r\n\r\nexport let agent = {\r\n    皇室: \"#d0494b\",\r\n    官員: \"#a34e49\",\r\n    學者: \"#cc9999\",\r\n    僧侶: \"#e2c027\",\r\n    商人: \"#dfbe96\",\r\n    不详: \"#cfccc9\",\r\n    // 皇室: \"#9c3738\",\r\n    // 官員: \"#7d3c38\",\r\n    // 學者: \"#8f6b6b\",\r\n    // 僧侶: \"#a88f1d\",\r\n    // 商人: \"#9e8869\",\r\n    // 不详: \"#949290\",\r\n    bright: {\r\n        皇室: \"#F04D4E\",\r\n        官員: \"#FF7189\",\r\n        學者: \"#FFBFBF\",\r\n        僧侶: \"#FFD82C\",\r\n        商人: \"#FFD9AB\",\r\n        不详: \"#E8E4E1\",\r\n    },\r\n};\r\n\r\nexport let text_color_dark = \"#553624\";\r\nexport let book_color_dark = \"#6a4c2a\";\r\nexport let book_color_middle = \"#92693a\";\r\nexport let book_color_light = \"#ad9278\";\r\nexport let book_color_lighter = \"#d8ccc0\";\r\nexport let book_color_lightest = \"#efebe6\";\r\n\r\nexport let edge_color = \"#ae8e71\";\r\n\r\n// 印章可视化\r\nexport let color_list = {\r\n    \"项元汴\": \"#A56752\",\r\n    \"董其昌\": \"#85A552\",\r\n    \"爱新觉罗·永琰\": \"#52A5A5\",\r\n    \"纳兰性德\": \"#A59852\",\r\n    \"--\": \"#AAAAAA\",\r\n    \"陆质雅\": \"#5282A5\",\r\n    \"爱新觉罗·弘历\": \"#A55266\",\r\n    \"项铨\": \"#525FA5\",\r\n    \"曹溶\": \"#36852A\",\r\n    \"梁清标\": \"#A55293\",\r\n    \"文彭\": \"#43AE29\",\r\n    \"张应甲\": \"#54D8E1\",\r\n    \"郑板桥\": \"#E1548F\",\r\n    \"爱新觉罗·溥仪\": \"#937E10\",\r\n    \"张南阳\": \"#286C53\"\r\n}\r\n","const $ = require(\"jquery\");\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nexport function getCollectorColor(data) { // copied from timeline.vue\r\n    for (let i in data['collectors']) {\r\n        data['collectors'][i]['collector_color'] = TypeColor.color_list[data['collectors'][i]['collector_name']]\r\n        for (let j in data['collectors'][i]['seals']) {\r\n            data['collectors'][i]['seals'][j]['collector_color'] = TypeColor.color_list[data['collectors'][i]['collector_name']]\r\n        }\r\n    }\r\n    return data\r\n}\r\n\r\nexport function getPaintingNameEn(painting_name) {\r\n    if (painting_name === '鹊华秋色图卷') {\r\n        return 'que_hua_qiu_se_tu_juan'\r\n    }\r\n}","import { render } from \"./TimeAxis.vue?vue&type=template&id=7c809e74&scoped=true\"\nimport script from \"./TimeAxis.vue?vue&type=script&lang=js\"\nexport * from \"./TimeAxis.vue?vue&type=script&lang=js\"\n\nimport \"./TimeAxis.vue?vue&type=style&index=0&id=7c809e74&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c809e74\"]])\n\nexport default __exports__","<template>\r\n    <el-dialog v-model=\"fullImageModel.show\" :title=\"fullImageModel.label\" top=\"5vh\" width=\"80%\">\r\n        <div style=\"height: 75vh; width: 70%;\">\r\n            <img :src=\"fullImageModel.src\" style=\"width: 100%; height: 100%; object-fit: contain;\">\r\n        </div>\r\n    </el-dialog>\r\n    <div class=\"seal-card-container\" id=\"seal-card-container\">\r\n        <div v-for=\"(item, index) in cardList\" :key=\"index\" class=\"seal-card\"\r\n            v-if=\"sealContainerShow\"\r\n            :style=\"{left: (containerParam.x + containerParam.card_width * (index + 0.05) * 12.4 / 10 - containerParam.unit_pixel * 2) + 'px',\r\n                     top: '2%', height: containerParam.card_height * 1.1 + 'px', width: (containerParam.card_width * (0.9 + 0.1) + containerParam.unit_pixel * 4) + 'px'}\">\r\n            <div class=\"seal-index-rect\"\r\n                :style=\"{paddingLeft: containerParam.unit_pixel * 2 + 'px', paddingRight: containerParam.unit_pixel * 2 + 'px', height: containerParam.unit_pixel * 18 + 'px', fontSize: containerParam.unit_pixel * 16 + 'px'}\">{{ item['index'] }}</div>\r\n            <div class=\"card-rect\"\r\n                :id=\"'seal-card-' + item['seal_name'] + '-' + item['index']\"\r\n                :style=\"{top: containerParam.card_height * 0.05 + 'px', height: containerParam.card_height + 'px', left: containerParam.unit_pixel * 0 + 'px', width: containerParam.card_width * 0.9 + 'px'}\">\r\n                <div class=\"seal-name\" \r\n                    :style=\"{fontSize: item.seal_name.length <= 6 ? containerParam.card_width * 0.9 / 6.5 + 'px' : containerParam.card_width * 0.9 / (item.seal_name.length + 0.5) + 'px',\r\n                            top: containerParam.unit_pixel * 15 + 'px'}\">\r\n                        {{ item['seal_name'] }}\r\n                </div>\r\n                <div class=\"pic-row\" :style=\"{top: containerParam.unit_pixel * (45 - 2) + 'px', height: containerParam.unit_pixel * (60 + 4) + 'px', left: '2.5%', width: '95%'}\">\r\n                    <!-- <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\">\r\n                        <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M13.877 2L6.78967 9.76364L13.877 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                            <path d=\"M8.96387 2L1.87658 9.76364L8.96387 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"seal-pic\"\r\n                        :style=\"{height: containerParam.unit_pixel * 60 + 'px', width: containerParam.unit_pixel * 60 + 'px'}\">\r\n                        <img :src=\"item.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0.1em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                            @click=\"fullImageModel.show =true, fullImageModel.src=item.image_href, fullImageModel.label = item.seal_name\">\r\n                    </div>\r\n                    <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\">\r\n                        <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M2 2L9.08728 9.76364L2 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                            <path d=\"M6.91309 2L14.0004 9.76364L6.91309 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </div> -->\r\n                    <div class=\"seal-pic\"\r\n                        :style=\"{height: containerParam.unit_pixel * 75 + 'px', width: containerParam.unit_pixel * 75 + 'px'}\">\r\n                        <img :src=\"item.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                            @click=\"fullImageModel.show =true, fullImageModel.src=item.image_href, fullImageModel.label = item.seal_name\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"seal-page\"\r\n                    :style=\"{top: containerParam.unit_pixel * (105 + 2) + 'px', height: containerParam.unit_pixel * (120 - 107 - 5) + 'px'}\">\r\n\r\n                </div>\r\n                <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 120 + 'px', left: '2.5%', width: '95%'}\">\r\n                    <div class=\"agent-time-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                        <div class=\"agent-icon\">\r\n                            <svg width=\"11\" height=\"14\" viewBox=\"0 0 11 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path d=\"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z\" stroke=\"#8F7B6C\" stroke-linejoin=\"round\"/>\r\n                            </svg>\r\n                        </div>\r\n                        <div class=\"agent-name\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ item['collector_name'] }}</div>\r\n                    </div>\r\n                    <div class=\"life-span\" :style=\"{fontSize: containerParam.unit_pixel * 11 + 'px'}\">{{ item['life_span'][0].toString() + '-' + item['life_span'][1].toString() }}</div>\r\n                </div>\r\n                <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 135 + 'px', left: '2.5%', width: '95%'}\">\r\n                    <div class=\"agent-time-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                        <div class=\"time-icon\">\r\n                            <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <path d=\"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z\" fill=\"#8F7B6C\"/>\r\n                            </svg>\r\n                        </div>\r\n                        <div class=\"time-span\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ item['stamped_year'][0].toString() + '-' + item['stamped_year'][1].toString() }}</div>\r\n                    </div>\r\n                </div>\r\n                <!-- <div class=\"seal-icon-group\" \r\n                :style=\"{top: containerParam.unit_pixel * 135 + 'px', height: containerParam.unit_pixel * 30 + 'px'}\">\r\n                    <svg :id=\"'seal-icon-group-' + item['index']\"></svg>\r\n                </div> -->\r\n            </div>\r\n            <div class=\"seal-pic-icon-container\" :style=\"{top: containerParam.card_height * 0.05 + 'px', left: (containerParam.card_width * 0.9 + containerParam.unit_pixel * 2) + 'px', width: containerParam.card_width * 0.1 + 'px', height: containerParam.card_height + 'px'}\">\r\n                <svg class=\"seal-pic-icon-svg\" :id=\"'seal-pic-icon-svg-' + item['index']\"></svg>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class=\"seal-circle-container\" id=\"seal-circle-container\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as RenderLinkFunc from \"@/utils/timeline/render_link_func\";\r\nimport * as HandleTimelineData from \"@/utils/timeline/handle_timeline_data\";\r\nimport * as TimelineInteractionFunc from \"@/utils/timeline/interaction_func\"\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\nconst time_duration = 1000,\r\n      timeout_duration = 100,\r\n      seal_card_num = 10\r\n\r\n\r\nexport default {\r\n    name: \"SealCard\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            timeScale: null,\r\n            cardList: [],\r\n            containerParam: { // 当前绘制窗口的宽度(seal container)\r\n                x: 0,\r\n                width: 0,\r\n                card_width: 0, // includes the gap between seal cards\r\n                card_height: 0, // card height\r\n                unit_pixel: 0, // 单位大小\r\n                sealIconSize: 1, // seal icon的大小\r\n            },\r\n            sealContainerShow: false,\r\n            fullImageModel: {\r\n                show: false,\r\n                src: null,\r\n                label: null\r\n            },\r\n        };\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\", \"data\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\", \"hover\"]),\r\n       \r\n    },\r\n    watch: {\r\n        cur_view: function(newVal, oldVal) {\r\n            const self = this\r\n            if (newVal === 'timeline' && newVal !== oldVal) {\r\n                // console.log(self.selection)\r\n                self.renderSealCard()\r\n                self.detectInteraction()\r\n            }\r\n        },\r\n        selection: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal !== oldVal) {\r\n                    console.log('selection', newVal)\r\n                    if (newVal.entity !== null) {\r\n                        // function合并了click和hover的操作\r\n                    } else { // unclicked\r\n                        TimelineInteractionFunc.HoverNull(newVal)\r\n                    }\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        hover: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal !== oldVal) { // seal_pic info card的响应操作\r\n                    if (newVal.entity === null) {\r\n                        TimelineInteractionFunc.HoverNull(self.selection)\r\n                    } else {\r\n                        if (newVal.entity === 'seal_name') { // seal_name level\r\n                            TimelineInteractionFunc.HoverSealName(newVal.value, false)\r\n                        }\r\n                    }\r\n                    \r\n                } else {\r\n                    // continue\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { },\r\n        getTimeScale() { // 与timeAxis的比例尺对齐\r\n            const self = this\r\n            let yearStart = 1450, // 1295\r\n                yearEnd = 1965,\r\n                sWidth = $(\".main-panel\").width() * 0.99 // $(\".time-axis\").width()\r\n            let containerRange = [0.08 * sWidth, sWidth * (1 - margin.left - margin.right)]\r\n            self.timeScale = d3.scaleLinear()\r\n                                .domain([yearStart, yearEnd])\r\n                                .range(containerRange)\r\n        },\r\n        renderSealCard() {\r\n            const self = this\r\n            setTimeout(() => {\r\n                self.containerParam = SealCardFunc.getSealCardContainerSize() // {x: , width: }\r\n\r\n                self.containerParam['card_width'] = self.containerParam['width'] / (seal_card_num + 2) // 多留一些空隙\r\n                self.containerParam['card_height'] = self.containerParam['card_width'] * 0.9 * 175 / 120\r\n                self.containerParam['unit_pixel'] = self.containerParam['card_height'] / 175\r\n\r\n                SealCardFunc.draw_seal_rect(self.data, self.containerParam['unit_pixel'] * 12) // 绘制seal circle, rem\r\n                self.cardList = SealCardFunc.SealCardMapping(self.data) // mapped seal pictures into list (In this step all seal pictures are included.)\r\n                // self.cardList = HandleTimelineData.getCardListSubset(self.cardList, self.selection) // 可以暂时丢弃掉，显示全部seal_pic_card\r\n                self.sealContainerShow = true\r\n\r\n                setTimeout(() => { // 渲染seal-icon-group，以及seal card右边的seal pic circle\r\n                    SealCardFunc.renderSealPicIcon(self.cardList, self.containerParam['unit_pixel'])\r\n                    self.containerParam['sealIconSize'] = $('.seal-icon-group').height() / 3\r\n                    SealCardFunc.renderSealIconGroup(self.cardList, self.containerParam['sealIconSize'])\r\n\r\n                    self.renderLink() // 渲染card2circle link\r\n                }, timeout_duration)\r\n            }, timeout_duration)\r\n        },\r\n        renderLink() {\r\n            const self = this\r\n            d3.select('.link-container').selectAll('svg').remove()\r\n            d3.select('.link-container')\r\n                .append('svg')\r\n                .attr('width', $('.link-container').width())\r\n                .attr('height', $('.link-container').height())\r\n                .attr('id', 'card2circle-link-svg')\r\n            RenderLinkFunc.card2circleLink(self.cardList, self.containerParam['unit_pixel'])\r\n        },\r\n        detectInteraction() {\r\n            const self = this\r\n            setTimeout(() => {\r\n                // for seal rect above timeAxis\r\n                let seal_rect_svg = document.querySelector(\".seal-circle-svg\")\r\n                // hover\r\n                seal_rect_svg.addEventListener(\"mouseover\", function(event) {\r\n                    // 检查点击事件的目标元素是否包含指定的 class\r\n                    // console.log(\"运行到这一步啦\", event.target.classList)\r\n                    if (event.target.classList.contains(\"seal-single-rect\")) {\r\n                        // 获取当前元素的 id\r\n                        const currentSealName = (event.target.id).split('-')[0]\r\n                        // console.log(\"元素被hover了！ID: \" + currentSealName)\r\n                        self.$store.commit(\"changeHover\", {\r\n                            entity: \"seal_name\",\r\n                            value: currentSealName // single seal_name\r\n                        })\r\n                        // path.filter(d => d.data.name === currentProvinceName)\r\n                        //     .dispatch(\"click\") // 模拟触发sunburst中该province的click操作\r\n                    }\r\n                })\r\n                // unhover\r\n                seal_rect_svg.addEventListener(\"mouseout\", function(event) {\r\n                    self.$store.commit(\"changeHover\", {\r\n                        entity: null,\r\n                        value: []\r\n                    })\r\n                })\r\n                // click\r\n                seal_rect_svg.addEventListener(\"click\", function(event) {\r\n                    if (event.target.classList.contains(\"seal-single-rect\")) {\r\n                        self.$store.commit(\"changeSelection\", {\r\n                            entity: \"seal_name\",\r\n                            value: (event.target.id).split('-')[0] // single seal_name(一定非空)\r\n                        })\r\n                    }\r\n                })\r\n\r\n                // unclick\r\n                let unselected_layer = document.querySelector('.seal-rect-unselected-layer')\r\n                unselected_layer.addEventListener(\"click\", function(event) {\r\n                    self.$store.commit(\"changeSelection\", {\r\n                        entity: null,\r\n                        value: []\r\n                    })\r\n                })\r\n\r\n                // for seal rect in collectors' card\r\n                let seal_rect_collector_group = document.querySelectorAll(\".seal-icon-group-svg\")\r\n                seal_rect_collector_group.forEach(function(collector_div) {\r\n                    // console.log('collector_div', collector_div)\r\n                    collector_div.addEventListener(\"mouseover\", function(event) {\r\n                        // 检查点击事件的目标元素是否包含指定的 class\r\n                        if (event.target.classList.contains(\"seal-single-icon\")) {\r\n                            // 获取当前元素的 id\r\n                            const currentSealName = (event.target.id).split('-')[3]\r\n                            self.$store.commit(\"changeHover\", {\r\n                                entity: \"seal_name\",\r\n                                value: currentSealName // single seal_name\r\n                            })\r\n                        }\r\n                    })\r\n                    // unhover\r\n                    collector_div.addEventListener(\"mouseout\", function(event) {\r\n                        self.$store.commit(\"changeHover\", {\r\n                            entity: null,\r\n                            value: []\r\n                        })\r\n                    })\r\n                    // click\r\n                    collector_div.addEventListener(\"click\", function(event) {\r\n                        if (event.target.classList.contains(\"seal-single-icon\")) {\r\n                            self.$store.commit(\"changeSelection\", {\r\n                                entity: \"seal_name\",\r\n                                value: (event.target.id).split('-')[3] // single seal_name(一定非空)\r\n                            })\r\n                        } else if (event.target.classList.contains(\"seal-collector-icon-unselected-layer\")) { // unclick\r\n                            self.$store.commit(\"changeSelection\", {\r\n                                entity: null,\r\n                                value: [] // single seal_name(一定非空)\r\n                            })\r\n                        }\r\n                    })\r\n                })\r\n            }, time_duration)\r\n            \r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        that.initialize()\r\n        that.getTimeScale()\r\n        that.renderSealCard()\r\n        that.detectInteraction()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.seal-card-container {\r\n    position: absolute;\r\n    left: 0%;\r\n    width: 100%;\r\n    top: 2%;\r\n    height: 69%;\r\n    overflow-x: auto;\r\n    &::-webkit-scrollbar {\r\n        display: none;  // 隐藏滚动条\r\n    }\r\n    .seal-card {\r\n        position: absolute;\r\n        // color: #8F7B6C;\r\n        // border: 2px solid #8F7B6C;\r\n        // border-radius: 5px;\r\n        display: flex;\r\n        justify-content: center;\r\n\r\n        overflow-y: auto;\r\n        .seal-index-rect {\r\n            position: absolute;\r\n            color: white;\r\n            background-color: #A56752;\r\n            z-index: 1;\r\n        }\r\n        .card-rect {\r\n            position: absolute;\r\n            color: #8F7B6C;\r\n            border: 2px solid #8F7B6C;\r\n            // border-radius: 5px;\r\n            // clip-path: polygon(0% 0%, 25% 0%, 25% 6%, 80% 6%, 80% 0%, 100% 0%, 100% 100%, 0% 100%); // 上开口\r\n            // clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 75% 100%, 75% 95%, 25% 95%, 25% 100%, 0% 100%); // 下开口\r\n            .seal-name{\r\n                display: flex; // new\r\n                // flex-direction: row;\r\n                text-align: center;\r\n                align-items: center;\r\n                justify-content: center; // new\r\n\r\n                /*font-size:  $rem + 'px';*/\r\n                font-weight: bold;\r\n                width: 100%;\r\n                position: relative;\r\n                color: #724A2B;\r\n            }\r\n            .pic-row {\r\n                position: absolute;\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: center; \r\n                align-items: center; // new\r\n                .seal-pic img {\r\n                    cursor: pointer;\r\n                }\r\n            }\r\n            .info-row {\r\n                position: absolute;\r\n                display: flex;\r\n                flex-direction: row;\r\n                justify-content: space-between; // 多个item时使用（加左右箭头时）\r\n                align-items: center; // new\r\n                .agent-time-group {\r\n                    display: flex;\r\n                    flex-direction: row;\r\n                    align-items: center; // new\r\n                }\r\n            }\r\n            .seal-page {\r\n                position: absolute;\r\n                left: 2.5%;\r\n                width: 95%;\r\n                border-bottom: 1.3px solid #724A2B; /* 下划线样式，可以根据需要更改颜色、宽度和样式 */\r\n                padding-bottom: 5px; /* 可选：为文本添加一些底部填充，以使下划线距离文本更远 */\r\n            }\r\n            .seal-icon-group {\r\n                position: absolute;\r\n                left: 2.5%;\r\n                width: 95%;\r\n                overflow-y: auto;\r\n                // background-color: rgba(247, 171, 0, 0.15);\r\n            }\r\n        }\r\n        .stamped-year {\r\n            position: absolute;\r\n            color: #724A2B;\r\n        }    \r\n    }\r\n    .seal-pic-icon-container {\r\n        position: absolute;\r\n        overflow-y: auto;\r\n        .seal-pic-icon-svg {\r\n            position: absolute;\r\n            left: 0%;\r\n            top: 0%;\r\n            width: 100%;\r\n            // height: 100%;\r\n        }\r\n    }\r\n}\r\n.seal-circle-container {\r\n        position: absolute;\r\n        left: 0%;\r\n        width: 100%;\r\n        top: 80%;\r\n        height: 20%;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n</style>\r\n","const $ = require(\"jquery\");\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\nexport function timeScale_param() {\r\n    let yearStart = 1450,\r\n        yearEnd = 1965,\r\n        sWidth = $(\".main-panel\").width() * 0.99 // $(\".time-axis\").width()\r\n    let containerRange = [0.08 * sWidth, sWidth * (1 - margin.left - margin.right)]\r\n    return {\r\n        domain: [yearStart, yearEnd],\r\n        range: containerRange\r\n    }\r\n}","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TimescaleParam from \"@/utils/timescale_param\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\nlet timeScale\r\n\r\nexport function draw_seal_rect(seal_data, rem) { // \r\n    timeScale = d3.scaleLinear()\r\n                    .domain(TimescaleParam.timeScale_param()['domain'])\r\n                    .range(TimescaleParam.timeScale_param()['range'])\r\n    let parentDiv = document.getElementById(\"seal-circle-container\")\r\n    const seal_circle_radius = rem / 3 // circle半径\r\n    // 首先清除原本的svg\r\n    d3.select('.seal-circle-container').selectAll('svg').remove()\r\n    let svg = d3.select('.seal-circle-container') // '#seal-circle-container'也行\r\n                .append('svg')\r\n                .attr('class', 'seal-circle-svg')\r\n                .attr('width', parentDiv.clientWidth * (1 - margin.left - margin.right))\r\n                .attr('height', parentDiv.clientHeight)\r\n    // console.log('seal_data', seal_data)\r\n\r\n    // unselected layer\r\n    let unselected_layer = svg.append('g')\r\n                                .attr('class', 'seal-rect-unselected-layer')\r\n    unselected_layer.append('rect')\r\n                    .attr('x', 0)\r\n                    .attr('y', 0)\r\n                    .attr('width', parentDiv.clientWidth * (1 - margin.left - margin.right))\r\n                    .attr('height', parentDiv.clientHeight)\r\n                    .attr('fill', 'white')\r\n                    .style('opacity', 0)\r\n\r\n    let seal_group = svg.selectAll('.seal-rect-group')\r\n                        .data(seal_data['collectors'])\r\n                        .join('g')\r\n                        .attr('class', 'seal-rect-group')\r\n                        .attr('id', (d) => `${d['collector_name']}-seal-circle-group`)\r\n                        .attr('transform', (d) => `translate(${timeScale((d['life_span'][0] + d['life_span'][1]) / 2)},0)`) // basic version, 首先移动到life_span中心点处\r\n\r\n    let single_seal = seal_group.selectAll('g')\r\n                                .data((d) => d.seals)\r\n                                .join('g')\r\n                                // .attr(\"transform\", (d, i) =>\r\n                                //     `translate(0,${$('.seal-circle-svg').height() - (rem * 3 / 15) * i})`\r\n                                // ) // basic version\r\n                                .attr('transform', (d, i, array) => {\r\n                                    const seal_per_column = 6, // 每列放seal_name icon的个数\r\n                                          column_num = Math.ceil(array.length / seal_per_column),\r\n                                          group_container_width = column_num * seal_circle_radius * 2 + (column_num - 1) * seal_circle_radius * 0.1 // 最后计算出来的坐标整体左移 group_container_width / 2 个单位\r\n                                    return `translate(${Math.floor(i / 6) * seal_circle_radius * (2 + 0.1) - group_container_width / 2 - seal_circle_radius},${$('.seal-circle-svg').height() * 0.9 - ((i % 6) * seal_circle_radius * (2 + 0.5)) - seal_circle_radius * 1.1})`\r\n                                })\r\n    // console.log($('.seal-circle-svg').height())\r\n    // circle              \r\n    // single_seal.append('circle')\r\n    //             .attr('id', (d) => `${d['seal_name']}-circle`)      \r\n    //             .attr(\"r\", seal_circle_radius) // basic version (too small)\r\n    //             // .attr(\"fill\", '#A56752')\r\n    //             .attr('fill', (d) => d['collector_color'])\r\n    //             // .attr('stroke', 'white')\r\n    //             .append(\"title\") // hover时的小小tooltip\r\n    //                 .text((d) => `${d.seal_name}`)\r\n    // rect\r\n    single_seal.append('rect')\r\n                .attr('class', 'seal-single-rect')\r\n                .attr('id', (d) => `${d['seal_name']}-circle`)\r\n                .attr('x', 0)\r\n                .attr('y', 0)   \r\n                .attr(\"width\", seal_circle_radius * 1.8)\r\n                .attr(\"height\", seal_circle_radius * 1.8)\r\n                .attr('fill', (d) => d['collector_color'])\r\n                .append(\"title\") // hover时的小小tooltip\r\n                    .text((d) => `${d.seal_name}`)\r\n}\r\n\r\nexport function SealCardMapping(seal_data) { // 将所有的印章图片加载成为一个list\r\n    let seal_mapped_list = []\r\n\r\n    // 首先对collectors按照出生时间排序\r\n    seal_data['collectors'].sort((a, b) => {\r\n        if ((a['life_span'][0] + a['life_span'][1]) / 2 < (b['life_span'][0] + b['life_span'][1]) / 2) return -1\r\n        if ((a['life_span'][0] + a['life_span'][1]) / 2 > (b['life_span'][0] + b['life_span'][1]) / 2) return 1\r\n        return 0\r\n    })\r\n\r\n    for (let i in seal_data['collectors']) { // 遍历每一个鉴藏者\r\n        const cur_collector = seal_data['collectors'][i]\r\n        const collector_para = {\r\n            'collector_id': cur_collector['collector_id'],\r\n            'collector_id_ori': cur_collector['collector_id_ori'],\r\n            'collector_name': cur_collector['collector_name'],\r\n            'intro': cur_collector['intro'],\r\n            'life_span': cur_collector['life_span'],\r\n            'collector_color': TypeColor.color_list[cur_collector['collector_name']]\r\n        }\r\n        for (let j in cur_collector['seals']) {\r\n            const cur_seal = cur_collector['seals'][j],\r\n                  seal_name = cur_seal['seal_name'],\r\n                  series_num = cur_seal['seal_pic'].length // 该印章所拥有的印章图片个数\r\n\r\n            // 首次遍历，记录 seal_pic_index\r\n            let seal_pic_index_list = []\r\n            for (let k in cur_seal['seal_pic']) {\r\n                seal_pic_index_list.push(cur_seal['seal_pic'][k]['index'])\r\n            }\r\n            // 再次遍历，map list添加属性\r\n            for (let k in cur_seal['seal_pic']) {\r\n                seal_mapped_list.push({...cur_seal['seal_pic'][k], \r\n                    'seal_name': seal_name,\r\n                    'series_num': series_num,\r\n                    'series_list': seal_pic_index_list,\r\n                    'image_href': 'http://vis.pku.edu.cn/seal_visualization/assets/seal_images/que_hua_qiu_se_tu_juan/seal_' + cur_seal['seal_pic'][k]['index'] + '.jpg',\r\n                    'collector_seal_offset': j, // 当前所属的鉴藏者seal的相对偏移量offset\r\n                    'stamped_year': cur_collector['life_span'], // 盖章时间，暂时等于鉴藏者的life span，留出接口\r\n                    ...collector_para\r\n                })\r\n            }\r\n        }\r\n    }\r\n    console.log('seal_mapped_list', seal_mapped_list) // success\r\n    return seal_mapped_list\r\n}\r\n\r\nexport function getSealCardContainerSize() { // 根据屏幕大小计算印章信息卡片的尺寸\r\n    let sWidth = $(\".main-panel\").width() * 0.99 // $(\".time-axis\").width()\r\n    let renderRange = [0.08 * sWidth, sWidth * (1 - margin.left - margin.right)]\r\n    let renderWidth = renderRange[1] - renderRange[0]\r\n    return { // 仅需知道width,长度按照比例计算\r\n        x: 0.08 * sWidth,\r\n        width: renderWidth\r\n    }\r\n}\r\n\r\nexport function reconstructSealData(card_list) { // reconstruct collector_seal_dict\r\n    let collector_seal_dict = {} // 层级结构，鉴藏者(dict)-印章名称(以list的形式存在)-印章图片(seal_pic, 以list的形式存在)\r\n    // 第1次遍历card_list，将seal_pic按照人物聚类\r\n    for (let i in card_list) {\r\n        if (!collector_seal_dict.hasOwnProperty(card_list[i]['collector_name'])) { // 当前印章的鉴藏者还没有录入\r\n            collector_seal_dict[card_list[i]['collector_name']] = [{\r\n                'seal_name': card_list[i]['seal_name'],\r\n                'seal_pic': [card_list[i]]\r\n            }]\r\n        } else { // 当前鉴藏者已经录入\r\n            let found_seal_name = false\r\n            for (let j in collector_seal_dict[card_list[i]['collector_name']]) { // 遍历seal_name\r\n                if (collector_seal_dict[card_list[i]['collector_name']][j]['seal_name'] === card_list[i]['seal_name']) {\r\n                    found_seal_name = true\r\n                    collector_seal_dict[card_list[i]['collector_name']][j]['seal_pic'].push(card_list[i])\r\n                    break\r\n                } else {\r\n                    continue\r\n                }\r\n            }\r\n            if (!found_seal_name) { // 没有录入当前的印章名称\r\n                collector_seal_dict[card_list[i]['collector_name']].push({\r\n                    'seal_name': card_list[i]['seal_name'],\r\n                    'seal_pic': [card_list[i]]\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return collector_seal_dict\r\n}\r\n\r\nexport function renderSealIconGroup(card_list, icon_size) { // here \"index\" is in number format\r\n    const container_width = $('.seal-icon-group').width(), // 虽然有多个group，但是他们的width相同\r\n          gap = (container_width - icon_size * 6) / 5\r\n    let collector_seal_dict = reconstructSealData(card_list) // 层级结构，鉴藏者-印章名称-印章图片\r\n\r\n    // 遍历card_list，render\r\n    for (let i in card_list) {\r\n        let seal_group = collector_seal_dict[card_list[i]['collector_name']]\r\n        let svg = d3.select(`#seal-icon-group-${card_list[i]['index']}`) // '#seal-circle-container'也行\r\n                    .attr('width', container_width)\r\n                    .attr('height', Math.ceil(seal_group.length / 6) * icon_size + icon_size * 0.3 * 1 + (Math.ceil(seal_group.length / 6) - 1) * icon_size * 0.4) // 按理来说应该是0.3 * 2\r\n        \r\n        // 首先清除此前所有元素\r\n        svg.selectAll('g').remove()\r\n        let seal_icon = svg.selectAll('g')\r\n                            .data(seal_group)\r\n                            .join('g')\r\n                            .attr('class', (d) => `seal-icon-rect-${d['seal_name']}`)\r\n                            .attr('transform', (d, i) => `translate(${i % 6 * (icon_size + gap)},${Math.floor(i / 6) * icon_size * (1 + 0.4) + icon_size * 0.3})`)                  \r\n    \r\n        seal_icon.append('rect')\r\n                 .attr('x', 0)\r\n                 .attr('y', 0)\r\n                 .attr('width', icon_size)\r\n                 .attr('height', icon_size)\r\n                //  .attr('fill', '#A56752')\r\n                 .attr('fill', (d) => d['seal_pic'][0]['collector_color'])\r\n                 .attr('fill-opacity', (d) => d['seal_pic'][0]['series_list'].includes(card_list[i]['index']) ? 1 : 0.6)\r\n\r\n        seal_icon.append('text')\r\n                 .attr('x', icon_size / 2)\r\n                 .attr('y', icon_size / 2)\r\n                 .attr('dy', icon_size * 0.325)\r\n                 .attr(\"text-anchor\", \"middle\")\r\n                 .text((d) => d['seal_pic'].length)\r\n                 .attr('font-size', icon_size * 1)\r\n                 .attr('fill', 'white')\r\n                 .style('visibility', (d) => d['seal_pic'].length === 1 ? 'hidden' : 'visible')\r\n        seal_icon.append(\"title\")\r\n                  .text((d) => `${d.seal_name}`);\r\n    }\r\n}\r\n\r\nexport function renderSealPicIcon(seal_mapped_list, unit_pixel) { // unit_pixel * 0.1 = (card_width * 0.9 / 120) * 0.1\r\n    const circle_radius = unit_pixel * 120 * (0.1 * 0.8) / (0.9 * 2)\r\n    for (let i in seal_mapped_list) {\r\n        const cur_seal_pic = seal_mapped_list[i]\r\n        let svg = d3.select(`#seal-pic-icon-svg-${cur_seal_pic['index']}`)\r\n                    .attr('height', (cur_seal_pic['series_list'].length + 1) * circle_radius * 2)\r\n        svg.selectAll('g').remove()\r\n        let seal_pic_group = svg.append('g')\r\n                                .attr('class', 'seal_pic_group')\r\n        seal_pic_group.selectAll('circle')\r\n                        .data(cur_seal_pic['series_list'])\r\n                        // .enter()\r\n                        // .append('circle')\r\n                        .join('circle')\r\n                        .attr('cx', circle_radius * (1 + 0.35))\r\n                        .attr('cy', (d, i) => (2 * i + 1) * circle_radius)\r\n                        .attr('r', circle_radius)\r\n                        .attr('fill', TypeColor.color_list[cur_seal_pic['collector_name']])\r\n                        .attr('fill-opacity', (d, i) => cur_seal_pic['series_list'].indexOf(cur_seal_pic['index']) === i ? 1 : 0.5)\r\n                        .attr('stroke', 'none')\r\n    }\r\n}\r\n","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TimescaleParam from \"@/utils/timescale_param\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\nlet timeScale\r\n// 序号setTimeout后再执行\r\n// timeScale = d3.scaleLinear()\r\n//                     .domain(TimescaleParam.timeScale_param()['domain'])\r\n//                     .range(TimescaleParam.timeScale_param()['range'])\r\n\r\n// export function getSealNameList(seal_data) { // 暂时不需要\r\n//     for (let i in seal_data['collectors']) {\r\n//         for (let j in seal_data['collectors'][i]['seals']) {\r\n\r\n//         }\r\n//     }\r\n// }\r\n\r\nexport function card2circleLink(seal_pic_list, unit_pixel) {\r\n    // console.log(\"seal_data in card2circleLink\", seal_pic_list)\r\n    d3.select('#card2circle-link-svg').selectAll('g').remove()\r\n    let eventDiv = document.getElementById('seal-card-container') // 信息卡片container\r\n\r\n    let link_group = d3.select('#card2circle-link-svg').append('g').attr('class', 'card2circle-group')\r\n\r\n    // 获取各部分本身的偏移量\r\n    let link_svg_offset = $('#card2circle-link-svg').offset(), // render line link svg本身的偏移量\r\n        circle_svg_offset = $('.seal-circle-svg').offset(), // seal circle svg本身的偏移量\r\n        seal_card_svg_offset = $('.seal-card-container').offset() // seal information card container本身的偏移量\r\n\r\n    // 定义路径数据\r\n    let pathData = d3.path()\r\n\r\n    // 设置拐角radius\r\n    const inflexion_radius = unit_pixel\r\n\r\n    // 遍历每一个seal card\r\n    for (let i in seal_pic_list) {\r\n        const seal = seal_pic_list[i]\r\n        // console.log(seal, `#${seal['seal_name']}-circle`, $(`#${seal['seal_name']}-circle`).offset(), $(`#${seal['seal_name']}-circle`).width(), d3.select(`#${seal['seal_name']}-circle`).node().getBBox().width)\r\n        let card_pos = $(`#seal-card-${seal['seal_name']}-${seal['index']}`).offset(), // jQuery相对于整个页面的offset\r\n            circle_pos = $(`#${seal['seal_name']}-circle`).offset()\r\n        let card_point_pos = {\r\n            top: card_pos.top + $(`#seal-card-${seal['seal_name']}-${seal['index']}`).height() + unit_pixel * 2,\r\n            left: card_pos.left + $(`#seal-card-${seal['seal_name']}-${seal['index']}`).width() / 2\r\n            },\r\n            circle_point_pos = {\r\n                top: circle_pos.top,\r\n                left: circle_pos.left + d3.select(`#${seal['seal_name']}-circle`).node().getBBox().width / 2 // jQuery的$(`#${seal['seal_name']}-circle`).width()不起作用\r\n            }\r\n        let average_point_pos = {\r\n                top: (card_point_pos.top + circle_point_pos.top) / 2 + Math.random() * unit_pixel,\r\n                left: (card_point_pos.left + circle_point_pos.left) / 2\r\n            }\r\n        let link_pos // 计算各个拐点的坐标\r\n\r\n        // 设置绘制line的限定（否则渲染过慢）\r\n        let ifRender = !(card_point_pos.left < seal_card_svg_offset.left || card_point_pos.left > seal_card_svg_offset.left + $('.seal-card-container').width() // seal card 只有在container视野范围内移动才进行link的绘制\r\n                        || circle_point_pos.left < seal_card_svg_offset.left || circle_point_pos.left > seal_card_svg_offset.left + $('.seal-card-container').width()) // 印章circle不动，其实没有必要\r\n        if (ifRender) {\r\n            // 计算各个拐点的坐标\r\n            link_pos = [\r\n                { // 起始点\r\n                    x: card_point_pos.left - link_svg_offset.left,\r\n                    y: card_point_pos.top - link_svg_offset.top\r\n                }, { // arc1 start\r\n                    x: card_point_pos.left - link_svg_offset.left,\r\n                    y: average_point_pos.top - link_svg_offset.top - inflexion_radius\r\n                }, { // arc1 end\r\n                    x: (card_point_pos.left - circle_point_pos.left) > 0 ? card_point_pos.left - inflexion_radius - link_svg_offset.left : card_point_pos.left + inflexion_radius - link_svg_offset.left,\r\n                    y: average_point_pos.top - link_svg_offset.top\r\n                }, { // arc2 start\r\n                    x: (card_point_pos.left - circle_point_pos.left) > 0 ? circle_point_pos.left + inflexion_radius - link_svg_offset.left : circle_point_pos.left - inflexion_radius - link_svg_offset.left,\r\n                    y: average_point_pos.top - link_svg_offset.top\r\n                }, { // arc2 end\r\n                    x: circle_point_pos.left - link_svg_offset.left,\r\n                    y: average_point_pos.top - link_svg_offset.top + inflexion_radius\r\n                }, { // end\r\n                    x: circle_point_pos.left - link_svg_offset.left,\r\n                    y: circle_point_pos.top - link_svg_offset.top\r\n                }\r\n            ]\r\n\r\n            pathData.moveTo(link_pos[0].x, link_pos[0].y) // 移动到起始点\r\n            pathData.lineTo(link_pos[1].x, link_pos[1].y)\r\n            pathData.arcTo(link_pos[1].x, link_pos[2].y, link_pos[2].x, link_pos[2].y, inflexion_radius) // 绘制圆弧\r\n            pathData.lineTo(link_pos[3].x, link_pos[3].y)\r\n            pathData.arcTo(link_pos[4].x, link_pos[3].y, link_pos[4].x, link_pos[4].y, inflexion_radius) // 绘制圆弧\r\n            pathData.lineTo(link_pos[5].x, link_pos[5].y)\r\n\r\n            // 在SVG中添加路径元素\r\n            d3.selectAll(`#${seal['seal_name']}-card2circle-${seal['index']}`).remove()\r\n            link_group.append(\"path\")\r\n                        .attr(\"d\", pathData.toString()) // 设置路径的数据\r\n                        .attr('id', `${seal['seal_name']}-card2circle-${seal['index']}`)\r\n                        .attr(\"stroke\", \"#D3BEAF\") // 设置线段颜色\r\n                        .attr(\"stroke-width\", 0.5) // 设置线段宽度\r\n                        .attr(\"fill\", \"none\") // 设置填充为无填充\r\n                        // .style('opacity', 0.5)\r\n                        // .style('visibility', () => {\r\n                        //     if (card_pos.left < myDiv.getBoundingClientRect().left || card_pos.left + 0.6 * rem > myDiv.offsetWidth + myDiv.getBoundingClientRect().left) { // 0.3\r\n                        //         return 'hidden'\r\n                        //     } else {\r\n                        //         return 'visible'\r\n                        //     }\r\n                        // })\r\n        }\r\n\r\n        // 实时监听event card的横坐标\r\n        eventDiv.addEventListener('scroll', function() { // 实时监听scroll\r\n            // console.log('seal card container 移动啦', d3.selectAll(`#${seal['seal_name']}-card2circle-${seal['index']}`))\r\n            // d3.selectAll(`#${seal['seal_name']}-card2circle-${seal['index']}`).remove()\r\n\r\n            // 更新card_pos的坐标\r\n            card_pos = $(`#seal-card-${seal['seal_name']}-${seal['index']}`).offset() // jQuery相对于整个页面的offset\r\n                circle_pos = $(`#${seal['seal_name']}-circle`).offset()\r\n            card_point_pos = {\r\n                top: card_pos.top + $(`#seal-card-${seal['seal_name']}-${seal['index']}`).height(),\r\n                left: card_pos.left + $(`#seal-card-${seal['seal_name']}-${seal['index']}`).width() / 2\r\n            }\r\n            circle_point_pos = {\r\n                top: circle_pos.top,\r\n                left: circle_pos.left + d3.select(`#${seal['seal_name']}-circle`).node().getBBox().width / 2 // jQuery的$(`#${seal['seal_name']}-circle`).width()不起作用\r\n            }\r\n            average_point_pos = {\r\n                top: (card_point_pos.top + circle_point_pos.top) / 2 + Math.random() * unit_pixel,\r\n                left: (card_point_pos.left + circle_point_pos.left) / 2\r\n            }\r\n\r\n            ifRender = !(card_point_pos.left < seal_card_svg_offset.left || card_point_pos.left > seal_card_svg_offset.left + $('.seal-card-container').width() // seal card 只有在container视野范围内移动才进行link的绘制\r\n                       || circle_point_pos.left < seal_card_svg_offset.left || circle_point_pos.left > seal_card_svg_offset.left + $('.seal-card-container').width()) // 印章circle不动，其实没有必要\r\n\r\n            if (!ifRender) { // 不在范围内的直接将原本的link remove\r\n                d3.selectAll(`#${seal['seal_name']}-card2circle-${seal['index']}`).remove()\r\n            } else {\r\n                // 计算各个拐点的坐标\r\n                link_pos = [\r\n                    { // 起始点\r\n                        x: card_point_pos.left - link_svg_offset.left,\r\n                        y: card_point_pos.top - link_svg_offset.top\r\n                    }, { // arc1 start\r\n                        x: card_point_pos.left - link_svg_offset.left,\r\n                        y: average_point_pos.top - link_svg_offset.top - inflexion_radius\r\n                    }, { // arc1 end\r\n                        x: (card_point_pos.left - circle_point_pos.left) > 0 ? card_point_pos.left - inflexion_radius - link_svg_offset.left : card_point_pos.left + inflexion_radius - link_svg_offset.left,\r\n                        y: average_point_pos.top - link_svg_offset.top\r\n                    }, { // arc2 start\r\n                        x: (card_point_pos.left - circle_point_pos.left) > 0 ? circle_point_pos.left + inflexion_radius - link_svg_offset.left : circle_point_pos.left - inflexion_radius - link_svg_offset.left,\r\n                        y: average_point_pos.top - link_svg_offset.top\r\n                    }, { // arc2 end\r\n                        x: circle_point_pos.left - link_svg_offset.left,\r\n                        y: average_point_pos.top - link_svg_offset.top + inflexion_radius\r\n                    }, { // end\r\n                        x: circle_point_pos.left - link_svg_offset.left,\r\n                        y: circle_point_pos.top - link_svg_offset.top\r\n                    }\r\n                ]\r\n\r\n                pathData = d3.path() // 清空pathData(否则pathData一直append，后果不堪设想...)\r\n                pathData.moveTo(link_pos[0].x, link_pos[0].y) // 移动到起始点\r\n                pathData.lineTo(link_pos[1].x, link_pos[1].y)\r\n                pathData.arcTo(link_pos[1].x, link_pos[2].y, link_pos[2].x, link_pos[2].y, inflexion_radius) // 绘制圆弧\r\n                pathData.lineTo(link_pos[3].x, link_pos[3].y)\r\n                pathData.arcTo(link_pos[4].x, link_pos[3].y, link_pos[4].x, link_pos[4].y, inflexion_radius) // 绘制圆弧\r\n                pathData.lineTo(link_pos[5].x, link_pos[5].y)\r\n\r\n                // 在SVG中添加路径元素\r\n                d3.selectAll(`#${seal['seal_name']}-card2circle-${seal['index']}`).remove()\r\n                link_group.append(\"path\")\r\n                            .attr(\"d\", pathData.toString()) // 设置路径的数据\r\n                            .attr('id', `${seal['seal_name']}-card2circle-${seal['index']}`)\r\n                            .attr(\"stroke\", \"#8F7B6C\") // 设置线段颜色\r\n                            .attr(\"stroke-width\", 0.5) // 设置线段宽度\r\n                            .attr(\"fill\", \"none\") // 设置填充为无填充\r\n                            .style('opacity', 0.5)\r\n                            // .style('visibility', () => {\r\n                            //     if (card_pos.left < myDiv.getBoundingClientRect().left || card_pos.left + 0.6 * rem > myDiv.offsetWidth + myDiv.getBoundingClientRect().left) { // 0.3\r\n                            //         return 'hidden'\r\n                            //     } else {\r\n                            //         return 'visible'\r\n                            //     }\r\n                            // })\r\n            }\r\n                            \r\n        })\r\n    }\r\n}","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TimescaleParam from \"@/utils/timescale_param\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nexport function getCardListSubset(card_list, selection) {\r\n    let card_list_subset = []\r\n    if (selection.value.length === 0) {\r\n        return card_list\r\n    } else {\r\n        for (let i in card_list) {\r\n            if (selection.value.includes(card_list[i]['index'])) {\r\n                card_list_subset.push(card_list[i])\r\n            }\r\n        }\r\n        return card_list_subset\r\n    }\r\n}","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TimescaleParam from \"@/utils/timescale_param\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\n// timeline视图中对hover操作做出的一系列响应\r\nexport function HoverNull(selection) { // hover.entity === null\r\n    // 对于seal_card的响应操作\r\n    let sealCardGroup = document.querySelector('#seal-card-container') // document.getElementById('seal-card-container')\r\n    let sealCardDivs = sealCardGroup.querySelectorAll('.card-rect') // list(190)\r\n    sealCardDivs.forEach(function(div) {\r\n        d3.select(div)\r\n            .style('border', '2px solid #8F7B6C')\r\n            .style(\"filter\", 'none')\r\n    })\r\n    // 对于 seal-rect-group 的响应操作\r\n    // for seal rect above timeAxis\r\n    let seal_rect_svg = document.querySelector(\".seal-circle-svg\")\r\n    let sealRectGroup = seal_rect_svg.querySelectorAll('.seal-single-rect')\r\n    sealRectGroup.forEach(function(div) {\r\n        d3.select(div)\r\n            .style('opacity', 1)\r\n            .style(\"filter\", 'none')\r\n    })\r\n    // for seal rect in collectors' card\r\n    let seal_rect_collector_group = document.querySelectorAll(\".seal-icon-group\")\r\n    seal_rect_collector_group.forEach(function(collector_div) {\r\n        let sealRectGroupCollector = collector_div.querySelectorAll('.seal-single-icon')\r\n        sealRectGroupCollector.forEach(function(div) {\r\n            d3.select(div)\r\n                .style('opacity', 1)\r\n                .style(\"filter\", 'none')\r\n        })\r\n    })\r\n\r\n    if (selection.entity === null) { // 当前没有处于selection状态的entity\r\n        // 待添加\r\n    } else { // 当前存在元素处于selected状态\r\n        if (selection.entity === 'collector') {\r\n            // 待添加\r\n        } else if (selection.entity === 'seal_name') {\r\n            // console.log('selection', selection)\r\n            HoverSealName(selection.value, true)\r\n        }\r\n    }\r\n}\r\n\r\nexport function HoverSealName(seal_name, ifHoverNull) { // ifSelected is Boolean\r\n    // 对于 seal_card 的响应操作\r\n    // 获取包含div组的父元素\r\n    let sealCardGroup = document.querySelector('#seal-card-container') // document.getElementById('seal-card-container')\r\n\r\n    // 获取div组中所有的div元素\r\n    let sealCardDivs = sealCardGroup.querySelectorAll('.card-rect') // list(190)\r\n\r\n    // 遍历div元素并进行判断(需要修改成for循环)\r\n    let findFirstSealCard = false\r\n    sealCardDivs.forEach(function(div) {\r\n        // 获取div的id并进行一系列数据处理\r\n        let processedId = div.id.split('-')[2]\r\n\r\n        // 判断是否符合条件\r\n        if (processedId === seal_name) {\r\n            d3.select(div)\r\n                .style('border', '3px solid #8F7B6C')\r\n                .style(\"filter\", 'drop-shadow(0.2px 0.2px 0.2px rgb(0 0 0 / 0.6))')\r\n\r\n            if (!findFirstSealCard && !judgeIfVisible(sealCardGroup, div) && !ifHoverNull) {\r\n                // 滚动到指定位置\r\n                // console.log('还没有偏移到指定位置', div.offsetParent.style.left, document.getElementById('seal-card-container').scrollLeft)\r\n                // const seal_card_container = document.getElementById('seal-card-container')\r\n                // seal_card_container.scrollLeft = parseInt(div.offsetParent.style.left)\r\n                sealCardGroup.scrollTo({\r\n                    left: parseInt(div.offsetParent.style.left),\r\n                    behavior: 'smooth'\r\n                })\r\n                findFirstSealCard = true\r\n            } else {\r\n                // continue\r\n            }\r\n        }\r\n    })\r\n\r\n    // 对于 seal-rect-group 的响应操作\r\n    // for seal rect above timeAxis\r\n    let seal_rect_svg = document.querySelector(\".seal-circle-svg\")\r\n    let sealRectGroup = seal_rect_svg.querySelectorAll('.seal-single-rect')\r\n    sealRectGroup.forEach(function(div) {\r\n        let processedId = div.id.split('-')[0]\r\n        if (processedId === seal_name) {\r\n            d3.select(div)\r\n                .style('opacity', 0.5)\r\n                .style(\"filter\", 'drop-shadow(0.2px 0.2px 0.2px rgb(0 0 0 / 0.6))')\r\n        } else {\r\n            // continue\r\n        }\r\n    })\r\n    // for seal rect in collectors' card\r\n    let seal_rect_collector_group = document.querySelectorAll(\".seal-icon-group\")\r\n    seal_rect_collector_group.forEach(function(collector_div) {\r\n        let sealRectGroupCollector = collector_div.querySelectorAll('.seal-single-icon')\r\n        // console.log('sealRectGroupCollector', sealRectGroupCollector)\r\n        sealRectGroupCollector.forEach(function(div) {\r\n            let processedId = div.id.split('-')[3]\r\n            if (processedId === seal_name) {\r\n                d3.select(div)\r\n                    .style('opacity', 0.4)\r\n                    .style(\"filter\", 'drop-shadow(1px 1px 1px rgb(0 0 0 / 0.6))')\r\n            } else {\r\n                // continue\r\n            }\r\n        })\r\n    })\r\n}\r\n\r\n// 判断一个元素当前是否处于可视范围内\r\nfunction judgeIfVisible(seal_card_container, cur_div) {\r\n    let ifVisible = seal_card_container.scrollLeft < parseInt(cur_div.offsetParent.style.left)\r\n                    && (seal_card_container.scrollLeft + seal_card_container.offsetWidth) > parseInt(cur_div.offsetParent.style.left)\r\n    return ifVisible\r\n}","import { render } from \"./SealCard.vue?vue&type=template&id=32c76cac&scoped=true\"\nimport script from \"./SealCard.vue?vue&type=script&lang=js\"\nexport * from \"./SealCard.vue?vue&type=script&lang=js\"\n\nimport \"./SealCard.vue?vue&type=style&index=0&id=32c76cac&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-32c76cac\"]])\n\nexport default __exports__","<template>\r\n    <div v-for=\"(item, index) in data['collectors']\" :key=\"index\" class=\"collector-card\"\r\n        :id=\"'collector-card-' + item['collector_name']\"\r\n        v-if=\"collectorContainerShow\"\r\n        :style=\"{left: collectorPosDict[item['collector_name']].x + 'px',\r\n                 top: collectorPosDict[item['collector_name']].y + 'px', height: containerParam.card_height * 1.1 + 'px', width: (containerParam.card_width * 0.9 + containerParam.unit_pixel * 4) + 'px'}\">\r\n        <div class=\"collector-title-row\" :style=\"{top: containerParam.unit_pixel * 5 + 'px', left: '2.5%', width: '95%', height: containerParam.unit_pixel * 25 + 'px' }\">\r\n            <div class=\"collector-name\" :style=\"{fontSize: containerParam.unit_pixel * 20 + 'px'}\"> {{ item['collector_name'] }}</div>\r\n            <div class=\"info-column\">           \r\n                <div class=\"collector-life-span\" :style=\"{fontSize: containerParam.unit_pixel * 11 + 'px'}\">{{ item['life_span'][0].toString() + '-' + item['life_span'][1].toString() }}</div>\r\n                <div class=\"stamp-ratio\">\r\n                    <svg class=\"seal-ratio-svg\" :id=\"item['collector_name'] + '-seal-ratio-svg'\"></svg>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"seal-icon-group\" \r\n            :style=\"{top: containerParam.unit_pixel * 35 + 'px', height: containerParam.unit_pixel * 30 + 'px'}\">\r\n            <svg class=\"seal-icon-group-svg\" :id=\"'seal-icon-group-' + item['collector_name']\"></svg>\r\n        </div>\r\n        <div class=\"collector-intro\" :style=\"{top: containerParam.unit_pixel * 70 + 'px', height: containerParam.unit_pixel * 35 + 'px', fontSize: containerParam.unit_pixel * 11 + 'px'}\">{{ item['intro'] }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as CollectorCardFunc from \"@/utils/timeline/collector_card_func\";\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\nconst time_duration = 1000,\r\n      timeout_duration = 100,\r\n      collector_card_num = 6\r\n\r\nexport default {\r\n    name: \"CollectorCard\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            timeScale: null,\r\n            collectorContainerShow: false,\r\n            containerParam: { // 当前绘制窗口的宽度(collector container)\r\n                x: 0,\r\n                width: 0,\r\n                card_width: 0, // includes the gap between collector cards\r\n                card_height: 0, // card height (card_width / card_height = 2)\r\n                unit_pixel: 0, // 单位大小\r\n                sealIconSize: 1, // seal icon的大小\r\n            },\r\n            cardList: [],\r\n            collectorPosDict: {}, // 用于记录collector card的位置\r\n        };\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\", \"data\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\", \"hover\"]),\r\n       \r\n    },\r\n    watch: {\r\n        cur_view: function(newVal, oldVal) {\r\n            const self = this\r\n            if (newVal === 'timeline' && newVal !== oldVal) {\r\n                self.renderCollectorCard()\r\n            }\r\n        },\r\n        selection: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal === 'timeline' && newVal !== oldVal) {\r\n                    self.renderCollectorCard()\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        hover: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal === 'timeline' && newVal !== oldVal) {\r\n\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { },\r\n        getTimeScale() { // 与timeAxis的比例尺对齐\r\n            const self = this\r\n            let yearStart = 1450, // 1295\r\n                yearEnd = 1965,\r\n                sWidth = $(\".main-panel\").width() * 0.99 // $(\".time-axis\").width()\r\n            let containerRange = [0.08 * sWidth, sWidth * (1 - margin.left - margin.right)]\r\n            self.timeScale = d3.scaleLinear()\r\n                                .domain([yearStart, yearEnd])\r\n                                .range(containerRange)\r\n        },\r\n        renderCollectorCard() {\r\n            const self = this\r\n            setTimeout(() => {\r\n                self.containerParam = SealCardFunc.getSealCardContainerSize() // {x: , width: }\r\n\r\n                self.containerParam['card_width'] = self.containerParam['width'] / collector_card_num // 220单位\r\n                self.containerParam['card_height'] = self.containerParam['card_width'] * 0.9 * 100 / 220 // 100单位, * 0.85 * 100 / 220\r\n                self.containerParam['unit_pixel'] = self.containerParam['card_height'] / 100\r\n\r\n                console.log(self.data['collectors'])\r\n                self.cardList = SealCardFunc.SealCardMapping(self.data) // mapped seal pictures into list (In this step all seal pictures are included.)\r\n                // self.cardList = HandleTimelineData.getCardListSubset(self.cardList, self.selection)\r\n                self.collectorPosDict = CollectorCardFunc.computeCollectorCardPosition(self.data['collectors'], {\r\n                    width: self.containerParam['card_width'],\r\n                    height: self.containerParam['card_height']\r\n                })\r\n                \r\n                self.collectorContainerShow = true\r\n\r\n                setTimeout(() => { // 渲染seal-icon-group\r\n                    // 绘制seal_ratio\r\n                    self.containerParam['sealIconSize'] = $('.seal-icon-group').height() / 3\r\n                    // console.log('self.containerParam', self.containerParam['sealIconSize'])\r\n                    CollectorCardFunc.renderCollectorSealIconGroup(self.data['collectors'], self.containerParam['sealIconSize'])\r\n                    CollectorCardFunc.renderSealRatio(self.data['collectors'], self.cardList) // collector_list, seal_mapped_list\r\n                }, timeout_duration)\r\n            }, timeout_duration)\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        that.initialize()\r\n        that.getTimeScale()\r\n        that.renderCollectorCard()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.collector-card {\r\n    position: absolute;\r\n    color: #8F7B6C;\r\n    border: 2px solid #8F7B6C;\r\n    // border-radius: 5px;\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    overflow-y: auto;\r\n    .collector-title-row {\r\n        position: absolute;\r\n        display: flex;\r\n        flex-direction: row;\r\n        // align-items: center;\r\n        // justify-content: center;\r\n        .collector-name {\r\n            white-space: nowrap;\r\n            color: #724A2B;\r\n        }\r\n        .info-column {\r\n            flex: 1; // 填充剩余空间\r\n            display: flex;\r\n            flex-direction: column;\r\n            // justify-content: center;\r\n            // align-items: center;\r\n            .stamp-ratio {\r\n                flex: 1; // 填充剩余空间\r\n                .seal-ratio-svg {\r\n                    left: 0%;\r\n                    top: 0%;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .seal-icon-group {\r\n        position: absolute;\r\n        left: 2.5%;\r\n        width: 95%;\r\n        overflow-y: auto;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n    .collector-intro {\r\n        position: absolute;\r\n        left: 2.5%;\r\n        width: 95%;\r\n        text-align: left;\r\n        overflow-y: auto;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n}\r\n\r\n</style>\r\n","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TimescaleParam from \"@/utils/timescale_param\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\nlet timeScale\r\n\r\nexport function renderSealRatio(collector_list, seal_mapped_list) {\r\n    for (let i in collector_list) {\r\n        const collector_name = collector_list[i]['collector_name']\r\n\r\n        const owned_seal_num = (seal_mapped_list.filter((d) => d['collector_name'] === collector_name)).length\r\n\r\n        const svg_height = $(`#${collector_name}-seal-ratio-svg`).height(), // svg高度\r\n              svg_width = $(`#${collector_name}-seal-ratio-svg`).width(), // svg宽度\r\n              radius = svg_height * 0.75 / 2\r\n        // console.log('radius', radius)\r\n        let svg = d3.select(`#${collector_name}-seal-ratio-svg`)\r\n        // console.log(svg_width, svg_height)\r\n        \r\n        svg.selectAll('g').remove() // 首先清除所有的group，避免干扰\r\n        let ratio_group = svg.append('g')\r\n                             .attr('class', 'stamp-ratio')\r\n                             .attr('transform', `translate(${svg_width * 0.05},${svg_height * 0.05})`)\r\n        const arcGeneratorLeft = d3.arc()\r\n                                    .innerRadius(0)\r\n                                    .outerRadius(radius)\r\n                                    .startAngle(Math.PI)\r\n                                    .endAngle(2 * Math.PI)\r\n                                \r\n        const arcGeneratorRight = d3.arc()\r\n                                    .innerRadius(0)\r\n                                    .outerRadius(radius)\r\n                                    .startAngle(0)\r\n                                    .endAngle(Math.PI)\r\n\r\n        let total_stamped = ratio_group.append('g')\r\n                            .attr('class', 'total_stamped')\r\n        // 定义路径数据\r\n        const total_path = `M ${radius} ${0} L ${svg_width * 0.85} ${0} A ${radius} ${radius} 0 1 1 ${svg_width * 0.85} ${radius * 2} L ${radius} ${2 * radius}` // A 5,5 0,0,1 150,75\r\n        total_stamped.append('path')\r\n                            .attr('d', total_path)\r\n                            .attr('fill', 'none')\r\n                            .attr('stroke', '#8F7B6C')\r\n        total_stamped.append('text')\r\n                     .attr('x', svg_width * 0.85)\r\n                     .attr('y', svg_height * 0.3)\r\n                     .attr('dy', svg_height * 0.3)\r\n                     .attr(\"text-anchor\", \"end\")\r\n                     .text((seal_mapped_list.length).toString())\r\n                     .attr('font-size', svg_height * 0.7)\r\n                     .attr('fill', '#8F7B6C')\r\n\r\n\r\n        let collector_stamped = ratio_group.append('g')\r\n                                            .attr('class', 'collector_stamped')\r\n        collector_stamped.append('rect') // 鉴藏者加盖印章的数目\r\n                            .attr('x', radius)\r\n                            .attr('y', 0)\r\n                            .attr('width', (svg_width * 0.85 - radius) * (owned_seal_num / seal_mapped_list.length))\r\n                            .attr('height', svg_height * 0.75)\r\n                            .attr('fill', '#8F7B6C')\r\n                            .attr('stroke', '#8F7B6C')\r\n        collector_stamped.append('path')\r\n                            .attr('d', arcGeneratorLeft)\r\n                            .attr('fill', '#8F7B6C')\r\n                            .attr('transform', `translate(${radius},${radius})`)\r\n        collector_stamped.append('path')\r\n                            .attr('d', arcGeneratorRight)\r\n                            .attr('fill', '#8F7B6C')\r\n                            .attr('transform', `translate(${radius + (svg_width * 0.85 - radius) * (owned_seal_num / seal_mapped_list.length)},${radius})`)\r\n        collector_stamped.append('text')\r\n                            .attr('x', (svg_width * 0.85) * (owned_seal_num / seal_mapped_list.length) + radius)\r\n                            .attr('y', svg_height * 0.3)\r\n                            .attr('dy', svg_height * 0.3)\r\n                            .attr(\"text-anchor\", \"end\")\r\n                            .text(owned_seal_num.toString())\r\n                            .attr('font-size', svg_height * 0.7)\r\n                            .attr('fill', 'white')\r\n    }\r\n}\r\n\r\nexport function renderCollectorSealIconGroup(collector_list, icon_size) {\r\n    const container_width = $('.seal-icon-group').width(), // 虽然有多个group，但是他们的width相同\r\n          gap = (container_width - icon_size * 10) / 9 // 1行放10个seal icon\r\n\r\n    for (let i in collector_list) {\r\n        const collector_name = collector_list[i]['collector_name'],\r\n              seal_group = collector_list[i]['seals']\r\n        let svg = d3.select(`#seal-icon-group-${collector_name}`) // '#seal-circle-container'也行\r\n                    .attr('width', container_width)\r\n                    .attr('height', Math.ceil(seal_group.length / 10) * icon_size + icon_size * 0.3 * 1 + (Math.ceil(seal_group.length / 10) - 1) * icon_size * 0.4) // 按理来说应该是0.3 * 2\r\n        // 首先清除此前所有元素\r\n        svg.selectAll('g').remove()\r\n\r\n        let unselected_layer =  svg.append('g')\r\n                                    // .attr('class', 'seal-collector-icon-unselected-layer') // 移动至rect中\r\n        unselected_layer.append('rect')\r\n                        .attr('class', 'seal-collector-icon-unselected-layer')\r\n                        .attr('x', 0)\r\n                        .attr('y', 0)\r\n                        .attr('width', container_width)\r\n                        .attr('height', Math.ceil(seal_group.length / 10) * icon_size + icon_size * 0.3 * 1 + (Math.ceil(seal_group.length / 10) - 1) * icon_size * 0.4)\r\n                        .attr('fill', 'white')\r\n                        .style('opacity', 0)\r\n\r\n        let seal_icon = svg.selectAll('.seal-icon-group')\r\n                            .data(seal_group)\r\n                            .join('g')\r\n                            // .attr('id', (d) => `seal-icon-rect-${d['seal_name']}`) // 移至rect\r\n                            .attr('transform', (d, i) => `translate(${i % 10 * (icon_size + gap)},${Math.floor(i / 10) * icon_size * (1 + 0.4) + icon_size * 0.3})`)\r\n        seal_icon.append('rect')\r\n                    .attr('x', 0)\r\n                    .attr('y', 0)\r\n                    .attr('width', icon_size)\r\n                    .attr('height', icon_size)\r\n                    .attr('class', 'seal-single-icon')\r\n                    .attr('id', (d) => `seal-icon-rect-${d['seal_name']}`)\r\n                    // .attr('fill', '#A56752')\r\n                    .attr('fill', TypeColor.color_list[collector_name])\r\n                    .attr('fill-opacity', 0.6)\r\n                    // .attr('fill-opacity', (d) => d['seal_pic'][0]['series_list'].includes(card_list[i]['index']) ? 1 : 0.6)\r\n        seal_icon.append('text')\r\n                    .attr('x', icon_size / 2)\r\n                    .attr('y', icon_size / 2)\r\n                    .attr('dy', icon_size * 0.325)\r\n                    .attr(\"text-anchor\", \"middle\")\r\n                    .text((d) => d['seal_pic'].length)\r\n                    .attr('font-size', icon_size * 1)\r\n                    .attr('fill', 'white')\r\n                    .style('visibility', (d) => d['seal_pic'].length === 1 ? 'hidden' : 'visible')     \r\n    }\r\n}\r\n\r\n// 计算collector card的位置\r\nexport function computeCollectorCardPosition(collector_list, card_size) {\r\n    const card_width = card_size['width'],\r\n          card_height = card_size['height']\r\n    timeScale = d3.scaleLinear()\r\n                    .domain(TimescaleParam.timeScale_param()['domain'])\r\n                    .range(TimescaleParam.timeScale_param()['range'])\r\n    // 使用自定义的比较函数按 name 键值升序排序\r\n    collector_list.sort((a, b) => {\r\n        if (a['life_span'][0] < b['life_span'][0]) return -1\r\n        if (a['life_span'][0] > b['life_span'][0]) return 1\r\n        return 0\r\n    })\r\n\r\n    // initialize the collector_pos dict\r\n    let collector_pos_dict = {}\r\n    for (let i in collector_list) {\r\n        collector_pos_dict[collector_list[i]['collector_name']] = {\r\n            x: timeScale(collector_list[i]['life_span'][0]),\r\n            y: card_height * 0.1\r\n        }\r\n    }\r\n    console.log('collector_pos_dict', collector_pos_dict)\r\n\r\n    // 再次遍历，检测位置conflict并修改\r\n    for (let i in collector_list) {\r\n        const cur_collector = collector_list[i],\r\n              cur_pos_param = collector_pos_dict[cur_collector['collector_name']] // x, y\r\n        if (i > 0) {\r\n            const prev_collector = collector_list[i - 1],\r\n                  prev_pos_param = collector_pos_dict[prev_collector['collector_name']] // x, y\r\n            if (cur_pos_param['x'] < prev_pos_param['x'] + card_width) {\r\n                if (prev_pos_param['y'] === card_height * 0.1) {\r\n                    collector_pos_dict[cur_collector['collector_name']]['y'] = card_height * 1.3\r\n                } else if (prev_pos_param['y'] === card_height * 1.3) {\r\n                    collector_pos_dict[cur_collector['collector_name']]['y'] = card_height * 2.5\r\n                } else if (prev_pos_param['y'] === card_height * 2.5) {\r\n                    collector_pos_dict[cur_collector['collector_name']]['y'] = card_height * 3.7\r\n                } else {\r\n                    collector_pos_dict[cur_collector['collector_name']]['y'] = card_height * 0.1\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 对于“--”进行特殊处理\r\n    collector_pos_dict['--'] = {\r\n        x: timeScale(1820),\r\n        y: card_height * 2.5\r\n    }\r\n    return collector_pos_dict\r\n}","import { render } from \"./CollectorCard.vue?vue&type=template&id=36e815e2&scoped=true\"\nimport script from \"./CollectorCard.vue?vue&type=script&lang=js\"\nexport * from \"./CollectorCard.vue?vue&type=script&lang=js\"\n\nimport \"./CollectorCard.vue?vue&type=style&index=0&id=36e815e2&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-36e815e2\"]])\n\nexport default __exports__","export function jsonCopy(o) {\r\n    return o ? JSON.parse(JSON.stringify(o)) : o;\r\n}","import * as d3 from \"d3\";\r\nimport { jsonCopy } from \"@/utils/copy\";\r\n\r\nlet data_\r\n\r\nexport async function load_data() {\r\n    data_ = await d3.json(\"data/seal_constructed_data.json\")\r\n}\r\n\r\n// 从此函数来获得原始数据\r\nexport function read_data() {\r\n    return jsonCopy(data_)\r\n}","import { render } from \"./Timeline.vue?vue&type=template&id=1e6d7a76&scoped=true\"\nimport script from \"./Timeline.vue?vue&type=script&lang=js\"\nexport * from \"./Timeline.vue?vue&type=script&lang=js\"\n\nimport \"./Timeline.vue?vue&type=style&index=0&id=1e6d7a76&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1e6d7a76\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"overview-container\">\r\n       <div class=\"full-image-container\" id=\"full-image-container\">\r\n            <div v-show=\"imageParam.visible\" class=\"image-scroll-container\">\r\n                <img :src=\"imageSrc.small\" alt=\"Long Image\" class=\"long-image\" id=\"preview-image\"\r\n                    :style=\"{ height: '100%' }\"> <!--transform: `scale(${imageParam.zoom}) translateX(${0}px)`-->\r\n                <svg v-show=\"imageParam.visible\" class=\"seal-checkbox-svg\"></svg>\r\n\r\n                <OverviewCard v-for=\"(item, index) in detailSealInfo\"\r\n                    :seal_detail=\"JSON.parse(JSON.stringify(item))\"\r\n                    :resize_scale=\"resize_scale\"\r\n                    :cardList=\"cardList\"\r\n                ></OverviewCard>\r\n            </div>\r\n       </div>\r\n       <div class=\"thumbnail-container\" id=\"thumbnail-container\">\r\n            <Thumbnail\r\n                :original_painting=\"original_painting\"\r\n            ></Thumbnail> <!--需要computed-->\r\n       </div>\r\n       <svg v-show=\"imageParam.visible\" class=\"overview-transition-svg\"></svg>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst time_duration = 1000,\r\n      timeout_duration = 100\r\n\r\nimport OverviewCard from \"./overview_widgets/OverviewCard.vue\"\r\nimport Thumbnail from \"./overview_widgets/Thumbnail.vue\"\r\n\r\nimport * as Data from \"@/data/Data.js\"\r\nimport * as TypeColor from \"@/theme/type_color\"\r\nimport { jsonCopy } from \"@/utils/copy\"\r\nimport * as DataProcess from \"@/utils/data_process\"\r\nimport * as OverviewFunction from \"@/utils/overview/overview_function\"\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\"\r\n\r\nimport * as Overview2Layout from \"@/utils/transition/overview_and_layout\"\r\n\r\nexport default {\r\n    name: \"Overview\",\r\n    components: {\r\n        OverviewCard,\r\n        Thumbnail\r\n    },\r\n    data() {\r\n        return {\r\n            data: null,\r\n            cardList: [],\r\n            painting_name_en: '', \r\n            imageSrc: {\r\n                origin: null,\r\n                small: null\r\n            },\r\n            imageParam: {\r\n                visible: false,\r\n                offsetX: 0,\r\n                dragging: false,\r\n                zoom: 1,\r\n            },\r\n            resize_scale: 1, // 原始图片的缩放倍数\r\n            resize_scaleX: 1, // X轴方向max-width的缩放倍数\r\n            original_painting: { // 原始图片的加载参数，用于向子组件Thumbnail传参\r\n                complete: false\r\n            },\r\n            fullImageContainerX: 0, // 当前full-image-container的x坐标值, 用于更新thumbnail_rect\r\n        };\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"selection\", \"transition\", \"overlay_duration\", \"painting_pic\"]),\r\n        detailSealInfo: {\r\n            get() {\r\n                const self = this\r\n                const tar = self.selection.entity !== null && self.selection.value\r\n                if (!tar) return []\r\n                let seal_pic_list = []\r\n                // 或许可以考虑添加一些click position的信息\r\n                seal_pic_list = jsonCopy(self.cardList.filter((d) => tar.includes(d['index'])))\r\n                // console.log('Overview中的detailSealInfo', seal_pic_list, self.selection.value)\r\n                return seal_pic_list\r\n            },\r\n        },\r\n    },\r\n    watch: {\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n            if (newValue === 'overview' && newValue !== oldValue) {\r\n                console.log('从其他视图切换到overview视图啦')\r\n                setTimeout(() => { // 需要设置延迟，否则$('.image-scroll-container').width()依然为0\r\n                    self.renderUnselectedLayer() // 在切换到当前视图时需要重新刷新一遍(因为jQuery: $('.image-scroll-container'))\r\n                    self.renderSealRect(self.cardList, self.resize_scale) // 框选印章\r\n                }, timeout_duration)\r\n            }\r\n        },\r\n        imageParam: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                // console.log('ImageParam Updated', newVal)\r\n                console.log(newVal.visible)\r\n                if (newVal.visible) {\r\n                    // OverviewFunction.detectFullImageScroll() // 当图片加载成功时，detect scroll offset\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        selection: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n\r\n            },\r\n            deep: true\r\n        },\r\n        original_painting: { // 实时监听original_painting的变化\r\n            handler: function(newVal, oldVal) {\r\n               \r\n            },\r\n            deep: true\r\n        },\r\n        fullImageContainerX: function(newVal, oldVal) {\r\n            if (newVal !== oldVal)  {\r\n                OverviewFunction.setFullImageContainerX(newVal)\r\n                OverviewFunction.fullImageDragThumbnail()\r\n            }\r\n        },\r\n        transition: {\r\n            handler: function (newVal, _) {\r\n                const self = this\r\n                if (newVal.to !== 'timeline' && newVal.from !== 'timeline') {\r\n                    self.transition_handler(newVal);\r\n                } else {              \r\n                    self.$store.commit(\"changeCurViewForce\", newVal.to)\r\n                }\r\n            },\r\n            deep: true,\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { // 在切换到当前视图时需要重新刷新一遍\r\n            const self = this\r\n            \r\n        },\r\n        getSubSet() { // 使用部分样本进行demo展示\r\n            const self = this\r\n            self.data = {\r\n                \"painting_name\": self.data['painting_name'],\r\n                \"meta_data\": self.data['meta_data'],\r\n                \"collectors\": self.data['collectors'].slice(0, 1)\r\n            }\r\n        },\r\n        detectFullImageScroll() { // 对于上面的高清大图'full-image-container\r\n            const self = this\r\n            // console.log(\"detectImageScroll\")\r\n            let eventDiv = document.getElementById('full-image-container') // 信息卡片container\r\n            eventDiv.addEventListener('scroll', function() { // 实时监听scroll\r\n                // console.log('image-container移动啦, thumbnail也要跟着移动啦', eventDiv.scrollLeft)\r\n               self.fullImageContainerX = eventDiv.scrollLeft\r\n            })\r\n        },\r\n        getPaintingParams() {\r\n            const self = this\r\n            self.imageSrc['origin'] = 'data/' + self.painting_name_en + '.jpg' // image href(local)\r\n            // self.imageSrc['origin'] = 'https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/' + self.painting_name_en + '.jpg'\r\n\r\n            let img_preview = new Image() // 小图片\r\n            img_preview.src = self.imageSrc['small']\r\n            let img = new Image() // 高清大图\r\n            img.src = self.imageSrc['origin']\r\n\r\n            if (img_preview.complete) {\r\n                const pic_width = img_preview.width,\r\n                      pic_height = img_preview.height\r\n                // 目前仅针对long picture\r\n                self.resize_scale = $('.main-panel').height() * 0.88 / pic_height // height of \"full-image-container\" equals to \"main-panel\" * 0.88\r\n                self.resize_scaleX = $('.main-panel').width() / pic_width\r\n                console.log('resize_scale', self.resize_scale)\r\n\r\n                self.imageParam['offsetX'] = -(self.resize_scale * pic_width / 2 - $('.main-panel').width() / 2)     \r\n                self.imageParam['visible'] = true // v-if=\"imageParam.visible\"\r\n\r\n                // setTimeout(() => {\r\n                //     self.renderUnselectedLayer()\r\n                //     self.renderSealRect(self.cardList, self.resize_scale) // 框选印章\r\n                // }, timeout_duration)\r\n            } else {\r\n                img_preview.onload = function() {\r\n                    const pic_width = img_preview.width,\r\n                          pic_height = img_preview.height\r\n                    // 目前仅针对long picture\r\n                    self.resize_scale = $('.main-panel').height() * 0.88 / pic_height // height of \"full-image-container\" equals to \"main-panel\" * 0.88\r\n                    self.resize_scaleX = $('.main-panel').width() / pic_width\r\n                    console.log('resize_scale', self.resize_scale)\r\n\r\n                    self.imageParam['offsetX'] = -(self.resize_scale * pic_width / 2 - $('.main-panel').width() / 2)    \r\n                    self.imageParam['visible'] = true // image-scroll-container\r\n\r\n                    // setTimeout(() => {\r\n                    //     self.renderUnselectedLayer()\r\n                    //     self.renderSealRect(self.cardList, self.resize_scale) // 框选印章\r\n                    // }, timeout_duration)\r\n                }\r\n            }\r\n\r\n            if (img.complete) {\r\n                const pic_width = img.width,\r\n                      pic_height = img.height\r\n                \r\n                // 向store index.js中传值\r\n                self.$store.commit(\"changePaintingPic\", {\r\n                                    loaded: true,\r\n                                    width: pic_width,\r\n                                    height: pic_height\r\n                                })\r\n\r\n                // 目前仅针对long picture\r\n                self.resize_scale = $('.main-panel').height() * 0.88 / pic_height // height of \"full-image-container\" equals to \"main-panel\" * 0.88\r\n                self.resize_scaleX = $('.main-panel').width() / pic_width\r\n                console.log('resize_scale', self.resize_scale)\r\n\r\n                self.imageParam['offsetX'] = -(self.resize_scale * pic_width / 2 - $('.main-panel').width() / 2)\r\n                \r\n                // 对于大图片加载慢的处理方法\r\n                // 1. 当高分辨率图片加载完成后，替换预览图像的src属性\r\n                const previewImage = document.getElementById('preview-image')\r\n                previewImage.src = self.imageSrc['origin']\r\n\r\n                // 2. 当加载完成后再显示(这里在加载完成小图片的时候就已经visible = true了)\r\n                // self.imageParam['visible'] = true // v-if=\"imageParam.visible\"\r\n\r\n                self.original_painting = img // 用于向子组件Thumbnail.vue的original_painting传参\r\n\r\n                setTimeout(() => {\r\n                    self.renderUnselectedLayer()\r\n                    self.renderSealRect(self.cardList, self.resize_scale) // 框选印章\r\n                    \r\n                }, timeout_duration)\r\n            } else {\r\n                img.onload = function() {\r\n                    const pic_width = img.width,\r\n                          pic_height = img.height\r\n\r\n                    // 向store index.js中传值\r\n                    self.$store.commit(\"changePaintingPic\", {\r\n                                        loaded: true,\r\n                                        width: pic_width,\r\n                                        height: pic_height\r\n                                    })\r\n\r\n                    // 目前仅针对long picture\r\n                    self.resize_scale = $('.main-panel').height() * 0.88 / pic_height // height of \"full-image-container\" equals to \"main-panel\" * 0.88\r\n                    self.resize_scaleX = $('.main-panel').width() / pic_width\r\n                    console.log('resize_scale', self.resize_scale)\r\n\r\n                    self.imageParam['offsetX'] = -(self.resize_scale * pic_width / 2 - $('.main-panel').width() / 2)\r\n\r\n                    // 对于大图片加载慢的处理方法\r\n                    // 1. 当高分辨率图片加载完成后，替换预览图像的src属性\r\n                    const previewImage = document.getElementById('preview-image')\r\n                    previewImage.src = self.imageSrc['origin']\r\n                    // 2. 当加载完成后再显示(这里在加载完成小图片的时候就已经visible = true了)\r\n                    // self.imageParam['visible'] = true // image-scroll-container\r\n\r\n                    self.original_painting = img // 用于向子组件Thumbnail.vue的original_painting传参\r\n\r\n                    setTimeout(() => {\r\n                        self.renderUnselectedLayer()\r\n                        self.renderSealRect(self.cardList, self.resize_scale) // 框选印章\r\n                    }, timeout_duration)\r\n                }\r\n            }\r\n        },\r\n        // 只能写在vue组件中，因为需要向store的index.js中传值\r\n        renderSealRect(seal_mapped_list, resize_scale) { // 框选印章\r\n            const self = this\r\n            let svg = d3.select('.seal-checkbox-svg') // select the svg item\r\n            svg.selectAll('.seal_rect_group').remove()\r\n            let group = svg.append('g').attr('class', 'seal_rect_group')\r\n            let seal_rect_group = group.selectAll('g')\r\n                                        .data(seal_mapped_list)\r\n                                        .join('g')\r\n                                        .attr('id', (d) => `${d['seal_name']}-${d['index']}-rect`)\r\n            \r\n            seal_rect_group.append('rect')\r\n                            .attr('x', (d) => d['x'] * resize_scale - d['width'] * resize_scale / 25)\r\n                            .attr('y', (d) => d['y'] * resize_scale - d['height'] * resize_scale / 25)\r\n                            .attr('height', (d) => d['height'] * resize_scale)\r\n                            .attr('width', (d) => d['width'] * resize_scale)\r\n                            .attr('fill', 'white')\r\n                            .attr('fill-opacity', 0)\r\n                            .attr('stroke', 'red')\r\n                            .style('cursor', 'pointer')\r\n                            .on('click', (event) => {\r\n                                // console.log('当前click印章图片', event.srcElement.__data__.seal_name, event.srcElement.__data__.index)\r\n                                let selected_seal_pic_list = self.selection['value']\r\n                                if (selected_seal_pic_list.includes(event.srcElement.__data__.index)) {\r\n                                    const del_index = selected_seal_pic_list.indexOf(event.srcElement.__data__.index)\r\n                                    if (del_index !== -1) {\r\n                                        selected_seal_pic_list.splice(del_index, 1);\r\n                                    }\r\n                                } else {\r\n                                    // 没有操作\r\n                                }\r\n                                selected_seal_pic_list = [...new Set(selected_seal_pic_list)] // 去重\r\n                                selected_seal_pic_list.push(event.srcElement.__data__.index)\r\n                                self.$store.commit(\"changeSelection\", {\r\n                                    entity: \"seal_pic\",\r\n                                    value: selected_seal_pic_list\r\n                                })\r\n                            })\r\n\r\n        },\r\n        renderUnselectedLayer() {\r\n            const self = this\r\n            let svg = d3.select('.seal-checkbox-svg') // select the svg item\r\n            svg.selectAll('.unselected_layer').remove()\r\n            let unselected_layer = svg.append('g').attr('class', 'unselected_layer')\r\n            unselected_layer.append('rect')\r\n                            .attr('x', 0)\r\n                            .attr('width', $('.image-scroll-container').width())\r\n                            .attr('height', $('.image-scroll-container').height())\r\n                            .attr(\"fill-opacity\", 0)\r\n                            .on('click', (event) => {\r\n                                console.log('Click unselected layer!')\r\n                                self.$store.commit(\"changeSelection\", {\r\n                                    entity: null,\r\n                                    value: []\r\n                                })\r\n                            })\r\n        },\r\n        transition_handler(trans) {\r\n            console.log(trans);\r\n            const self = this\r\n\r\n            const fr = trans.from;\r\n            const to = trans.to;\r\n            const st = trans.state;\r\n\r\n            if (fr === \"overview\" && st === \"out\") { // 从overview视图往外走\r\n                console.log(\"transition out\");\r\n\r\n                Overview2Layout.overview2layout(time_duration * 6, 'from', self.selection, self.cardList, self.painting_pic)\r\n\r\n                setTimeout(() => {\r\n                    self.$store.commit(\"transCompleted\", null)\r\n                }, time_duration * 6)\r\n            } else if (to === \"overview\" && st === \"out\") {\r\n                console.log(\"preparing for transition\")\r\n                \r\n            } else if (to === 'overview' && st === 'overlay') { // 2个视图更新重叠\r\n            \r\n\r\n            } else if (to === \"overview\" && st === \"in\") { // 正在从其他视图切换到overview视图\r\n                console.log(\"transition in\");\r\n                setTimeout(() => {\r\n                    self.$store.commit(\"transCompleted\", null);\r\n                }, time_duration);\r\n                // this.initializeTimeline()\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        console.log('进入到overview啦')\r\n\r\n        // 初始化painting_name_en\r\n        that.painting_name_en = DataProcess.getPaintingNameEn(that.painting_name)\r\n\r\n        // that.imageSrc['small'] = 'data/' + that.painting_name_en + '_small.jpg' // local\r\n        that.imageSrc['small'] = 'https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/' + that.painting_name_en + '_small.jpg' // online\r\n        \r\n        that.getPaintingParams()\r\n        let whole_data = Data.read_data() // 首先读入总体的\r\n        for (let i in whole_data) {\r\n            if (whole_data[i]['painting_name'] === that.painting_name) {\r\n                that.data = whole_data[i]\r\n            }\r\n        }\r\n        // that.getSubSet() // 用于测试的demo\r\n        that.data = DataProcess.getCollectorColor(that.data)\r\n        that.cardList = SealCardFunc.SealCardMapping(that.data) // mapped seal pictures into list\r\n        // console.log(\"seal_data\", that.data)\r\n\r\n        that.detectFullImageScroll()\r\n        that.initialize();\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.overview-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0%;\r\n    top: 0%;\r\n\r\n    $full-image-panel-height: 88%;\r\n    $thumbnail-panel-height: 10%;\r\n    .full-image-container {\r\n        position: absolute;\r\n        left: 0%;\r\n        width: 100%;\r\n        top: 0%;\r\n        height: $full-image-panel-height;\r\n\r\n        // background-color: rgba(91, 203, 23, 0.15);\r\n        overflow-x: auto;\r\n        z-index: 2;\r\n        .image-scroll-container {\r\n            position: absolute;\r\n            top: 0%;\r\n            height: 100%;\r\n            // .long-image {\r\n            //     position: absolute;\r\n            //     top: 0%;\r\n            // }\r\n            .seal-checkbox-svg {\r\n                position: absolute;\r\n                top: 0%;\r\n                left: 0%;\r\n                width: 100%;\r\n                height: 100%;\r\n            }\r\n        }\r\n        \r\n    }\r\n    .thumbnail-container {\r\n        position: absolute;\r\n        left: 0.5%;\r\n        width: 99%;\r\n        top: $full-image-panel-height + 1%;\r\n        height: $thumbnail-panel-height;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n\r\n        overflow-x: auto;\r\n        z-index: 2;\r\n    }\r\n    .overview-transition-svg {\r\n        position: absolute;\r\n        top: 0%;\r\n        left: 0%;\r\n        height: 100%;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n\r\n</style>\r\n","<template>\r\n    <el-dialog v-model=\"fullImageModel.show\" :title=\"fullImageModel.label\" top=\"5vh\" width=\"80%\">\r\n        <div style=\"height: 75vh; width: 70%;\">\r\n            <img :src=\"fullImageModel.src\" style=\"width: 100%; height: 100%; object-fit: contain;\">\r\n        </div>\r\n    </el-dialog>\r\n    <div class=\"overview-seal-card\" v-show=\"sealContainerShow\"\r\n        :style=\"{left: (seal_detail['x'] + seal_detail['width']) * resize_scale + 'px', top: seal_detail['y'] * resize_scale + 'px',\r\n                 height: containerParam.card_height * 1.1 + 'px', width: (containerParam.card_width * 0.9 + containerParam.unit_pixel * 4) + 'px'}\">\r\n        <div class=\"seal-index-rect\" :style=\"{paddingLeft: containerParam.unit_pixel * 2 + 'px', paddingRight: containerParam.unit_pixel * 2 + 'px', height: containerParam.unit_pixel * 18 + 'px', fontSize: containerParam.unit_pixel * 16 + 'px'}\">{{ seal_detail['index'] }}</div>\r\n        <div class=\"card-rect\" \r\n            :style=\"{top: containerParam.card_height * 0.05 + 'px', height: containerParam.card_height + 'px', left: containerParam.unit_pixel * 0 + 'px', width: containerParam.card_width * 0.9 + 'px'}\">\r\n            <div class=\"seal-name\" \r\n                :style=\"{fontSize: seal_detail.seal_name.length <= 6 ? containerParam.card_width * 0.9 / 6.5 + 'px' : containerParam.card_width * 0.9 / (seal_detail.seal_name.length + 0.5) + 'px',\r\n                        top: containerParam.unit_pixel * 15 + 'px'}\">\r\n                    {{ seal_detail['seal_name'] }}\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * (45 - 2) + 'px', height: containerParam.unit_pixel * (60 + 4) + 'px', left: '2.5%', width: '95%', justifyContent: 'center'}\">\r\n                <!-- <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\" @click=\"clickPrevNext('prev')\">\r\n                    <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M13.877 2L6.78967 9.76364L13.877 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M8.96387 2L1.87658 9.76364L8.96387 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                </div>\r\n                <div class=\"seal-pic\"\r\n                    :style=\"{height: containerParam.unit_pixel * 60 + 'px', width: containerParam.unit_pixel * 60 + 'px'}\">\r\n                    <img :src=\"seal_detail.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0.1em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                        @click=\"fullImageModel.show =true, fullImageModel.src=seal_detail.image_href, fullImageModel.label = seal_detail.seal_name\">\r\n                </div>\r\n                <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\" @click=\"clickPrevNext('next')\">\r\n                    <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M2 2L9.08728 9.76364L2 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M6.91309 2L14.0004 9.76364L6.91309 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                </div> -->\r\n                <div class=\"seal-pic\"\r\n                    :style=\"{height: containerParam.unit_pixel * 75 + 'px', width: containerParam.unit_pixel * 75 + 'px'}\">\r\n                    <img :src=\"seal_detail.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                        @click=\"fullImageModel.show =true, fullImageModel.src=seal_detail.image_href, fullImageModel.label = seal_detail.seal_name\">\r\n                </div>\r\n            </div>\r\n            <div class=\"seal-page\"\r\n                :style=\"{top: containerParam.unit_pixel * (105 + 2) + 'px', height: containerParam.unit_pixel * (120 - 107 - 5) + 'px', left: '2.5%', width: '95%', fontSize: containerParam.unit_pixel * 11 + 'px'}\">\r\n                {{ (seal_detail['series_list'].indexOf(seal_detail['index']) + 1) + '/' + seal_detail['series_list'].length }}\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 120 + 'px', left: '2.5%', width: '95%'}\">\r\n                <div class=\"agent-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                    <div class=\"agent-icon\">\r\n                        <svg width=\"11\" height=\"14\" viewBox=\"0 0 11 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z\" stroke=\"#8F7B6C\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"agent-name\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ seal_detail['collector_name'] }}</div>\r\n                </div>\r\n                <div class=\"life-span\" :style=\"{fontSize: containerParam.unit_pixel * 11 + 'px'}\">{{ seal_detail['life_span'][0].toString() + '-' + seal_detail['life_span'][1].toString() }}</div>\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 135 + 'px', left: '2.5%', width: '95%'}\">\r\n                <div class=\"agent-time-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                    <div class=\"time-icon\">\r\n                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z\" fill=\"#8F7B6C\"/>\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"time-span\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ seal_detail['stamped_year'][0].toString() + '-' + seal_detail['stamped_year'][1].toString() }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as OverviewFunction from \"@/utils/overview/overview_function\"\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\nconst time_duration = 1000,\r\n      timeout_duration = 100,\r\n      seal_card_num = 12\r\n\r\n\r\nexport default {\r\n    name: \"OverviewCard\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            containerParam: { // 当前绘制窗口的宽度\r\n                x: 0,\r\n                width: 0,\r\n                card_width: 0, // includes the gap between seal cards\r\n                card_height: 0, // card height\r\n                unit_pixel: 0, // 单位大小\r\n                sealIconSize: 1// seal icon的大小\r\n            },\r\n            sealContainerShow: false,\r\n            fullImageModel: {\r\n                show: false,\r\n                src: null,\r\n                label: null\r\n            },\r\n        };\r\n    },\r\n    props: [\"seal_detail\", \"resize_scale\", \"cardList\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\"]),\r\n        \r\n    },\r\n    watch: {\r\n        seal_detail: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                // console.log(\"seal_detail\", newVal)\r\n            },\r\n            deep: true\r\n        },\r\n        resize_scale: function(newVal, oldVal) {\r\n\r\n        },\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n            if (newValue === 'overview') {\r\n                setTimeout(() => { // 需要设置延迟\r\n                    self.sealContainerShow = true\r\n                }, timeout_duration)\r\n            } else {\r\n                self.sealContainerShow = false\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() {\r\n        },\r\n        renderSealCard() {\r\n            const self = this\r\n            // console.log(self.seal_detail, self.resize_scale)\r\n            setTimeout(() => {\r\n                self.containerParam = SealCardFunc.getSealCardContainerSize() // {x: , width: }\r\n\r\n                self.containerParam['card_width'] = self.containerParam['width'] / seal_card_num\r\n                self.containerParam['card_height'] = self.containerParam['card_width'] * 0.9 * 175 / 120\r\n                self.containerParam['unit_pixel'] = self.containerParam['card_height'] / 175\r\n\r\n                // console.log('self.containerParam', self.containerParam)\r\n\r\n                if (self.cur_view === 'overview') {\r\n                    self.sealContainerShow = true\r\n                }\r\n            }, timeout_duration)\r\n        },\r\n        clickPrevNext(button_choice) {\r\n            const self = this\r\n            let selected_seal_pic_list = OverviewFunction.clickPrevNextButton(self.seal_detail, self.cardList, self.resize_scale, self.selection, button_choice)\r\n            self.$store.commit(\"changeSelection\", {\r\n                entity: \"seal_pic\",\r\n                value: selected_seal_pic_list\r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        that.initialize()\r\n        that.renderSealCard()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.overview-seal-card {\r\n    position: absolute;\r\n    // color: #8F7B6C;\r\n    // border: 2px solid #8F7B6C;\r\n    // border-radius: 5px;\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    overflow-y: auto;\r\n    .seal-index-rect {\r\n        position: absolute;\r\n        color: white;\r\n        background-color: #A56752;\r\n        z-index: 1;\r\n    }\r\n    .card-rect {\r\n        position: absolute;\r\n        background-color: #FFF8EB;\r\n        color: #8F7B6C;\r\n        border: 2px solid #8F7B6C;\r\n        // border-radius: 5px;\r\n        // clip-path: polygon(0% 0%, 25% 0%, 25% 6%, 80% 6%, 80% 0%, 100% 0%, 100% 100%, 0% 100%); // 上开口\r\n        // clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 75% 100%, 75% 95%, 25% 95%, 25% 100%, 0% 100%); // 下开口(暂时去掉，因为rect有纯色填充)\r\n        .seal-name{\r\n            display: flex; // new\r\n            // flex-direction: row;\r\n            text-align: center;\r\n            align-items: center;\r\n            justify-content: center; // new\r\n\r\n            /*font-size:  $rem + 'px';*/\r\n            font-weight: bold;\r\n            width: 100%;\r\n            position: relative;\r\n            color: #724A2B;\r\n        }\r\n        .seal-page {\r\n            position: absolute;\r\n            // color: #8F7B6C;\r\n        }\r\n        .info-row {\r\n            position: absolute;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: space-between; // 多个item时使用（加左右箭头时）\r\n            // justify-content: center; \r\n            align-items: center; // new\r\n            .agent-group {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center; // new\r\n            }\r\n            .agent-time-group {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center; // new\r\n            }\r\n            .seal-pic img {\r\n                cursor: pointer;\r\n            }\r\n        }\r\n        .seal-page {\r\n            position: absolute;\r\n            left: 2.5%;\r\n            width: 95%;\r\n            border-bottom: 1.3px solid #724A2B; /* 下划线样式，可以根据需要更改颜色、宽度和样式 */\r\n            padding-bottom: 5px; /* 可选：为文本添加一些底部填充，以使下划线距离文本更远 */\r\n        }\r\n        .seal-icon-group {\r\n            position: absolute;\r\n            left: 2.5%;\r\n            width: 95%;\r\n            overflow-y: auto;\r\n            // background-color: rgba(247, 171, 0, 0.15);\r\n        }\r\n    }\r\n    .stamped-year {\r\n        position: absolute;\r\n        color: #724A2B;\r\n    }    \r\n}\r\n\r\n</style>\r\n","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\n// detect ThumbnailRect dragging\r\nexport let export_thumbnail_rect_x = 0 // .vue文件中export_thumbnail_rect_x改变后会实时更新\r\nexport let export_full_image_container_x = 0 // .vue文件中export_full_image_container_x改变后会实时更新\r\n// 用于导出export_thumbnail_rect_x并赋予set property进行修改\r\nexport function setThumbnailRectX(value) {\r\n    export_thumbnail_rect_x = value\r\n}\r\nexport function setFullImageContainerX(value) {\r\n    export_full_image_container_x = value\r\n}\r\n\r\n\r\nexport function detectFullImageScroll() { // 对于上面的高清大图'full-image-container\r\n    console.log(\"detectImageScroll\")\r\n    let eventDiv = document.getElementById('full-image-container') // 信息卡片container\r\n    eventDiv.addEventListener('scroll', function() { // 实时监听scroll\r\n        // console.log('image-container移动啦', eventDiv.scrollLeft)\r\n    })\r\n}\r\n\r\nexport function thumbnailDragFullImage() { // 下方缩略图的rect带动上方高清大图\r\n    const image_thumbnail_ratio = $('.long-image').width() / $('.thumbnail-image').width()\r\n    // 获取要滚动的 div 元素\r\n    const fullImageContainer = document.getElementById('full-image-container')\r\n    // 滚动到指定位置\r\n    fullImageContainer.scrollLeft = export_thumbnail_rect_x * image_thumbnail_ratio\r\n}\r\n\r\nexport function fullImageDragThumbnail() { // 上方高清大图带动下方缩略图的rect\r\n    const thumbnail_image_ratio = $('.thumbnail-image').width() / $('.long-image').width()\r\n    d3.select('#thumbnail_rect').attr('x', export_full_image_container_x *  thumbnail_image_ratio)\r\n}\r\n\r\n// click seal card的\"prev\", \"next\" button后，scrollTo下一个/上一个seal card所在view\r\nexport function clickPrevNextButton(cur_seal, seal_mapped_list, resize_scale, selection, button_choice) { // button_choice: \"prev\", \"next\"\r\n    // cur_seal: 当前选中的seal pic detail\r\n    // seal_mapped_list: 全部seal_pic_list\r\n    // 获取要滚动的 div 元素\r\n    const fullImageContainer = document.getElementById('full-image-container')\r\n    console.log('cur_scrollLeft', fullImageContainer.scrollLeft)\r\n    // 可以显示的区域 0.2 - 0.8\r\n    const container_width = $('.full-image-container').width(),\r\n          container_x = fullImageContainer.scrollLeft\r\n    const cur_pic_offset = cur_seal['series_list'].indexOf(cur_seal['index']) // 当前seal pic所在相同seal name list中的偏移\r\n    \r\n    let another_pic_index = null, // prev_pic_index 或 next_pic_index\r\n        another_pic_param = null // prev_pic_param 或 next_pic_param\r\n    if (button_choice === 'prev' && cur_pic_offset > 0) {\r\n        // console.log('上一个seal pic!')\r\n        another_pic_index = cur_seal['series_list'][cur_pic_offset - 1]\r\n    } else if (button_choice === 'next' && cur_pic_offset < cur_seal['series_list'].length - 1) {\r\n        // console.log('下一个seal pic!')\r\n        another_pic_index = cur_seal['series_list'][cur_pic_offset + 1]      \r\n    }\r\n\r\n    another_pic_param = seal_mapped_list.filter((d) => d['index'] === another_pic_index)[0]\r\n    if (!(another_pic_param['x'] * resize_scale > container_x + container_width * 0.2 && another_pic_param['x'] * resize_scale < container_x + container_width * 0.8)) {\r\n        let scroll_left = another_pic_param['x'] * resize_scale - container_width / 2\r\n        fullImageContainer.scrollLeft = scroll_left < 0 ? 0 : (scroll_left + container_width > $('.image-scroll-container').width() ? $('.image-scroll-container').width() - container_width : scroll_left)\r\n    } else {\r\n        // 不用进行任何操作\r\n    }\r\n\r\n    let selection_value = selection.value // list\r\n    if (selection.entity === 'seal_pic' && !selection_value.includes(another_pic_index)) {\r\n        selection_value = [...new Set(selection_value)]\r\n        selection_value.push(another_pic_index)\r\n    } else {\r\n        // 没有操作\r\n    }\r\n    return selection_value\r\n    // 返回需要更改的selection.value list\r\n}\r\n","import { render } from \"./OverviewCard.vue?vue&type=template&id=5bc1ffa2&scoped=true\"\nimport script from \"./OverviewCard.vue?vue&type=script&lang=js\"\nexport * from \"./OverviewCard.vue?vue&type=script&lang=js\"\n\nimport \"./OverviewCard.vue?vue&type=style&index=0&id=5bc1ffa2&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5bc1ffa2\"]])\n\nexport default __exports__","<template>\r\n    <img :src=\"imageSrc.small\" alt=\"Thumbnail Image\" class=\"thumbnail-image\" id=\"thumbnail-image\"\r\n        :style=\"{ maxHeight: '100%', maxWidth: '100%' }\">\r\n    <svg v-show=\"original_painting.complete\" class=\"thumbnail-rect-svg\" id=\"thumbnail-rect-svg\"></svg>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\n\r\nimport * as DataProcess from \"@/utils/data_process\"\r\nimport * as OverviewFunction from \"@/utils/overview/overview_function\"\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\nconst time_duration = 1000,\r\n      timeout_duration = 100,\r\n      seal_card_num = 12\r\n\r\n\r\nexport default {\r\n    name: \"Thumbnail\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            imageSrc: {\r\n                origin: null,\r\n                small: null\r\n            },\r\n            painting_name_en: '',\r\n            thumbnail_resize_scale: 1,\r\n            thumbnail_rect_x: 0, // 当前thumbnail_rect的x坐标值, 用于更新full-image-container\r\n        }\r\n    },\r\n    props: [\"original_painting\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\"]),\r\n        \r\n    },\r\n    watch: {\r\n        cur_view: function(newVal, oldVal) {\r\n            const self = this;\r\n            if (newVal === 'overview' && newVal !== oldVal) {\r\n                // 使用 $nextTick 来确保 DOM 更新完成\r\n                this.$nextTick(() => {\r\n                    // 定义一个函数来检查宽度是否大于 0\r\n                    const checkWidth = () => {\r\n                        if ($('.thumbnail-rect-svg').width() > 0) {\r\n                            // 宽度大于 0 时执行需要的操作\r\n                            self.renderThumbnailRect(0, 0, 1)\r\n                        } else {\r\n                            // 宽度不大于 0 时继续检查\r\n                            setTimeout(checkWidth, timeout_duration) // 每 timeout_duration(100) 毫秒检查一次\r\n                        }\r\n                    }\r\n                    // 初始调用检查宽度函数\r\n                    checkWidth()\r\n                })\r\n            }\r\n        },\r\n        resize_scale: function(newVal, oldVal) {\r\n\r\n        },\r\n        original_painting: function(newVal, oldVal) {\r\n            const self = this\r\n            if (newVal.complete && self.cur_view === 'overview') {\r\n                self.getThumbnailParams(newVal)\r\n                self.renderThumbnailRect(0, 0, 1)\r\n            }\r\n        },\r\n        thumbnail_rect_x: function(newVal, oldVal) {\r\n            if (newVal !== oldVal)  {\r\n                OverviewFunction.setThumbnailRectX(newVal)\r\n                OverviewFunction.thumbnailDragFullImage()\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() {\r\n        },\r\n        getThumbnailParams(original_img) { // 在original_img.complete的情况下执行该操作\r\n            const self = this\r\n            self.imageSrc['origin'] = 'data/' + self.painting_name_en + '.jpg' // image href(local)\r\n            // self.imageSrc['origin'] = 'https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/' + self.painting_name_en + '.jpg' // image href (online)\r\n            self.thumbnail_resize_scale = $('.main-panel').height() * 0.1 / original_img.height // $('.thumbnail-container') = $('main-panel') * 0.1\r\n            \r\n            self.imageSrc['origin'] = original_img.src\r\n            // 1. 当高分辨率图片加载完成后，替换预览图像的src属性\r\n            const previewImage = document.getElementById('thumbnail-image')\r\n                  previewImage.src = self.imageSrc['origin']\r\n        },\r\n        renderThumbnailRect(default_x_offset, default_y_offset, default_zoom = 1) { // 对于下面的缩略图'thumbnail-container'\r\n            const self = this\r\n            let width = $('.thumbnail-rect-svg').width(),\r\n                height = $('.thumbnail-rect-svg').height(),\r\n                rect_aspect_ratio = $('.full-image-container').width() / $('.full-image-container').height()\r\n            d3.select('.thumbnail-rect-svg').selectAll('g').remove()\r\n            let thumbnail_rect_group = d3.select('.thumbnail-rect-svg')\r\n                                            .append('g')\r\n            const rect = thumbnail_rect_group.append('rect')\r\n                                                .attr('x', default_x_offset)\r\n                                                .attr('y', default_y_offset)\r\n                                                .attr('width', height * rect_aspect_ratio / default_zoom)\r\n                                                .attr('height', height / default_zoom)\r\n                                                .attr('fill', 'white')\r\n                                                .attr('fill-opacity', 0)\r\n                                                .attr('stroke', 'red')\r\n                                                .attr('id', 'thumbnail_rect')\r\n            \r\n            // 创建一个拖动处理器\r\n            let cur_event2rect_offset // 当前鼠标相对于rect的偏移距离\r\n            const drag = d3.drag()\r\n                            .on(\"start\", (event) => {\r\n                                // 拖动开始时的处理\r\n                                rect.style(\"cursor\", \"grabbing\")\r\n                                cur_event2rect_offset = event.x - Number(rect.attr('x')) // 当前鼠标相对于rect本身的偏移值\r\n                            })\r\n                            .on(\"drag\", (event) => {\r\n                                // 拖动过程中的处理\r\n                                const newX = event.x\r\n                            \r\n                                // console.log(event.x, rect.attr('x'), newX - cur_event2rect_offset)\r\n                                if (newX - cur_event2rect_offset < 0) { // 小于左边界\r\n                                    // console.log('小于左边界')\r\n                                    rect.attr(\"x\", 0)\r\n                                } else if (newX - cur_event2rect_offset + height * rect_aspect_ratio / default_zoom > width) { // 大于右边界\r\n                                    // console.log(\"大于右边界\")\r\n                                    rect.attr(\"x\", width - height * rect_aspect_ratio / default_zoom)\r\n                                } else { // 正常情况\r\n                                    // console.log(\"normal\")\r\n                                    rect.attr(\"x\", newX - cur_event2rect_offset)\r\n                                }\r\n                                self.thumbnail_rect_x = Number(rect.attr('x'))\r\n                            })\r\n                            .on(\"end\", () => {\r\n                                // 拖动结束时的处理\r\n                                rect.style(\"cursor\", \"grab\")\r\n                            })\r\n            // 将拖动处理器应用到矩形元素\r\n            drag(rect)\r\n        }\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        console.log('进入到overview啦')\r\n\r\n        // 初始化painting_name_en\r\n        that.painting_name_en = DataProcess.getPaintingNameEn(that.painting_name)\r\n        // that.imageSrc['small'] = 'data/' + that.painting_name_en + '_small.jpg' // local\r\n        that.imageSrc['small'] = 'https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/' + that.painting_name_en + '_small.jpg' // online\r\n\r\n        that.initialize()\r\n\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.thumbnail-rect-svg {\r\n    position: absolute;\r\n    top: 0%;\r\n    left: 0%;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n</style>\r\n","import { render } from \"./Thumbnail.vue?vue&type=template&id=fbb503da&scoped=true\"\nimport script from \"./Thumbnail.vue?vue&type=script&lang=js\"\nexport * from \"./Thumbnail.vue?vue&type=script&lang=js\"\n\nimport \"./Thumbnail.vue?vue&type=style&index=0&id=fbb503da&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-fbb503da\"]])\n\nexport default __exports__","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as overviewFunc from \"@/utils/overview/overview_function\"\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n};\r\n\r\nexport let exportCardListInLayout = {} // 读取的是Layout.vue中动态变化的cardList值\r\nexport function setExportcardListInLayout(value) {\r\n    exportCardListInLayout = value\r\n}\r\n\r\n// duration can be divided into 3 parts:\r\n// copy duration(1000), move duration(2000), overlay duration(1000)\r\nexport function overview2layout(time_duration, transition_direction, selection, seal_mapped_list, painting_pic) { // time_duration = 4000\r\n    // define the time duration\r\n    const copy_duration = time_duration / 3,\r\n          move_duration = time_duration / 3,\r\n          overlay_duration = time_duration / 3\r\n\r\n    const overview_resize_scale = $('.main-panel').height() * 0.88 / painting_pic['height'],\r\n          container_scrollLeft = document.getElementById('full-image-container').scrollLeft\r\n    // copy duration\r\n    let svg = d3.select('.overview-transition-svg') // select the svg item\r\n    svg.selectAll('.transition_layer').remove()\r\n    let transition_layer = svg.append('g').attr('class', 'transition_layer')\r\n    let image_group = transition_layer.append('g')\r\n                                        .attr('class', 'image-group')\r\n    console.log('seal_mapped_list in transition', seal_mapped_list)\r\n    let seal_image = image_group.selectAll('.seal-image-overview')\r\n                                .data(seal_mapped_list)\r\n                                .enter()\r\n                                .append('image')\r\n                                .attr('class', 'seal-image-overview')\r\n                                .attr('xlink:href', (d) => d['image_href']) // 设置图片的链接\r\n                                .attr('width', (d) => d['width'] * overview_resize_scale) // 设置图片的宽度\r\n                                .attr('height', (d) => d['height'] * overview_resize_scale) // 设置图片的高度\r\n                                .attr('x', (d) => d['x'] * overview_resize_scale - container_scrollLeft) // 设置图片的 x 坐标\r\n                                .attr('y', (d) => d['y'] * overview_resize_scale) // 设置图片的 y 坐标\r\n    // set the opacity of background image && rect group in overview to 0\r\n    d3.select(`#full-image-container`)\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 0)\r\n    d3.select(`#thumbnail-container`)\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 0)\r\n    d3.select('.layout-container')\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 1)\r\n\r\n    let cardList = seal_mapped_list.map(d => exportCardListInLayout.find(obj => obj['index'] === d['index'])) // 将2个array之间的index进行对齐\r\n\r\n    setTimeout(() => { // start the move_duration\r\n        seal_image.transition()\r\n                    .duration(move_duration)\r\n                    .attr('x', (d, i) => cardList[i]['layout_params']['x'])\r\n                    .attr('y', (d, i) => cardList[i]['layout_params']['y'])\r\n                    .attr('width', (d, i) => cardList[i]['layout_params']['width'])\r\n                    .attr('height', (d, i) => cardList[i]['layout_params']['height'])\r\n    }, copy_duration)\r\n    \r\n    setTimeout(() => {\r\n        // debugger\r\n    }, copy_duration + move_duration)\r\n\r\n    setTimeout(() => {\r\n        svg.selectAll('.transition_layer').remove()\r\n    }, time_duration)\r\n}\r\n\r\nexport function layout2overview(time_duration, transition_direction, selection, seal_mapped_list, painting_pic) {\r\n    // define the time duration\r\n    const copy_duration = time_duration / 3,\r\n          move_duration = time_duration / 3,\r\n          overlay_duration = time_duration / 3\r\n\r\n    // copy duration\r\n    let svg = d3.select('.layout-transition-svg') // select the svg item\r\n    svg.selectAll('.transition_layer').remove()\r\n    let transition_layer = svg.append('g').attr('class', 'transition_layer')\r\n    let image_group = transition_layer.append('g')\r\n                                        .attr('class', 'image-group')\r\n    console.log('seal_mapped_list in transition', seal_mapped_list)\r\n\r\n    let cardList = seal_mapped_list.map(d => exportCardListInLayout.find(obj => obj['index'] === d['index'])) // 将2个array之间的index进行对齐\r\n    const overview_resize_scale = $('.main-panel').height() * 0.88 / painting_pic['height'],\r\n          container_scrollLeft = overviewFunc.export_full_image_container_x\r\n\r\n    let seal_image = image_group.selectAll('.seal-image-overview')\r\n                                .data(seal_mapped_list)\r\n                                .enter()\r\n                                .append('image')\r\n                                .attr('class', 'seal-image-overview')\r\n                                .attr('xlink:href', (d) => d['image_href']) // 设置图片的链接\r\n                                .attr('x', (d, i) => cardList[i]['layout_params']['x'])\r\n                                .attr('y', (d, i) => cardList[i]['layout_params']['y'])\r\n                                .attr('width', (d, i) => cardList[i]['layout_params']['width'])\r\n                                .attr('height', (d, i) => cardList[i]['layout_params']['height'])\r\n    // set the opacity of background image && rect group in layout to 0\r\n    d3.selectAll('.layout-container')\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 0)\r\n    d3.select(`#full-image-container`)\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 1)\r\n    d3.select(`#thumbnail-container`)\r\n        .transition()\r\n        .duration(copy_duration)\r\n        .style(\"opacity\", 1)\r\n\r\n    setTimeout(() => { // start the move_duration\r\n        seal_image.transition()\r\n                    .duration(move_duration)\r\n                    .attr('width', (d) => d['width'] * overview_resize_scale) // 设置图片的宽度\r\n                    .attr('height', (d) => d['height'] * overview_resize_scale) // 设置图片的高度\r\n                    .attr('x', (d) => d['x'] * overview_resize_scale - container_scrollLeft) // 设置图片的 x 坐标\r\n                    .attr('y', (d) => d['y'] * overview_resize_scale) // 设置图片的 y 坐标\r\n    }, copy_duration)\r\n    \r\n    setTimeout(() => {\r\n        // debugger\r\n    }, copy_duration + move_duration)\r\n\r\n    setTimeout(() => {\r\n        svg.selectAll('.transition_layer').remove()\r\n    }, time_duration)\r\n}","import { render } from \"./Overview.vue?vue&type=template&id=dce95496&scoped=true\"\nimport script from \"./Overview.vue?vue&type=script&lang=js\"\nexport * from \"./Overview.vue?vue&type=script&lang=js\"\n\nimport \"./Overview.vue?vue&type=style&index=0&id=dce95496&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dce95496\"]])\n\nexport default __exports__","<template>\r\n    <el-dialog v-model=\"fullImageModel.show\" :title=\"fullImageModel.label\" top=\"5vh\" width=\"80%\">\r\n        <div style=\"height: 75vh; width: 70%;\">\r\n            <img :src=\"fullImageModel.src\" style=\"width: 100%; height: 100%; object-fit: contain;\">\r\n        </div>\r\n    </el-dialog>\r\n    <div v-show=\"cur_view === 'layout'\" class=\"layout-container\" id=\"layout-container\">\r\n        <div v-if=\"showSealDiv\" v-for=\"(item, index) in cardList\" :key=\"index\" class=\"seal-image-container\"\r\n            :style=\"{width: item.layout_params.width + 'px', height: item.layout_params.height + 'px', left: item.layout_params.x + 'px', top: item.layout_params.y + 'px'}\">\r\n            <!-- <img :src=\"item.image_href\" class=\"seal-image\" :id=\"'seal-image-layout-' + item.index\"\r\n                @click=\"fullImageModel.show =true, fullImageModel.src=item.image_href, fullImageModel.label = item.seal_name\"> -->\r\n            <img :src=\"item.image_href\" class=\"seal-image\" :id=\"'sealImageLayout-' + item.index\"\r\n                @click=\"showSealInfoCard\">\r\n        </div>\r\n        <LayoutCard v-for=\"(item, index) in detailSealInfo\"\r\n            :seal_detail=\"JSON.parse(JSON.stringify(item))\"\r\n            :cardList=\"cardList\"\r\n        ></LayoutCard>\r\n    </div>\r\n    <svg v-show=\"cur_view === 'layout'\" class=\"layout-transition-svg\"></svg> <!--v-show=\"cur_view === 'layout'\"并不完全正确-->\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst time_duration = 1000,\r\n      timeout_duration = 100\r\n\r\nimport LayoutCard from \"./layout_widgets/LayoutCard.vue\"\r\n\r\nimport * as Data from \"@/data/Data.js\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as DataProcess from \"@/utils/data_process\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as LayoutFunc from \"@/utils/layout_view/layout_function\"\r\nimport * as LayoutFuncV2 from \"@/utils/layout_view/layout_function_v2\"\r\n\r\nimport * as Overview2Layout from \"@/utils/transition/overview_and_layout\"\r\n\r\nimport { setExportcardListInLayout } from \"@/utils/transition/overview_and_layout\"\r\n\r\nexport default {\r\n    name: \"LayoutView\",\r\n    components: {\r\n        LayoutCard\r\n    },\r\n    data() {\r\n        return {\r\n            data: null,\r\n            cardList: [],\r\n            painting_name_en: '', \r\n            fullImageModel: {\r\n                show: false,\r\n                src: null,\r\n                label: null\r\n            },\r\n            showSealDiv: false,\r\n            // sealCardPosDict: {}, // abandon\r\n        }\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"selection\", \"hover\", \"painting_pic\", \"transition\", \"overlay_duration\"]),\r\n        detailSealInfo: {\r\n            get() {\r\n                const self = this\r\n                const tar = self.selection.entity !== null && self.selection.value\r\n                if (!tar) return []\r\n                let seal_pic_list = []\r\n                // 或许可以考虑添加一些click position的信息\r\n                seal_pic_list = jsonCopy(self.cardList.filter((d) => tar.includes(d['index'])))\r\n\r\n                // console.log('Layout View中的detailSealInfo', seal_pic_list, self.selection.value)\r\n                return seal_pic_list\r\n            },\r\n        },\r\n    },\r\n    watch: {\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n            if (newValue === 'layout') {\r\n                console.log('从其他视图切换到layout视图啦')\r\n                setTimeout(() => { // 需要设置延迟，否则$('.image-scroll-container').width()依然为0\r\n                    // if (self.painting_pic.loaded) { // not working\r\n                    //     self.cardList = jsonCopy(LayoutFunc.compute_abstract_layout(self.cardList, {\r\n                    //         width: self.painting_pic.width,\r\n                    //         height: self.painting_pic.height\r\n                    //     }))\r\n                    // }\r\n                    self.showSealDiv = true\r\n                }, timeout_duration)\r\n            } else {\r\n                self.showSealDiv = false\r\n            }\r\n        },\r\n        selection: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n            },\r\n            deep: true\r\n        },\r\n        painting_pic: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal.loaded) {\r\n                    self.showSealDiv = false\r\n                    self.cardList = jsonCopy(LayoutFunc.compute_abstract_layout(self.cardList, {\r\n                        width: newVal.width,\r\n                        height: newVal.height\r\n                    }))\r\n                    console.log(self.cardList)\r\n                    self.showSealDiv = true\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        transition: {\r\n            handler: function (newVal, _) {\r\n                const self = this\r\n                if (newVal.to !== 'timeline' && newVal.from !== 'timeline') {\r\n                    self.transition_handler(newVal);\r\n                } else {\r\n                    self.$store.commit(\"changeCurViewForce\", newVal.to)\r\n                }\r\n            },\r\n            deep: true,\r\n        },\r\n        cardList: {\r\n            handler: function (newVal, oldVal) {\r\n                // console.log('cardList in abstract view更新啦', newVal)\r\n                setExportcardListInLayout(newVal)\r\n            },\r\n            deep: true\r\n        },\r\n        showSealDiv: function(newVal, oldVal) {\r\n            const self = this\r\n            if (newVal) {\r\n               setTimeout(() => {\r\n                    document.getElementById(\"layout-container\").addEventListener(\"click\", function(event) {\r\n                        // 检查点击的目标元素是否是父 div 而非子 div\r\n                        if (event.target.id.includes('sealImageLayout-')) {\r\n                            // console.log(\"点击了子 div 区域\")\r\n                            // 无操作\r\n                        } else {\r\n                            // console.log(\"点击了父 div 区域\")\r\n                            self.$store.commit(\"changeSelection\", {\r\n                                entity: null,\r\n                                value: []\r\n                            })\r\n                        }\r\n                    })\r\n                }, timeout_duration)\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { // 在切换到当前视图时需要重新刷新一遍\r\n            const self = this\r\n            \r\n        },\r\n        showSealInfoCard(event) {\r\n            const self = this\r\n            let selected_seal_pic_list = self.selection['value']\r\n            const seal_pic_index = (event.target.id).split('-')[1] // index of current clicked seal_pic\r\n            // console.log(seal_pic_index)\r\n\r\n            // 获取点击的div的位置信息(视图切换时会出现bug，舍弃)\r\n            // const clickedDiv = event.target\r\n            // const rect = clickedDiv.getBoundingClientRect()\r\n            // // console.log(rect)\r\n\r\n            // self.sealCardPosDict[seal_pic_index] = {\r\n            //     x: rect.left + rect.width - $('.main-panel').offset().left, // event.clientX - rect.left\r\n            //     y: rect.top - $('.main-panel').offset().top // event.clientY - rect.top\r\n            // }\r\n            \r\n            if (selected_seal_pic_list.includes(seal_pic_index)) {\r\n                const del_index = selected_seal_pic_list.indexOf(seal_pic_index)\r\n                if (del_index !== -1) {\r\n                    selected_seal_pic_list.splice(del_index, 1);\r\n                }\r\n            } else {\r\n                // 没有操作\r\n            }\r\n            selected_seal_pic_list = [...new Set(selected_seal_pic_list)] // 去重\r\n            selected_seal_pic_list.push(seal_pic_index)\r\n            self.$store.commit(\"changeSelection\", {\r\n                entity: \"seal_pic\",\r\n                value: selected_seal_pic_list\r\n            })\r\n        },\r\n        // initializeSealPosDict() { // abandon\r\n        //     const self = this\r\n        //     for (let i in self.cardList) {\r\n        //         self.sealCardPosDict[self.cardList[i]['index']] = {\r\n        //             x: 0,\r\n        //             y: 0\r\n        //         }\r\n        //     }\r\n        // },\r\n        transition_handler(trans) {\r\n            console.log(trans);\r\n            const self = this\r\n\r\n            const fr = trans.from;\r\n            const to = trans.to;\r\n            const st = trans.state;\r\n\r\n            if (fr === \"layout\" && st === \"out\") { // 从layout视图往外走\r\n                console.log(\"transition out\");\r\n\r\n                Overview2Layout.layout2overview(time_duration * 6, 'to', self.selection, self.cardList, self.painting_pic)\r\n\r\n                setTimeout(() => {\r\n                    self.$store.commit(\"transCompleted\", null)\r\n                }, time_duration * 6)\r\n            } else if (to === \"layout\" && st === \"out\") {\r\n                console.log(\"preparing for transition\")\r\n                \r\n            } else if (to === 'layout' && st === 'overlay') { // 2个视图更新重叠\r\n            \r\n\r\n            } else if (to === \"layout\" && st === \"in\") { // 正在从其他视图切换到layout视图\r\n                console.log(\"transition in\");\r\n\r\n                setTimeout(() => {\r\n                    self.$store.commit(\"transCompleted\", null);\r\n                }, time_duration);\r\n            }\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        console.log('进入到layout view啦')\r\n\r\n        // 初始化painting_name_en\r\n        that.painting_name_en = DataProcess.getPaintingNameEn(that.painting_name)\r\n\r\n        let whole_data = Data.read_data() // 首先读入总体的\r\n        for (let i in whole_data) {\r\n            if (whole_data[i]['painting_name'] === that.painting_name) {\r\n                that.data = whole_data[i]\r\n            }\r\n        }\r\n\r\n        that.data = DataProcess.getCollectorColor(that.data)\r\n        that.cardList = SealCardFunc.SealCardMapping(that.data) // mapped seal pictures into list\r\n        // that.initializeSealPosDict() // abandon\r\n        // console.log(\"seal_data\", that.data)\r\n\r\n        // LayoutFunc.compute_abstract_layout(that.cardList) // 刚开始图片可能还没有加载出来\r\n        that.initialize()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.layout-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    left: 0%;\r\n    top: 0%;\r\n    z-index: 2;\r\n    // background-color: rgba(91, 203, 23, 0.15);\r\n    .seal-image-container {\r\n        position: absolute;\r\n        .seal-image {\r\n            position: absolute;\r\n            left: 0%;\r\n            top: 0%;\r\n            // width: 100%;\r\n            // height: 100%;\r\n            max-width: 100%; /* 设置图像的最大宽度为容器宽度的百分比 */\r\n            max-height: 100%; /* 设置图像的最大高度为容器高度的百分比 */\r\n            width: auto; /* 自动调整宽度 */\r\n            height: auto; /* 自动调整高度 */\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n.layout-transition-svg {\r\n        position: absolute;\r\n        left: 0%;\r\n        top: 0%;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n</style>\r\n","<template>\r\n    <el-dialog v-model=\"fullImageModel.show\" :title=\"fullImageModel.label\" top=\"5vh\" width=\"80%\">\r\n        <div style=\"height: 75vh; width: 70%;\">\r\n            <img :src=\"fullImageModel.src\" style=\"width: 100%; height: 100%; object-fit: contain;\">\r\n        </div>\r\n    </el-dialog>\r\n    <div class=\"layout-seal-card\" v-if=\"sealContainerShow\"\r\n        :style=\"{left: (seal_detail['layout_params']['x'] + seal_detail['layout_params']['width']) + 'px', top: seal_detail['layout_params']['y'] + 'px',\r\n                 height: containerParam.card_height * 1.1 + 'px', width: (containerParam.card_width * 0.9 + containerParam.unit_pixel * 4) + 'px'}\">\r\n        <div class=\"seal-index-rect\" :style=\"{paddingLeft: containerParam.unit_pixel * 2 + 'px', paddingRight: containerParam.unit_pixel * 2 + 'px', height: containerParam.unit_pixel * 18 + 'px', fontSize: containerParam.unit_pixel * 16 + 'px'}\">{{ seal_detail['index'] }}</div>\r\n        <div class=\"card-rect\"\r\n            :style=\"{top: containerParam.card_height * 0.05 + 'px', height: containerParam.card_height + 'px', left: containerParam.unit_pixel * 0 + 'px', width: containerParam.card_width * 0.9 + 'px'}\">\r\n            <div class=\"seal-name\"\r\n                :style=\"{fontSize: seal_detail.seal_name.length <= 6 ? containerParam.card_width * 0.9 / 6.5 + 'px' : containerParam.card_width * 0.9 / (seal_detail.seal_name.length + 0.5) + 'px',\r\n                        top: containerParam.unit_pixel * 15 + 'px'}\">\r\n                    {{ seal_detail['seal_name'] }}\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * (45 - 2) + 'px', height: containerParam.unit_pixel * (60 + 4) + 'px', left: '2.5%', width: '95%'}\">\r\n                <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\" @click=\"clickPrevNext('prev')\">\r\n                    <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M13.877 2L6.78967 9.76364L13.877 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M8.96387 2L1.87658 9.76364L8.96387 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                </div>\r\n                <div class=\"seal-pic\"\r\n                    :style=\"{height: containerParam.unit_pixel * 60 + 'px', width: containerParam.unit_pixel * 60 + 'px'}\">\r\n                    <img :src=\"seal_detail.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0.1em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                        @click=\"fullImageModel.show =true, fullImageModel.src=seal_detail.image_href, fullImageModel.label = seal_detail.seal_name\">\r\n                </div>\r\n                <div class=\"prev-next-arrow\" :style=\"{height: containerParam.unit_pixel * 20 + 'px'}\" @click=\"clickPrevNext('next')\">\r\n                    <svg width=\"16\" height=\"19\" viewBox=\"0 0 16 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M2 2L9.08728 9.76364L2 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                        <path d=\"M6.91309 2L14.0004 9.76364L6.91309 17.1163\" stroke=\"#8F7B6C\" stroke-width=\"3.22\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                </div>\r\n                <!-- <div class=\"seal-pic\"\r\n                    :style=\"{height: containerParam.unit_pixel * 75 + 'px', width: containerParam.unit_pixel * 75 + 'px'}\">\r\n                    <img :src=\"seal_detail.image_href\" style=\"{max-width: 100%; max-height: 100%; margin-top: 0em; margin-bottom: 0em, cursor: 'pointer'}\"\r\n                        @click=\"fullImageModel.show =true, fullImageModel.src=seal_detail.image_href, fullImageModel.label = seal_detail.seal_name\">\r\n                </div> -->\r\n            </div>\r\n            <div class=\"seal-page\"\r\n                :style=\"{top: containerParam.unit_pixel * (105 + 2) + 'px', height: containerParam.unit_pixel * (120 - 107 - 5) + 'px', left: '2.5%', width: '95%', fontSize: containerParam.unit_pixel * 11 + 'px'}\">\r\n                {{ (seal_detail['series_list'].indexOf(seal_detail['index']) + 1) + '/' + seal_detail['series_list'].length }}\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 120 + 'px', left: '2.5%', width: '95%'}\">\r\n                <div class=\"agent-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                    <div class=\"agent-icon\">\r\n                        <svg width=\"11\" height=\"14\" viewBox=\"0 0 11 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z\" stroke=\"#8F7B6C\" stroke-linejoin=\"round\"/>\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"agent-name\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ seal_detail['collector_name'] }}</div>\r\n                </div>\r\n                <div class=\"life-span\" :style=\"{fontSize: containerParam.unit_pixel * 11 + 'px'}\">{{ seal_detail['life_span'][0].toString() + '-' + seal_detail['life_span'][1].toString() }}</div>\r\n            </div>\r\n            <div class=\"info-row\" :style=\"{top: containerParam.unit_pixel * 135 + 'px', left: '2.5%', width: '95%'}\">\r\n                <div class=\"agent-time-group\" :style=\"{gap: containerParam.unit_pixel * 2 + 'px'}\">           \r\n                    <div class=\"time-icon\">\r\n                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path d=\"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z\" fill=\"#8F7B6C\"/>\r\n                        </svg>\r\n                    </div>\r\n                    <div class=\"time-span\" :style=\"{fontSize: containerParam.unit_pixel * 12 + 'px'}\">{{ seal_detail['stamped_year'][0].toString() + '-' + seal_detail['stamped_year'][1].toString() }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as OverviewFunction from \"@/utils/overview/overview_function\"\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\nconst time_duration = 1000,\r\n      timeout_duration = 100,\r\n      seal_card_num = 12\r\n\r\n\r\nexport default {\r\n    name: \"LayoutCard\",\r\n    components: {\r\n    },\r\n    data() {\r\n        return {\r\n            containerParam: { // 当前绘制窗口的宽度\r\n                x: 0,\r\n                width: 0,\r\n                card_width: 0, // includes the gap between seal cards\r\n                card_height: 0, // card height\r\n                unit_pixel: 0, // 单位大小\r\n                sealIconSize: 1// seal icon的大小\r\n            },\r\n            sealContainerShow: false,\r\n            fullImageModel: {\r\n                show: false,\r\n                src: null,\r\n                label: null\r\n            },\r\n        };\r\n    },\r\n    props: [\"seal_detail\", \"cardList\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"rem\", \"selection\"]),\r\n        \r\n    },\r\n    watch: {\r\n        seal_detail: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                // console.log(\"seal_detail\", newVal)\r\n            },\r\n            deep: true\r\n        },\r\n        resize_scale: function(newVal, oldVal) {\r\n\r\n        },\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n            if (newValue === 'layout') {\r\n                console.log('从其他视图切换到layout视图啦')\r\n                setTimeout(() => { // 需要设置延迟，否则$('.image-scroll-container').width()依然为0\r\n                    self.renderSealCard()\r\n                    self.sealContainerShow = true\r\n                }, timeout_duration)\r\n            } else {\r\n                self.sealContainerShow = false\r\n            }\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() {\r\n        },\r\n        renderSealCard() {\r\n            const self = this\r\n            // console.log(self.seal_detail, self.resize_scale)\r\n            setTimeout(() => {\r\n                self.containerParam = SealCardFunc.getSealCardContainerSize() // {x: , width: }\r\n\r\n                self.containerParam['card_width'] = self.containerParam['width'] / seal_card_num\r\n                self.containerParam['card_height'] = self.containerParam['card_width'] * 0.9 * 175 / 120\r\n                self.containerParam['unit_pixel'] = self.containerParam['card_height'] / 175\r\n\r\n                // console.log('self.containerParam', self.containerParam)\r\n\r\n                if (self.cur_view === 'layout') {\r\n                    self.sealContainerShow = true\r\n                }\r\n\r\n            }, timeout_duration)\r\n        },\r\n        clickPrevNext(button_choice) {\r\n            const self = this\r\n            let selected_seal_pic_list = OverviewFunction.clickPrevNextButton(self.seal_detail, self.cardList, self.resize_scale, self.selection, button_choice)\r\n            self.$store.commit(\"changeSelection\", {\r\n                entity: \"seal_pic\",\r\n                value: selected_seal_pic_list\r\n            })\r\n        },\r\n    },\r\n    mounted() {\r\n        const that = this\r\n        that.initialize()\r\n        that.renderSealCard()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.layout-seal-card {\r\n    position: absolute;\r\n    // color: #8F7B6C;\r\n    // border: 2px solid #8F7B6C;\r\n    // border-radius: 5px;\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    overflow-y: auto;\r\n    .seal-index-rect {\r\n        position: absolute;\r\n        color: white;\r\n        background-color: #A56752;\r\n        z-index: 1;\r\n    }\r\n    .card-rect {\r\n        position: absolute;\r\n        background-color: #FFF8EB;\r\n        color: #8F7B6C;\r\n        border: 2px solid #8F7B6C;\r\n        // border-radius: 5px;\r\n        // clip-path: polygon(0% 0%, 25% 0%, 25% 6%, 80% 6%, 80% 0%, 100% 0%, 100% 100%, 0% 100%); // 上开口\r\n        // clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 75% 100%, 75% 95%, 25% 95%, 25% 100%, 0% 100%); // 下开口(暂时去掉，因为rect有纯色填充)\r\n        .seal-name{\r\n            display: flex; // new\r\n            // flex-direction: row;\r\n            text-align: center;\r\n            align-items: center;\r\n            justify-content: center; // new\r\n\r\n            /*font-size:  $rem + 'px';*/\r\n            font-weight: bold;\r\n            width: 100%;\r\n            position: relative;\r\n            color: #724A2B;\r\n        }\r\n        .seal-page {\r\n            position: absolute;\r\n            // color: #8F7B6C;\r\n        }\r\n        .info-row {\r\n            position: absolute;\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: space-between; // 多个item时使用（加左右箭头时）\r\n            // justify-content: center; \r\n            align-items: center; // new\r\n            .agent-group {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center; // new\r\n            }\r\n            .agent-time-group {\r\n                display: flex;\r\n                flex-direction: row;\r\n                align-items: center; // new\r\n            }\r\n        }\r\n        .seal-page {\r\n            position: absolute;\r\n            left: 2.5%;\r\n            width: 95%;\r\n            border-bottom: 1.3px solid #724A2B; /* 下划线样式，可以根据需要更改颜色、宽度和样式 */\r\n            padding-bottom: 5px; /* 可选：为文本添加一些底部填充，以使下划线距离文本更远 */\r\n        }\r\n        .seal-icon-group {\r\n            position: absolute;\r\n            left: 2.5%;\r\n            width: 95%;\r\n            overflow-y: auto;\r\n            // background-color: rgba(247, 171, 0, 0.15);\r\n        }\r\n    }\r\n    .stamped-year {\r\n        position: absolute;\r\n        color: #724A2B;\r\n    }    \r\n}\r\n\r\n</style>\r\n","import { render } from \"./LayoutCard.vue?vue&type=template&id=41175b42&scoped=true\"\nimport script from \"./LayoutCard.vue?vue&type=script&lang=js\"\nexport * from \"./LayoutCard.vue?vue&type=script&lang=js\"\n\nimport \"./LayoutCard.vue?vue&type=style&index=0&id=41175b42&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-41175b42\"]])\n\nexport default __exports__","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport * as LayoutFunc from \"@/utils/layout_view/layout_function\"\r\n\r\n// group seal pictures according to their x position\r\nexport function get_seal_x_group(seal_mapped_list) { // seal_mapped_list is the original list\r\n    seal_mapped_list.sort((a, b) => { // sort width in the descending order\r\n        if (a['width'] < b['width']) return 1\r\n        if (a['width'] > b['width']) return -1\r\n        return 0\r\n    })\r\n\r\n    let seal_group_list = []\r\n    for (let i in seal_mapped_list) {\r\n        // initialize \"del\" attribute\r\n        seal_group_list = seal_group_list.map((item) => {\r\n            item['del'] = false\r\n            return item\r\n        })\r\n\r\n        const cur_seal_pic = seal_mapped_list[i]\r\n        if (i === 0) { // for the biggest\r\n            seal_group_list.push({\r\n                x_offset2prev: cur_seal_pic['x'],\r\n                seal_pic: [cur_seal_pic],\r\n                x: cur_seal_pic['x'],\r\n                width: cur_seal_pic['width'],\r\n                del: false // 仅针对多个overlay seal group merge时的情况\r\n            })\r\n        } else { // for i >= 1\r\n            let overlay_group_list = [] // 与当前seal_pic产生overlay的seal_group\r\n            for (let j in seal_group_list) {     \r\n                let ifOverlay = !(cur_seal_pic['x'] + cur_seal_pic['width'] < seal_group_list[j]['x']\r\n                                || seal_group_list[j]['x'] + seal_group_list[j]['width'] < cur_seal_pic['x'])\r\n                if (ifOverlay) {\r\n                    overlay_group_list.push(seal_group_list[j])\r\n                    seal_group_list[j]['del'] = true\r\n                }\r\n            }\r\n            if (overlay_group_list.length === 0) { // 当前没有产生overlay的seal_group\r\n                seal_group_list.push({\r\n                    x_offset2prev: cur_seal_pic['x'],\r\n                    seal_pic: [cur_seal_pic],\r\n                    x: cur_seal_pic['x'],\r\n                    width: cur_seal_pic['width'],\r\n                    del: false\r\n                }) \r\n            } else if (overlay_group_list.length === 1) { // 当前与之产生overlay的仅有一个seal_group\r\n                // modify the attribute of seal_group_list\r\n                const modified_seal_group_index = seal_group_list.indexOf(overlay_group_list[0])\r\n                seal_group_list[modified_seal_group_index]['seal_pic'].push(cur_seal_pic)\r\n                seal_group_list[modified_seal_group_index]['x'] = Math.min(seal_group_list[modified_seal_group_index]['x'], cur_seal_pic['x'])\r\n\r\n                let group_right_bound = seal_group_list[modified_seal_group_index]['seal_pic'].reduce((maxValue, currentItem) => {\r\n                                            const itemValue = currentItem.x + currentItem.width\r\n                                            return itemValue > maxValue ? itemValue : maxValue\r\n                                        }, -Infinity)\r\n                seal_group_list[modified_seal_group_index]['width'] = group_right_bound - seal_group_list[modified_seal_group_index]['x']\r\n\r\n                seal_group_list = modify_sealGroup_offset2prev(seal_group_list) // 修改seal_group的x_offset2prev属性值\r\n            } else { // 多个seal_group与之产生overlay\r\n                // merge seal_group_list (此时del属性产生作用)\r\n                let merged_seal_group = {}\r\n                let seal_group_x_new = cur_seal_pic['x'], \r\n                    seal_group_seal_pic_new = [cur_seal_pic]\r\n\r\n                for (let j in overlay_group_list) {\r\n                    const cur_overlay_group = overlay_group_list[j]\r\n                    seal_group_x_new = Math.min(cur_overlay_group['x'], seal_group_x_new)\r\n                    seal_group_seal_pic_new = seal_group_seal_pic_new.concat(cur_overlay_group['seal_pic'])\r\n                }\r\n\r\n                merged_seal_group = {\r\n                    x_offset2prev: -Infinity, // 后续修改\r\n                    seal_pic: seal_group_seal_pic_new,\r\n                    x: seal_group_x_new,\r\n                    width: cur_seal_pic['width'] // 后续修改\r\n                }\r\n\r\n                let group_right_bound = merged_seal_group['seal_pic'].reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.x + currentItem.width\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity)\r\n                merged_seal_group['width'] = group_right_bound - merged_seal_group['x']\r\n\r\n                // 删除merge前的seal group\r\n                seal_group_list = seal_group_list.filter((d) => !d['del'])\r\n                // 添加merged_seal_group\r\n                seal_group_list.push(merged_seal_group)\r\n\r\n                seal_group_list = modify_sealGroup_offset2prev(seal_group_list) // 修改seal_group的x_offset2prev属性值\r\n            }\r\n        }\r\n    }\r\n    // console.log('seal_group_list', seal_group_list)\r\n\r\n    // merge\r\n    let merge_seal_group_list = merge_seal_group(seal_group_list)\r\n\r\n    // return seal_group_list\r\n    return merge_seal_group_list\r\n}\r\n\r\n// 修改seal_group的x_offset2prev属性值\r\nfunction modify_sealGroup_offset2prev(seal_group_list) {\r\n    seal_group_list.sort((a, b) => {\r\n        if (a['x'] < b['x']) return -1\r\n        if (a['x'] > b['x']) return 1\r\n        return 0\r\n    })\r\n    for (let i = 0; i < seal_group_list.length; i++) {\r\n        if(i === 0) {\r\n            seal_group_list[i]['x_offset2prev'] = seal_group_list[i]['x']\r\n        } else {\r\n            seal_group_list[i]['x_offset2prev'] = seal_group_list[i]['x'] - (seal_group_list[i - 1]['x'] + seal_group_list[i - 1]['width'])\r\n        }\r\n    }\r\n    return seal_group_list\r\n}\r\n\r\n// 对于已经分好的seal group (48组)，间距小于 3 / 4 处的merge \r\nfunction merge_seal_group(seal_group_list) {\r\n    // get the 3 quarter value\r\n    let seal_group_dist_list = seal_group_list.map((item) => item['x_offset2prev'])\r\n    seal_group_dist_list.sort((a, b) => a - b)\r\n    const third_quarter = seal_group_dist_list[Math.round(seal_group_dist_list.length * 11 / 12)]\r\n    \r\n    // merge\r\n    let seal_merged_list = []\r\n    let cur_x = seal_group_list[0]['x'], // 当前merge大组的x\r\n        cur_seal_pic_list = seal_group_list[0]['seal_pic'] // 当前大组的seal_pic list\r\n    for (let i = 0; i < seal_group_list.length; i++) {\r\n        const cur_seal_group = seal_group_list[i]\r\n        if (i === 0) {\r\n            // continue\r\n        } else if (Math.ceil((cur_seal_group['x'] - cur_x) / third_quarter) <= 1) {\r\n            cur_seal_pic_list = cur_seal_pic_list.concat(cur_seal_group['seal_pic'])\r\n        } else {\r\n            let group_right_bound = cur_seal_pic_list.reduce((maxValue, currentItem) => {\r\n                const itemValue = currentItem.x + currentItem.width\r\n                return itemValue > maxValue ? itemValue : maxValue\r\n            }, -Infinity)\r\n            const cur_group_width = group_right_bound - cur_x\r\n\r\n            seal_merged_list.push({\r\n                x_offset2prev: cur_x, // 后续修改\r\n                seal_pic: cur_seal_pic_list,\r\n                x: cur_x,\r\n                width: cur_group_width\r\n            })\r\n\r\n            // clear\r\n            cur_seal_pic_list = cur_seal_group['seal_pic']\r\n            cur_x = cur_seal_group['x']\r\n        }\r\n\r\n        if (i === seal_group_list.length - 1) { // 到最后一组了，全部加进来\r\n            let group_right_bound = cur_seal_pic_list.reduce((maxValue, currentItem) => {\r\n                const itemValue = currentItem.x + currentItem.width\r\n                return itemValue > maxValue ? itemValue : maxValue\r\n            }, -Infinity)\r\n            const cur_group_width = group_right_bound - cur_x\r\n\r\n            seal_merged_list.push({\r\n                x_offset2prev: cur_x, // 后续修改\r\n                seal_pic: cur_seal_pic_list,\r\n                x: cur_x,\r\n                width: cur_group_width\r\n            })\r\n        }\r\n    }\r\n    seal_merged_list = modify_sealGroup_offset2prev(seal_merged_list) // 修改seal_group的x_offset2prev属性值\r\n    // console.log('seal_merged_list', seal_merged_list)\r\n    return seal_merged_list\r\n}\r\n\r\nexport function find_subgroup_centerX(sub_seal_group) {\r\n    // console.log('sub_seal_group', sub_seal_group)\r\n    let group_right_bound = sub_seal_group.reduce((maxValue, currentItem) => {\r\n        const itemValue = currentItem['layout_params']['x'] + currentItem['layout_params']['width']\r\n        return itemValue > maxValue ? itemValue : maxValue\r\n    }, -Infinity)\r\n    let group_left_bound = sub_seal_group.reduce((minValue, currentItem) => {\r\n        const itemValue = currentItem['layout_params']['x']\r\n        return itemValue < minValue ? itemValue : minValue\r\n    }, Infinity)\r\n    return (group_left_bound + group_right_bound) / 2\r\n}","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\nimport * as LayoutFuncV2 from \"@/utils/layout_view/layout_function_v2\"\r\n\r\nconst margin = {\r\n    top: 0.01,\r\n    left: 0.01,\r\n    right: 0.01,\r\n    bottom: 0.01,\r\n}\r\n\r\nexport function compute_abstract_layout(seal_mapped_list, painting_params) {\r\n    const container_width = $('.main-panel').width(),\r\n          container_height = $('.main-panel').height()\r\n    const painting_center = {\r\n        x: painting_params['width'] / 2,\r\n        y: painting_params['height'] / 2\r\n    }\r\n    const resize_scale = { // 主要用于计算seal_pic之间的距离\r\n        x_axis: container_width / painting_params['width'],\r\n        y_axis: container_height / painting_params['height']\r\n    }\r\n\r\n    // 第一次遍历，对seal_pic进行缩放\r\n    seal_mapped_list = resize_seal_size(seal_mapped_list, container_width * container_height, resize_scale)\r\n\r\n    // 按照原画中seal pic之间的距离对seal pic进行分组\r\n    let seal_group_list = LayoutFuncV2.get_seal_x_group(seal_mapped_list)\r\n\r\n    // version 1(直接全部印章图片整体布局)\r\n    // // 生成相对方位与约束距离的list (后续每一次调整印章位置的时候都要遵守约束)\r\n    // const constraint_list = generate_constraint_list(seal_mapped_list) // dict\r\n\r\n    // // 生成用于检测印章的优先级list\r\n    // let seal_detect_list = generate_seal_detect_list(seal_mapped_list, painting_center)\r\n\r\n    // // modify seal position\r\n    // let modified_seal_list = rescale_seal_dist(seal_detect_list, constraint_list)\r\n\r\n    // modified_seal_list = panning_overall(modified_seal_list, {\r\n    //                         width: container_width,\r\n    //                         height: container_height\r\n    //                     })\r\n\r\n    // return modified_seal_list // modified_seal_list\r\n    // return seal_mapped_list\r\n\r\n    let whole_modified_seal_list = []\r\n    for (let i in seal_group_list) {\r\n        let sub_seal_mapped_list = seal_group_list[i]['seal_pic']\r\n        let cur_centerX = LayoutFuncV2.find_subgroup_centerX(sub_seal_mapped_list)\r\n        // 生成相对方位与约束距离的list (后续每一次调整印章位置的时候都要遵守约束)\r\n        const constraint_list = generate_constraint_list(sub_seal_mapped_list) // dict\r\n\r\n        // 生成用于检测印章的优先级list\r\n        let seal_detect_list = generate_seal_detect_list(sub_seal_mapped_list, {\r\n            x: cur_centerX,\r\n            y: painting_center['y']\r\n        })\r\n\r\n        // modify seal position\r\n        let modified_seal_list = rescale_seal_dist(seal_detect_list, constraint_list)\r\n\r\n        // modified_seal_list = panning_overall(modified_seal_list, {\r\n        //                         width: container_width,\r\n        //                         height: container_height\r\n        //                     })\r\n\r\n        whole_modified_seal_list = whole_modified_seal_list.concat(modified_seal_list)\r\n    }\r\n    // console.log('whole_modified_seal_list', whole_modified_seal_list)\r\n    return whole_modified_seal_list\r\n}\r\n\r\n// 对seal pic进行缩放，使用对数比例尺，使得sum(area of seal_pics)为整个画布面积的1/2\r\nfunction resize_seal_size(seal_mapped_list, canvas_area, resize_scale) {\r\n    // 使用 reduce 函数来找到最值 (no need)\r\n    let max_area = seal_mapped_list.reduce((maxValue, currentItem) => {\r\n                                    const itemValue = currentItem.width * currentItem.height\r\n                                    return itemValue > maxValue ? itemValue : maxValue\r\n                                }, -Infinity)\r\n    let min_area = seal_mapped_list.reduce((minValue, currentItem) => {\r\n                                    const itemValue = currentItem.width * currentItem.height\r\n                                    return itemValue < minValue ? itemValue : minValue\r\n                                }, Infinity)\r\n    \r\n    // 使用 reduce 方法来求和\r\n    let sum_log_area = seal_mapped_list.reduce((total, currentItem) => total + currentItem.width * currentItem.height, 0)\r\n    let ave_area = sum_log_area / seal_mapped_list.length\r\n    let area_resize_scale =  (canvas_area / 3.65) / sum_log_area\r\n    // console.log('max_area', 'min_area', max_area, min_area, area_resize_scale)\r\n    // 定义对数比例尺\r\n    const logScale1 = d3.scaleLog()\r\n                        .domain([min_area, ave_area]) // 定义数据范围\r\n                        .range([ave_area * 0.5 * area_resize_scale, ave_area * area_resize_scale * 0.7]), // 定义输出范围\r\n          logScale2 = d3.scaleLog()\r\n                        .domain([ave_area, max_area]) // 定义数据范围\r\n                        .range([ave_area * area_resize_scale * 0.7, ave_area * 2.5 * area_resize_scale]) // 定义输出范围\r\n    for (let i in seal_mapped_list) {\r\n        const cur_seal_pic = seal_mapped_list[i]\r\n        seal_mapped_list[i]['layout_params'] = {\r\n            x: cur_seal_pic['x'] * resize_scale['x_axis'],\r\n            y: cur_seal_pic['y'] * resize_scale['y_axis'],\r\n            width: cur_seal_pic['width'] * cur_seal_pic['height'] < ave_area ? \r\n                   Math.sqrt(logScale1(cur_seal_pic['width'] * cur_seal_pic['height']) / (cur_seal_pic['height'] / cur_seal_pic['width'])) \r\n                   : Math.sqrt(logScale2(cur_seal_pic['width'] * cur_seal_pic['height']) / (cur_seal_pic['height'] / cur_seal_pic['width'])),\r\n            height: cur_seal_pic['width'] * cur_seal_pic['height']  < ave_area ? \r\n                    Math.sqrt(logScale1(cur_seal_pic['width'] * cur_seal_pic['height']) / (cur_seal_pic['width'] / cur_seal_pic['height'])) \r\n                    : Math.sqrt(logScale2(cur_seal_pic['width'] * cur_seal_pic['height']) / (cur_seal_pic['width'] / cur_seal_pic['height'])),\r\n            // width: Math.sqrt(area_resize_scale) * cur_seal_pic['width'], // * Math.sqrt(area_resize_scale)\r\n            // height: Math.sqrt(area_resize_scale) * cur_seal_pic['height'], // * Math.sqrt(area_resize_scale)\r\n            offset2prev: 0\r\n        }\r\n    }\r\n    // judge_log_scale(seal_mapped_list) // false\r\n    return seal_mapped_list\r\n}\r\n\r\n// 用于检测pic大小是否还保持原来的排序(验证logScale比例尺是否合理)\r\nfunction judge_log_scale(seal_mapped_list) {\r\n    let seal_width_list = jsonCopy(seal_mapped_list),\r\n        seal_height_list = jsonCopy(seal_mapped_list),\r\n        seal_area_list = jsonCopy(seal_mapped_list),\r\n        seal_resize_width_list = jsonCopy(seal_mapped_list),\r\n        seal_resize_height_list = jsonCopy(seal_mapped_list),\r\n        seal_resize_area_list = jsonCopy(seal_mapped_list)\r\n    seal_width_list.sort((a, b) => {\r\n            if (a['width'] < b['width']) return -1\r\n            if (a['width'] > b['width']) return 1\r\n            return 0\r\n        })\r\n    seal_resize_width_list.sort((a, b) => {\r\n            if (a['layout_params']['width'] < b['layout_params']['width']) return -1\r\n            if (a['layout_params']['width'] > b['layout_params']['width']) return 1\r\n            return 0\r\n        })\r\n\r\n    seal_height_list.sort((a, b) => {\r\n            if (a['height'] < b['height']) return -1\r\n            if (a['height'] > b['height']) return 1\r\n            return 0\r\n        })\r\n    seal_resize_height_list.sort((a, b) => {\r\n            if (a['layout_params']['height'] < b['layout_params']['height']) return -1\r\n            if (a['layout_params']['height'] > b['layout_params']['height']) return 1\r\n            return 0\r\n        })\r\n\r\n    seal_area_list.sort((a, b) => {\r\n            if (a['width'] * a['height'] < b['width'] * b['height']) return -1\r\n            if (a['width'] * a['height'] > b['width'] * b['height']) return 1\r\n            return 0\r\n        })\r\n    seal_resize_area_list.sort((a, b) => {\r\n            if (a['layout_params']['width'] * a['layout_params']['height'] < b['layout_params']['width'] * b['layout_params']['height']) return -1\r\n            if (a['layout_params']['width'] * a['layout_params']['height'] > b['layout_params']['width'] * b['layout_params']['height']) return 1\r\n            return 0\r\n        })\r\n    \r\n    let consistency = true\r\n\r\n    for (let i = 0; i< seal_mapped_list.length; i++) {\r\n        // if (seal_width_list[i]['index'] !== seal_resize_width_list[i]['index'] ||\r\n        //     seal_height_list[i]['index'] !== seal_resize_height_list[i]['index'] ||\r\n        //     seal_area_list[i]['index'] !== seal_resize_area_list[i]['index']) {\r\n        if (seal_area_list[i]['index'] !== seal_resize_area_list[i]['index']) { // 针对seal area的排序保持不变\r\n                consistency = false\r\n                // console.log(i)\r\n                // console.log('width', seal_width_list[i]['index'], seal_resize_width_list[i]['index'])\r\n                // console.log('height', seal_height_list[i]['index'], seal_resize_height_list[i]['index'])\r\n                // console.log('area', seal_area_list[i]['index'], seal_resize_area_list[i]['index'])\r\n                break\r\n            }\r\n    }\r\n    // console.log('seal size consistency', consistency)\r\n}\r\n\r\n// 重新调整印章之间的dist(x, y坐标值), greedy\r\nfunction rescale_seal_dist(seal_detect_list, constraint_list) {\r\n    // console.log('seal_detect_list', seal_detect_list)\r\n    // Priority of Move Direction\r\n    // 1. x-axis > y-axis\r\n    // 2. short distance > long distance\r\n    // Priority of Constraints: not overlay > relative position > distance order\r\n    let redefine_seal_list = []\r\n    for (let i in seal_detect_list) {\r\n        let seal_detect_list_copy = jsonCopy(seal_detect_list)\r\n        const cur_redefined_seal = seal_detect_list[i]\r\n        if (i === 0) { // 首个印章一定没有冲突\r\n            redefine_seal_list.push(cur_redefined_seal)\r\n        } else { // i > 0\r\n            let conflict_param = {\r\n                ifConflict: false, // 检测是否有seal存在冲突\r\n                conflict_list: [] // 与当前detected seal存在冲突的seal_list\r\n            }\r\n            conflict_param = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n            // new version 1\r\n            // let ifRecursive = conflict_param['ifConflict']\r\n            // let moving_value_list = [],\r\n            //     prev_steps = [] // 此前已经走过的path step array(但是当前仍会产生overlay, concat后续steps后需要删除)\r\n            // if (ifRecursive) {\r\n            //     minimum_direction_moving_value(cur_redefined_seal, conflict_param['conflict_list'], redefine_seal_list, moving_value_list, prev_steps)\r\n            // }\r\n\r\n            // new version 2 // 陷入死循环，abondun\r\n            // let modified_redefined_seal = cur_redefined_seal\r\n            // while(conflict_param['ifConflict']) {\r\n            //     // 计算4个方向上，防止冲突产生的移动最小值\r\n            //     const moving_value = minimum_direction_moving_value(cur_redefined_seal, conflict_param['conflict_list'], redefine_seal_list)\r\n            //     modified_redefined_seal = optimized_moving_direction(cur_redefined_seal, moving_value, constraint_list, seal_detect_list, redefine_seal_list)\r\n            //     // redefine_seal_list.push(modified_redefined_seal)\r\n            //     conflict_param = detectOverlay(modified_redefined_seal, redefine_seal_list)\r\n            // }\r\n            // redefine_seal_list.push(modified_redefined_seal)\r\n\r\n            // new version 3\r\n            if (conflict_param['ifConflict']) { // 如果存在conflict\r\n                // 计算4个方向上，防止冲突产生的移动最小值\r\n                const moving_value = minimum_direction_moving_value(cur_redefined_seal, conflict_param['conflict_list'], redefine_seal_list)\r\n\r\n                let redefined_params = optimized_moving_direction(cur_redefined_seal, moving_value, constraint_list, seal_detect_list, redefine_seal_list, null)\r\n                let modified_redefined_seal = redefined_params['modified_redefined_seal'],\r\n                    prev_direction = redefined_params['direction']\r\n                \r\n                conflict_param = detectOverlay(modified_redefined_seal, redefine_seal_list)\r\n\r\n                if (conflict_param['ifConflict']) {\r\n                    // 改变seal_detect_list\r\n                    const cur_substitute_seal_index = seal_detect_list.indexOf(seal_detect_list.find(obj => obj['index'] === cur_redefined_seal['index']))\r\n                    \r\n                    seal_detect_list_copy[cur_substitute_seal_index] = modified_redefined_seal\r\n\r\n                    let re_moving_value = minimum_direction_moving_value(modified_redefined_seal, conflict_param['conflict_list'], redefine_seal_list)\r\n                    let redefined_params_again = optimized_moving_direction(modified_redefined_seal, re_moving_value, constraint_list, seal_detect_list_copy, redefine_seal_list, prev_direction)\r\n\r\n                    // console.log('prev_direction', cur_substitute_seal_index, prev_direction, redefined_params_again['direction'])\r\n                    prev_direction = redefined_params_again['direction']\r\n                    modified_redefined_seal = redefined_params_again['modified_redefined_seal']\r\n\r\n                    // console.log('conflict_param', conflict_param)\r\n                    conflict_param = detectOverlay(modified_redefined_seal, redefine_seal_list)\r\n\r\n                    // console.log('still conflict_param', conflict_param['ifConflict'], conflict_param, prev_direction)\r\n                }\r\n\r\n                redefine_seal_list.push(modified_redefined_seal)\r\n            } else { // 不存在冲突\r\n                redefine_seal_list.push(cur_redefined_seal)\r\n            }\r\n\r\n            // console.log('conflict_param', conflict_param)\r\n            // 对于conflict情况进行的操作\r\n            // old version\r\n            // if (conflict_param['ifConflict']) { // 如果存在conflict\r\n            //     // 计算4个方向上，防止冲突产生的移动最小值\r\n            //     const moving_value = minimum_direction_moving_value(cur_redefined_seal, conflict_param['conflict_list'], redefine_seal_list)\r\n            //     let modified_redefined_seal = optimized_moving_direction(cur_redefined_seal, moving_value, constraint_list, seal_detect_list, redefine_seal_list)\r\n            //     redefine_seal_list.push(modified_redefined_seal)\r\n            // } else { // 不存在冲突\r\n            //     redefine_seal_list.push(cur_redefined_seal)\r\n            // }\r\n        }\r\n    }\r\n    return redefine_seal_list\r\n}\r\n\r\n// 用于对印章的方位顺序进行约束\r\nfunction generate_constraint_list(seal_mapped_list) {\r\n    // relative position\r\n    let seal_x_order_list = jsonCopy(seal_mapped_list),\r\n        seal_y_order_list = jsonCopy(seal_mapped_list)\r\n        \r\n    seal_x_order_list.sort((a, b) => {\r\n        if (a['x'] < b['x']) return -1\r\n        if (a['x'] > b['x']) return 1\r\n        return 0\r\n    })\r\n    seal_y_order_list.sort((a, b) => {\r\n        if (a['y'] < b['y']) return -1\r\n        if (a['y'] > b['y']) return 1\r\n        return 0\r\n    })\r\n    // 计算 x_dist 和 y_dist\r\n    for (let i in seal_mapped_list) {\r\n        if (i > 0) {\r\n            seal_x_order_list[i]['offset2prev'] = (seal_x_order_list[i]['x'] + seal_x_order_list[i]['layout_params']['width'] / 2) - (seal_x_order_list[i - 1]['x'] + seal_x_order_list[i - 1]['layout_params']['width'] / 2)\r\n            seal_y_order_list[i]['offset2prev'] = (seal_y_order_list[i]['y'] + seal_y_order_list[i]['layout_params']['height'] / 2) - (seal_y_order_list[i - 1]['y'] + seal_y_order_list[i - 1]['layout_params']['height'] / 2)\r\n        } else { // i = 0\r\n            seal_x_order_list[i]['offset2prev'] = seal_x_order_list[i]['x'] + seal_x_order_list[i]['layout_params']['width'] / 2\r\n            seal_y_order_list[i]['offset2prev'] = seal_y_order_list[i]['y'] + seal_y_order_list[i]['layout_params']['height'] / 2\r\n        }\r\n    }\r\n\r\n    // distance order\r\n    let seal_x_dist_list = jsonCopy(seal_x_order_list),\r\n        seal_y_dist_list = jsonCopy(seal_y_order_list)\r\n\r\n    seal_x_dist_list.sort((a, b) => {\r\n            if (a['offset2prev'] < b['offset2prev']) return -1\r\n            if (a['offset2prev'] > b['offset2prev']) return 1\r\n            return 0\r\n    })\r\n    seal_y_dist_list.sort((a, b) => {\r\n        if (a['offset2prev'] < b['offset2prev']) return -1\r\n        if (a['offset2prev'] > b['offset2prev']) return 1\r\n        return 0\r\n    })\r\n    \r\n    return {\r\n        x_order: seal_x_order_list,\r\n        y_order: seal_y_order_list,\r\n        x_dist: seal_x_dist_list,\r\n        y_dist: seal_y_dist_list\r\n    }\r\n}\r\n\r\n// 按照印章中心与container center之间的距离进行排序（半径画圆）\r\nfunction generate_seal_detect_list(seal_mapped_list, painting_center) {\r\n    const center_x = painting_center.x,\r\n          center_y = painting_center.y\r\n    let seal_detect_list = jsonCopy(seal_mapped_list)\r\n    seal_detect_list.sort((a, b) => {\r\n        if (Math.pow(a['layout_params']['x'] + a['layout_params']['width'] / 2 - center_x, 2) + Math.pow(a['layout_params']['y'] + a['layout_params']['height'] / 2 - center_y, 2) < Math.pow(b['layout_params']['x'] + b['layout_params']['width'] / 2 - center_x, 2) + Math.pow(b['layout_params']['y'] + b['layout_params']['height'] / 2 - center_y, 2)) return -1\r\n        if (Math.pow(a['layout_params']['x'] + a['layout_params']['width'] / 2 - center_x, 2) + Math.pow(a['layout_params']['y'] + a['layout_params']['height'] / 2 - center_y, 2) > Math.pow(b['layout_params']['x'] + b['layout_params']['width'] / 2 - center_x, 2) + Math.pow(b['layout_params']['y'] + b['layout_params']['height'] / 2 - center_y, 2)) return 1\r\n        return 0\r\n    })\r\n    return seal_detect_list\r\n}\r\n\r\n// 对于存在conflict的seal, 计算在其在每个方向上移动的最小值\r\n// 需要改进，二次遍历检测移动后是否有其他印章图片遮挡\r\n// 最终给出一个路径方案，[{'x': 10}, {'y': 10}, ...]的格式\r\n// 输出的path choice全部保证seal pic之间不存在overlay\r\n// 递归实现\r\n// 待补充\r\nfunction minimum_direction_moving_value_v2(cur_seal, conflict_list, redefine_seal_list, path_choice_list, prev_steps) {\r\n    // 需要返回一个是否继续递归的信号\r\n    let moving_value_list = [] // { left: 0, right: 0, up: 0, down: 0 } \r\n    for (let i in conflict_list) {\r\n        const cur_conflict_seal = conflict_list[i]\r\n        let cur2conflict = { // 当前seal position - conflict seal position\r\n            deta_x: (cur_seal['layout_params']['x'] + cur_seal['layout_params']['width'] / 2) - (cur_conflict_seal['layout_params']['x'] + cur_conflict_seal['layout_params']['width'] / 2),\r\n            deta_y: (cur_seal['layout_params']['y'] + cur_seal['layout_params']['height'] / 2) - (cur_conflict_seal['layout_params']['y'] + cur_conflict_seal['layout_params']['height'] / 2)\r\n        }\r\n        moving_value_list.push({\r\n            left: (cur_seal['layout_params']['width'] + cur_conflict_seal['layout_params']['width']) / 2 + cur2conflict['deta_x'],\r\n            right: (cur_seal['layout_params']['width'] + cur_conflict_seal['layout_params']['width']) / 2 - cur2conflict['deta_x'],\r\n            up: (cur_seal['layout_params']['height'] + cur_conflict_seal['layout_params']['height']) / 2 + cur2conflict['deta_y'],\r\n            down: (cur_seal['layout_params']['height'] + cur_conflict_seal['layout_params']['height']) / 2 - cur2conflict['deta_y']\r\n        })\r\n    }\r\n\r\n    let cur_optimized_step = { // 当前各个方向最优的one step\r\n        left: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.left\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        right: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.right\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        up: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.up\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        down: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.down\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity)\r\n    }\r\n\r\n    // add path choice\r\n    // initially为4种选择，分别为left, right, up, down (分别保证每一种路径不可以有重叠)\r\n    for (let i = 0; i < prev_steps.length - 1; i++) { // prev_steps是一个二维数组\r\n        // 首先去除掉之前走的那一步的相反方向\r\n        const cur_prev_stap_list = prev_steps[i]\r\n        const last_step = cur_prev_stap_list[cur_prev_stap_list.length - 1]\r\n        let prohibit_direction = null // 下一步不能走的direction\r\n        if (last_step.hasOwnProperty('x')) {\r\n            if (last_step['x'] < 0) { // 前一步为向左移动，则下一步不可以向右移动\r\n                prohibit_direction = 'right'\r\n            } else { // 前一步为向右移动，则下一步不可以向左移动\r\n                prohibit_direction = 'left'\r\n            }\r\n        } else if (last_step.hasOwnProperty('y')) {\r\n            if (last_step['y'] < 0) { // 前一步为向上移动，则下一步不能向下移动\r\n                prohibit_direction = 'down'\r\n            } else { // 前一步为向下移动，则下一步不能向上移动\r\n                prohibit_direction = 'up'\r\n            }\r\n        }\r\n    }\r\n    \r\n\r\n    path_choice_list = path_choice_list.concat([[{'x': -moving_value_list.reduce((maxValue, currentItem) => {\r\n                                    const itemValue = currentItem.left\r\n                                    return itemValue > maxValue ? itemValue : maxValue\r\n                                }, -Infinity),\r\n                                'del': false}],\r\n                            [{'x': moving_value_list.reduce((maxValue, currentItem) => {\r\n                                const itemValue = currentItem.right\r\n                                return itemValue > maxValue ? itemValue : maxValue\r\n                            }, -Infinity),\r\n                            'del': false}],\r\n                            [{'y': -moving_value_list.reduce((maxValue, currentItem) => {\r\n                                const itemValue = currentItem.up\r\n                                return itemValue > maxValue ? itemValue : maxValue\r\n                            }, -Infinity),\r\n                            'del': false}],\r\n                            [{'y': moving_value_list.reduce((maxValue, currentItem) => {\r\n                                const itemValue = currentItem.down\r\n                                return itemValue > maxValue ? itemValue : maxValue\r\n                            }, -Infinity),\r\n                            'del': false}]])\r\n\r\n    path_choice_list = path_choice_list.concat([\r\n        {\r\n            'steps': [{'x': -moving_value_list.reduce((maxValue, currentItem) => {\r\n                const itemValue = currentItem.left\r\n                return itemValue > maxValue ? itemValue : maxValue\r\n            }, -Infinity),\r\n            'del': false}]\r\n        }\r\n    ])\r\n\r\n    // 再次检测是否冲突\r\n    for (let i in path_choice_list) {\r\n        let cur_path = path_choice_list[i]\r\n        \r\n        let cur_seal_copy = jsonCopy(cur_seal)\r\n\r\n        // if \r\n\r\n        for (let j in cur_path) { // 遍历当前path的每一个step\r\n            let cur_step = cur_path[j],\r\n                prev_step = [] // ['direction', value]\r\n            if (cur_step.hasOwnProperty('x')) { // Object.keys(cur_step)[0] === 'x'\r\n                cur_seal_copy['layout_params']['x'] += cur_step['x']\r\n                // define prev_step\r\n                prev_step = [cur_step > 0 ? 'right' : 'left', Math.abs(cur_step['x'])]\r\n            } else if (cur_step.hasOwnProperty('y')) { // Object.keys(cur_step)[0] === 'y'\r\n                cur_seal_copy['layout_params']['y'] += cur_step['y']\r\n                prev_step = [cur_step > 0 ? 'down' : 'up', Math.abs(cur_step['y'])]\r\n            }\r\n            \r\n            let conflict_param = {\r\n                ifConflict: false, // 检测是否有seal存在冲突\r\n                conflict_list: [] // 与当前detected seal存在冲突的seal_list\r\n            }\r\n            conflict_param = detectOverlay(cur_seal, redefine_seal_list)\r\n\r\n            if (conflict_param['ifConflict']) {\r\n                find_path_recursively(redefine_seal_list, conflict_param['conflict_list'], prev_step)\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    return {\r\n        left: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.left\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        right: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.right\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        up: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.up\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        down: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.down\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity)\r\n    }\r\n}\r\n\r\nfunction find_path_recursively(redefine_seal_list, conflict_list, prev_step) {\r\n    // 返回是否仍然存在冲突，以及新生成的path choice\r\n\r\n}\r\n\r\nfunction minimum_direction_moving_value(cur_seal, conflict_list) {\r\n    let moving_value_list = [] // { left: 0, right: 0, up: 0, down: 0 }\r\n    \r\n    for (let i in conflict_list) {\r\n        const cur_conflict_seal = conflict_list[i]\r\n        let cur2conflict = { // 当前seal position - conflict seal position\r\n            deta_x: (cur_seal['layout_params']['x'] + cur_seal['layout_params']['width'] / 2) - (cur_conflict_seal['layout_params']['x'] + cur_conflict_seal['layout_params']['width'] / 2),\r\n            deta_y: (cur_seal['layout_params']['y'] + cur_seal['layout_params']['height'] / 2) - (cur_conflict_seal['layout_params']['y'] + cur_conflict_seal['layout_params']['height'] / 2)\r\n        }\r\n        moving_value_list.push({\r\n            left: (cur_seal['layout_params']['width'] + cur_conflict_seal['layout_params']['width']) / 2 + cur2conflict['deta_x'],\r\n            right: (cur_seal['layout_params']['width'] + cur_conflict_seal['layout_params']['width']) / 2 - cur2conflict['deta_x'],\r\n            up: (cur_seal['layout_params']['height'] + cur_conflict_seal['layout_params']['height']) / 2 + cur2conflict['deta_y'],\r\n            down: (cur_seal['layout_params']['height'] + cur_conflict_seal['layout_params']['height']) / 2 - cur2conflict['deta_y']\r\n        })\r\n    }\r\n\r\n    return {\r\n        left: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.left\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        right: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.right\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        up: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.up\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity),\r\n        down: moving_value_list.reduce((maxValue, currentItem) => {\r\n                    const itemValue = currentItem.down\r\n                    return itemValue > maxValue ? itemValue : maxValue\r\n                }, -Infinity)\r\n    }\r\n}\r\n\r\n// 遍历已经确定position的list\r\nfunction detectOverlay(cur_redefined_seal, redefine_seal_list) {\r\n    let conflict_param = {\r\n        ifConflict: false, // 检测是否有seal存在冲突\r\n        conflict_list: [] // 与当前detected seal存在冲突的seal_list\r\n    }\r\n    for (let i in redefine_seal_list) {\r\n        const cur_detected_seal = redefine_seal_list[i]\r\n        let ifConflict2Current = !(cur_detected_seal['layout_params']['x'] + cur_detected_seal['layout_params']['width'] < cur_redefined_seal['layout_params']['x'] \r\n                                || cur_detected_seal['layout_params']['x'] > cur_redefined_seal['layout_params']['x'] + cur_redefined_seal['layout_params']['width'])\r\n                                && !(cur_detected_seal['layout_params']['y'] + cur_detected_seal['layout_params']['height'] < cur_redefined_seal['layout_params']['y'] \r\n                                || cur_detected_seal['layout_params']['y'] > cur_redefined_seal['layout_params']['y'] + cur_redefined_seal['layout_params']['height'])\r\n        if (ifConflict2Current) { // 如果与当前既定的seal存在冲突\r\n            conflict_param['ifConflict'] = true\r\n            conflict_param['conflict_list'].push(cur_detected_seal)\r\n        } else {\r\n            continue\r\n        }    \r\n    }\r\n    return conflict_param\r\n}\r\n\r\n// 计算当前最优的移动方向\r\nfunction optimized_moving_direction(cur_redefined_seal, moving_value, constraint_list, seal_mapped_list, redefine_seal_list, prev_direction) {\r\n    const moving_index = cur_redefined_seal['index'],\r\n          moving_direction = ['left', 'right', 'up', 'down']\r\n    let seal_mapped_list_copy = jsonCopy(seal_mapped_list)\r\n\r\n    let direction_value = null // 当前方向值\r\n\r\n    // 使用数组的 find 方法查找匹配的对象\r\n    const foundObject = seal_mapped_list_copy.find(obj => obj['index'] === moving_index)\r\n    // console.log('foundObject', foundObject)\r\n    // 如果找到了匹配的对象\r\n    if (foundObject) { // 修改该对象的其他属性\r\n        const found_index_number = seal_mapped_list_copy.indexOf(foundObject)\r\n        const foundObject_original_position = {\r\n            x: seal_mapped_list_copy[found_index_number]['layout_params']['x'],\r\n            y: seal_mapped_list_copy[found_index_number]['layout_params']['y']\r\n        }\r\n        let findDirection = false,\r\n            new_seal_order = {} // new position order after changing the position of current seal\r\n        \r\n        for (let i in moving_direction) { // 首先是最严格的限制: not overlay && relative position && distance order\r\n            if (moving_direction[i] === 'left') {\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['x'] -= moving_value['left']\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n\r\n                new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n\r\n                let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'high')\r\n                let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                if (ifConsistent && prev_direction !== 'right') {\r\n                // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                    findDirection = true\r\n                    direction_value = 'left'\r\n                    break\r\n                }\r\n            } else if (moving_direction[i] === 'right') {\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['x'] += moving_value['right']\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n\r\n                new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n\r\n                let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'high')\r\n                let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                if (ifConsistent && prev_direction !== 'left') {\r\n                // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                    findDirection = true\r\n                    direction_value = 'right'\r\n                    break\r\n                }\r\n            } else if (moving_direction[i] === 'up') {\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['y'] -= moving_value['up']\r\n\r\n                new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n\r\n                let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'high')\r\n                let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                if (ifConsistent && prev_direction !== 'down') {\r\n                // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                    findDirection = true\r\n                    direction_value = 'up'\r\n                    break\r\n                }\r\n            } else if (moving_direction[i] === 'down') {\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['y'] += moving_value['up']\r\n\r\n                new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n\r\n                let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'high')\r\n                let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                if (ifConsistent && prev_direction !== 'up') {\r\n                // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                    findDirection = true\r\n                    direction_value = 'down'\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        // 检验是否寻找到移动方向\r\n        if (!findDirection) { // not found, reduce contraint level to \"middle\"\r\n            // initialize\r\n            seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n            seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n\r\n            for (let i in moving_direction) { // 首先是最严格的限制: not overlay && relative position && distance order\r\n                if (moving_direction[i] === 'left') {\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] -= moving_value['left']\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n    \r\n                    new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n    \r\n                    let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'middle')\r\n                    let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                    if (ifConsistent && prev_direction !== 'right') {\r\n                    // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                        findDirection = true\r\n                        direction_value = 'left'\r\n                        break\r\n                    }\r\n                } else if (moving_direction[i] === 'right') {\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] += moving_value['right']\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n    \r\n                    new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n    \r\n                    let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'middle')\r\n                    let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                    if (ifConsistent && prev_direction !== 'left') {\r\n                    // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                        findDirection = true\r\n                        direction_value = 'right'\r\n                        break\r\n                    }\r\n                } else if (moving_direction[i] === 'up') {\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] -= moving_value['up']\r\n    \r\n                    new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n    \r\n                    let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'middle')\r\n                    let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                    if (ifConsistent && prev_direction !== 'down') {\r\n                    // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                        findDirection = true\r\n                        direction_value = 'up'\r\n                        break\r\n                    }\r\n                } else if (moving_direction[i] === 'down') {\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] += moving_value['up']\r\n    \r\n                    new_seal_order = generate_constraint_list(seal_mapped_list_copy)\r\n    \r\n                    let ifConsistent = judge_order_consistency(new_seal_order, constraint_list, 'middle')\r\n                    let ifOverlay = detectOverlay(cur_redefined_seal, redefine_seal_list)\r\n\r\n                    if (ifConsistent && prev_direction !== 'up') {\r\n                    // if (ifConsistent && !ifOverlay['ifConflict']) {\r\n                        findDirection = true\r\n                        direction_value = 'down'\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n            if (!findDirection) { // not found, reduce contraint level to \"low\" —— not overlay\r\n                // initialize\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['x'] = foundObject_original_position['x']\r\n                seal_mapped_list_copy[found_index_number]['layout_params']['y'] = foundObject_original_position['y']\r\n                \r\n                // 获取对象的所有键\r\n                let keys = Object.keys(moving_value)\r\n                // 去除掉prev_direction的对边\r\n                if (prev_direction === 'left') {\r\n                    keys.splice(keys.indexOf('right'), 1)\r\n                } else if (prev_direction === 'right') {\r\n                    keys.splice(keys.indexOf('left'), 1)\r\n                } else if (prev_direction === 'up') {\r\n                    keys.splice(keys.indexOf('down'), 1)\r\n                } else if (prev_direction === 'down') {\r\n                    keys.splice(keys.indexOf('up'), 1)\r\n                }\r\n                // console.log('keys', keys)\r\n                // 使用 Math.min() 和 apply() 方法找到最小键值\r\n                const minKey = keys.reduce((a, b) => moving_value[a] < moving_value[b] ? a : b)\r\n                if (minKey === 'left') {\r\n                    direction_value = 'left'\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] -= moving_value['left']\r\n                } else if (minKey === 'right') {\r\n                    direction_value = 'right'\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['x'] += moving_value['right']\r\n                } else if (minKey === 'up') {\r\n                    direction_value = 'up'\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] -= moving_value['up']\r\n                } else if (minKey === 'down') {\r\n                    direction_value = 'down'\r\n                    seal_mapped_list_copy[found_index_number]['layout_params']['y'] += moving_value['down']\r\n                }\r\n                // console.log(`low level-${moving_index}`)\r\n            } else { // found under the \"middle level\" constraints\r\n                // console.log(`middle level-${moving_index}`)\r\n                // continue\r\n            }\r\n        } else { // found under the \"high level\" constraints\r\n            // console.log(`high level-${moving_index}`) // 全是high-level\r\n            // continue\r\n        }\r\n        cur_redefined_seal['layout_params']['x'] = seal_mapped_list_copy[found_index_number]['layout_params']['x']\r\n        cur_redefined_seal['layout_params']['y'] = seal_mapped_list_copy[found_index_number]['layout_params']['y']\r\n    } else { // 没找到匹配对象\r\n        // continue\r\n    }\r\n    return {\r\n        modified_redefined_seal: cur_redefined_seal,\r\n        direction: direction_value\r\n    }\r\n}\r\n\r\nfunction judge_order_consistency(new_order, constraint_list, choice) { // choice = 'high' or 'middle' or 'low'\r\n    let ifConsistent = true\r\n\r\n    let seal_pic_num = constraint_list['x_order'].length\r\n    \r\n    if (choice === 'high') { // relative_position && distance_order\r\n        for (let i = 0; i < seal_pic_num; i++) {\r\n            if (!(new_order['x_order'][i]['index'] === constraint_list['x_order'][i]['index']\r\n                || new_order['y_order'][i]['index'] === constraint_list['y_order'][i]['index']\r\n                || new_order['x_dist'][i]['index'] === constraint_list['x_dist'][i]['index']\r\n                || new_order['y_dist'][i]['index'] === constraint_list['y_dist'][i]['index'])) {\r\n                    ifConsistent = false\r\n                    break\r\n            } else {\r\n                continue\r\n            }\r\n        }\r\n    } else if (choice === 'middle') { // relative_position\r\n        for (let i = 0; i < seal_pic_num; i++) {\r\n            if (!(new_order['x_order'][i]['index'] === constraint_list['x_order'][i]['index']\r\n                || new_order['y_order'][i]['index'] === constraint_list['y_order'][i]['index'])) {\r\n                    ifConsistent = false\r\n                    break\r\n            } else {\r\n                continue\r\n            }\r\n        }\r\n    } else if (choice === 'low') { \r\n        // 没有操作，ifConsistent始终为true\r\n    }\r\n\r\n    return ifConsistent\r\n}\r\n\r\n// 对于计算结果进行整体平移\r\nfunction panning_overall(seal_mapped_list, container_param) {\r\n    const container_width = container_param['width'],\r\n          container_height = container_param['height']\r\n    let canvas_bound = {\r\n        left: seal_mapped_list.reduce((minValue, currentItem) => {\r\n                const itemValue = currentItem['layout_params']['x']\r\n                return itemValue < minValue ? itemValue : minValue\r\n            }, Infinity),\r\n        right: seal_mapped_list.reduce((maxValue, currentItem) => {\r\n                const itemValue = currentItem['layout_params']['x'] + currentItem['layout_params']['width']\r\n                return itemValue > maxValue ? itemValue : maxValue\r\n            }, -Infinity),\r\n        top: seal_mapped_list.reduce((minValue, currentItem) => {\r\n                const itemValue = currentItem['layout_params']['y']\r\n                return itemValue < minValue ? itemValue : minValue\r\n            }, Infinity),\r\n        buttom: seal_mapped_list.reduce((maxValue, currentItem) => {\r\n                const itemValue = currentItem['layout_params']['y'] + currentItem['layout_params']['height']\r\n                return itemValue > maxValue ? itemValue : maxValue\r\n            }, -Infinity)\r\n    }\r\n    // 没超出画布范围~success\r\n    if (canvas_bound['right'] - canvas_bound['left'] > container_width) {\r\n        console.log('x-axis布局超了...')\r\n        console.log('x-axis', canvas_bound['right'] - canvas_bound['left'], container_width)\r\n    } else {\r\n        console.log('x-axis', canvas_bound['right'] - canvas_bound['left'], container_width)\r\n    }\r\n    if (canvas_bound['buttom'] - canvas_bound['top'] > container_height) {\r\n        console.log('y-axis布局超了...')\r\n        console.log('y-axis', canvas_bound['buttom'] - canvas_bound['top'], container_height)\r\n    } else {\r\n        console.log('y-axis', canvas_bound['buttom'] - canvas_bound['top'], container_height)\r\n    }\r\n\r\n    for (let i in seal_mapped_list) {\r\n        const x_offset = (container_width - (canvas_bound['right'] - canvas_bound['left'])) / 2,\r\n              y_offset = (container_height - (canvas_bound['buttom'] - canvas_bound['top'])) / 2\r\n        seal_mapped_list[i]['layout_params']['x'] += (x_offset - canvas_bound['left'])\r\n        seal_mapped_list[i]['layout_params']['y'] += (y_offset - canvas_bound['top'])\r\n    }\r\n    return seal_mapped_list\r\n}","import { render } from \"./LayoutView.vue?vue&type=template&id=44eb1d3e&scoped=true\"\nimport script from \"./LayoutView.vue?vue&type=script&lang=js\"\nexport * from \"./LayoutView.vue?vue&type=script&lang=js\"\n\nimport \"./LayoutView.vue?vue&type=style&index=0&id=44eb1d3e&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44eb1d3e\"]])\n\nexport default __exports__","<template>\r\n    <el-dialog v-model=\"fullImageModel.show\" :title=\"fullImageModel.label\" top=\"5vh\" width=\"80%\">\r\n        <div style=\"height: 75vh; width: 70%;\">\r\n            <img :src=\"fullImageModel.src\" style=\"width: 100%; height: 100%; object-fit: contain;\">\r\n        </div>\r\n    </el-dialog>\r\n\r\n    <div v-show=\"cur_view === 'timeline' || (cur_view !== 'timeline' && selection.entity === null)\" class=\"barchart-container\">\r\n        <div class=\"barchart-title\" :style=\"{fontSize: rem * 1.5 + 'px'}\">{{ '鉴藏人物' }}</div>\r\n        <svg id=\"barchart-svg\"></svg>\r\n    </div>\r\n    <div v-if=\"cur_view !== 'timeline' && selection.entity !== null\" class=\"detail-info-container\">\r\n        <div class=\"info-row\" :style=\"{marginTop: '5%'}\">\r\n            <div class=\"seal-name\"\r\n                :style=\"{fontSize: rem * 1.5 + 'px', fontWeight: 'bold'}\"\r\n            >{{ sealDetailInfo['seal_name'] }}</div>\r\n            <div class=\"seal-number\"\r\n                :style=\"{fontSize: rem * 1.5 + 'px'}\"\r\n            >{{ sealDetailInfo['series_list'].length }}</div>\r\n        </div>\r\n        <div class=\"info-row\">\r\n            <div class=\"agent-time-group\">           \r\n                <div class=\"agent-icon\">\r\n                    <svg width=\"11\" height=\"14\" viewBox=\"0 0 11 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path d=\"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z\" stroke=\"#8F7B6C\" stroke-linejoin=\"round\"/>\r\n                    </svg>\r\n                </div>\r\n                <div class=\"agent-name\" :style=\"{fontSize: rem * 1.2 + 'px'}\">{{ sealDetailInfo['collector_name'] }}</div>\r\n            </div>\r\n            <div class=\"life-span\" :style=\"{fontSize: rem * 1.2 + 'px'}\">{{ sealDetailInfo['life_span'][0].toString() + '-' + sealDetailInfo['life_span'][1].toString() }}</div>\r\n        </div>\r\n        <div class=\"collector-intro\" :style=\"{fontSize: rem * 1.1 + 'px'}\">{{ sealDetailInfo['intro'] }}</div>\r\n        <div class=\"seal-series-pic\">\r\n            <div v-for=\"(item, index) in sealDetailInfo['image_href_list']\" :key=\"index\" class=\"single-seal-pic\">\r\n                <img :src=\"item\" style=\"{max-width: 100%; max-height: 11.7vh; cursor: 'pointer';\r\n                                         box-shadow: (selection.entity === 'seal_pic' && selection.value.includes(getSealPicHrefIndex(item))) ? '5px 5px 10px rgba(0, 0, 0, 0.5)' : 'none'}\"\r\n                    @click=\"fullImageModel.show =true, fullImageModel.src=item, fullImageModel.label = sealDetailInfo['seal_name'] + '-' + getSealPicHrefIndex(item)\">\r\n                <div :style=\"{fontSize: rem + 'px', color: '#724A2B'}\">{{ sealDetailInfo['seal_name'] + '-' + getSealPicHrefIndex(item) }}</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"glyth-container\">\r\n        <div class=\"glyth-title\" :style=\"{fontSize: rem * 1.3 + 'px'}\">{{ '层次结构' }}</div>\r\n        <div class=\"data-level-container\">\r\n            <div class=\"icon-row\">\r\n                <svg width=\"14\" height=\"18\" viewBox=\"0 0 14 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M11.7684 17.2573H2.23161C1.42355 17.2573 0.839502 16.2172 1.03952 15.1531C1.51156 12.6329 2.83166 10.5608 4.5518 9.54469C4.5518 9.54469 4.5598 9.54469 4.5598 9.53669C3.2477 8.72862 2.37563 7.28051 2.37563 5.62437C2.37563 3.07217 4.44779 1 7 1C9.55221 1 11.6244 3.07217 11.6244 5.62437C11.6244 7.28051 10.7523 8.72862 9.4402 9.53669C9.4402 9.54469 9.4482 9.54469 9.4482 9.54469C11.1683 10.5608 12.4884 12.6329 12.9605 15.1531C13.1605 16.2172 12.5765 17.2573 11.7684 17.2573Z\" stroke=\"#724A2B\" stroke-width=\"1.5\" stroke-linejoin=\"round\"/>\r\n                </svg>\r\n                <div class=\"icon-text\" :style=\"{fontSize: rem * 1.1 + 'px'}\">{{ '鉴藏人物' }}</div>\r\n            </div>\r\n            <div class=\"icon-row\">\r\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 12 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <rect x=\"0.75\" y=\"0.75\" width=\"10.5\" height=\"10.5\" stroke=\"#724A2B\" stroke-width=\"1.5\"/>\r\n                </svg>\r\n                <div class=\"icon-text\" :style=\"{fontSize: rem * 1.1 + 'px'}\">{{ '印章名称' }}</div>\r\n            </div>\r\n            <div class=\"icon-row\">\r\n                <svg width=\"13\" height=\"12\" viewBox=\"0 0 13 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <rect x=\"0.950195\" y=\"0.75\" width=\"10.5\" height=\"10.5\" rx=\"5.25\" stroke=\"#724A2B\" stroke-width=\"1.5\"/>\r\n                </svg>\r\n                <div class=\"icon-text\" :style=\"{fontSize: rem * 1.1 + 'px'}\">{{ '印章图片' }}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"glyth-title\" :style=\"{fontSize: rem * 1.3 + 'px'}\">{{ '印章比例' }}</div>\r\n        <div class=\"stamp-ratio-icon\">\r\n            <svg class=\"seal-ratio-icon-svg\"></svg>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nconst d3 = require(\"d3\");\r\nconst $ = require(\"jquery\");\r\n\r\nconst time_duration = 1000,\r\n      timeout_duration = 100\r\n\r\nimport LayoutCard from \"./layout_widgets/LayoutCard.vue\"\r\n\r\nimport * as Data from \"@/data/Data.js\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as DataProcess from \"@/utils/data_process\";\r\nimport * as SealCardFunc from \"@/utils/timeline/seal_card_func\";\r\nimport * as BarChartFunc from \"@/utils/left_panel/barchart_function\";\r\nimport * as DetailInfoFunc from \"@/utils/left_panel/detail_info_function\";\r\nimport * as RenderIconFunc from \"@/utils/left_panel/render_icon_function\";\r\n\r\nexport default {\r\n    name: \"LeftPanel\",\r\n    components: {\r\n    \r\n    },\r\n    data() {\r\n        return {\r\n            data: null,\r\n            cardList: [],\r\n            sealDetailInfo: null,\r\n            fullImageModel: {\r\n                show: false,\r\n                src: null,\r\n                label: null\r\n            },\r\n        }\r\n    },\r\n    props: [\"canvas_width\", \"canvas_height\"],\r\n    computed: {\r\n        ...mapState([\"language\", \"cur_view\", \"painting_name\", \"selection\", \"hover\", \"transition\", \"overlay_duration\", \"rem\"]),\r\n    },\r\n    watch: {\r\n        cur_view: function(newValue, oldValue) {\r\n            const self = this\r\n        },\r\n        selection: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (newVal.entity === 'seal_pic' && newVal.value.length > 0) { // 仅针对印章图片时显示detail_info\r\n                    console.log('selection in left panel', newVal)\r\n                    self.sealDetailInfo = DetailInfoFunc.getSealPicDetail(self.cardList, newVal.value)\r\n                }\r\n\r\n                if (self.cur_view === 'timeline') {\r\n                    BarChartFunc.barchartTransition(self.hover, newVal, self.data[\"collectors\"])\r\n                } else {\r\n                    // 无操作\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        hover: {\r\n            handler: function(newVal, oldVal) {\r\n                const self = this\r\n                if (self.cur_view === 'timeline') {\r\n                    BarChartFunc.barchartTransition(newVal, self.selection, self.data[\"collectors\"])\r\n                } else {\r\n                    // 无操作\r\n                }\r\n            },\r\n            deep: true\r\n        },\r\n        transition: {\r\n            handler: function (newVal, _) {\r\n                const self = this\r\n            },\r\n            deep: true,\r\n        },\r\n        cardList: {\r\n            handler: function (newVal, oldVal) {\r\n                const self = this\r\n            },\r\n            deep: true\r\n        },\r\n        sealDetailInfo: { // 左侧的seal信息框\r\n            handler: function (newVal, oldVal) {\r\n                const self = this\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    methods: {\r\n        initialize() { // 在切换到当前视图时需要重新刷新一遍\r\n            const self = this\r\n            \r\n        },\r\n        renderBarChart() {\r\n            const self = this\r\n            // self.data[\"collectors\"] = self.data[\"collectors\"].map(function(item, index) {\r\n            //     item['collector_index'] = index\r\n            //     return item\r\n            // })\r\n            BarChartFunc.renderBarchart(self.data[\"collectors\"])\r\n        },\r\n        getSealPicHrefIndex(href_link) { // 从href中提取seal pic index\r\n            return (href_link.split('/')[href_link.split('/').length - 1].split('.')[0]).replace('seal_', '') // type: string\r\n        }\r\n    },\r\n    mounted() {\r\n        const that = this\r\n\r\n        let whole_data = Data.read_data() // 首先读入总体的\r\n        for (let i in whole_data) {\r\n            if (whole_data[i]['painting_name'] === that.painting_name) {\r\n                that.data = whole_data[i]\r\n            }\r\n        }\r\n        that.cardList = SealCardFunc.SealCardMapping(that.data) // mapped seal pictures into list (In this step all seal pictures are included.)\r\n\r\n        setTimeout(() => {\r\n            that.renderBarChart()\r\n            RenderIconFunc.renderSealRatioIcon(that.rem)\r\n        }, timeout_duration)\r\n\r\n        that.initialize()\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$upper-panel-height: 80%;\r\n.barchart-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: $upper-panel-height;\r\n    left: 0%;\r\n    top: 0%;\r\n    border-bottom: 2px solid #8F7B6C;\r\n    // background-color: rgba(247, 171, 0, 0.05);\r\n    .barchart-title {\r\n        position: absolute;\r\n        left: 2.5%;\r\n        top: 0%;\r\n        height: 5%;\r\n        width: 95%;\r\n        display: flex;\r\n        align-items: center;\r\n        color: #724A2B;\r\n        font-weight: bold;\r\n    }\r\n    #barchart-svg {\r\n        position: absolute;\r\n        left: 2.5%;\r\n        top: 5%;\r\n        width: 95%;\r\n        height: 95%;\r\n    }\r\n}\r\n.detail-info-container {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: $upper-panel-height;\r\n    left: 0%;\r\n    top: 0%;\r\n\r\n    display: flex;\r\n    flex-direction: column;\r\n    border-bottom: 2px solid #8F7B6C;\r\n    // overflow-y: auto;\r\n    // background-color: rgba(247, 171, 0, 0.05);\r\n    .info-row {\r\n        color: #724A2B;\r\n        display: flex;\r\n        flex-direction: row;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding-left: 2.5%;\r\n        padding-right: 2.5%;\r\n        margin-bottom: 5%;\r\n        flex-shrink: 0;\r\n        .seal-number {\r\n            color: white;\r\n            padding-left: 2px;\r\n            padding-right: 2px;\r\n            background-color: #A56752;\r\n        }\r\n        .agent-time-group {\r\n            display: flex;\r\n            flex-direction: row;\r\n            align-items: center;\r\n            .agent-icon {\r\n                display: flex;\r\n                align-items: center;\r\n                svg {\r\n                    transform: scale(1.1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    .collector-intro {\r\n        // position: absolute;\r\n        // left: 2.5%;\r\n        // width: 95%;\r\n        padding-left: 2.5%;\r\n        padding-right: 2.5%;\r\n        text-align: left;\r\n        color: #724A2B;\r\n        line-height: 1.5;\r\n        flex-shrink: 0;\r\n        border-bottom: 2px solid #8F7B6C;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n    }\r\n    .seal-series-pic {\r\n        height: auto;\r\n        flex: 1;\r\n        margin-top: 5%;\r\n        padding-left: 10%;\r\n        padding-right: 10%;\r\n        overflow-y: auto;\r\n        // background-color: rgba(247, 171, 0, 0.15);\r\n        .single-seal-pic img {\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n.glyth-container {\r\n    position: absolute;\r\n    left: 0%;\r\n    top: $upper-panel-height;\r\n    width: 100%;\r\n    height: calc(100% - #{$upper-panel-height});\r\n    // background-color: rgba(247, 171, 0, 0.15);\r\n    .glyth-title {\r\n        color: #724A2B;\r\n        margin-top: 5%;\r\n        margin-bottom: 5%;\r\n        font-weight: bold;\r\n    }\r\n    .data-level-container {\r\n        padding-left: 20%;\r\n        padding-right: 20%;\r\n        .icon-row {\r\n            display: flex;\r\n            flex-direction: row;\r\n            justify-content: space-between;\r\n            align-items: center;\r\n            margin-top: 5%;\r\n            margin-bottom: 5%;\r\n            .icon-text {\r\n                color: #724A2B;\r\n            }\r\n        }\r\n    }\r\n    .stamp-ratio-icon {\r\n        flex: 1;\r\n        .seal-ratio-icon-svg {\r\n            height: 100%;\r\n            width: 100%;\r\n        }\r\n    }\r\n}\r\n</style>\r\n","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nconst time_duration = 1000\r\n\r\nexport function renderBarchart(collector_data_ori) {\r\n    const svg = d3.select(\"#barchart-svg\")\r\n    const svg_width = $(`#barchart-svg`).width(),\r\n          svg_height = $(`#barchart-svg`).height()\r\n    let collector_data = jsonCopy(collector_data_ori)\r\n    collector_data.sort((a, b) => b['seals'].length - a['seals'].length)\r\n    let max_seal_num = compute_max_seal_num(collector_data) // let max_seal_num = collector_data[0]['seals'].length\r\n    // console.log(\"svg_width\", svg_width, \"svg_height\", svg_height, \"max_seal_num\", max_seal_num) // success\r\n\r\n    let collector_group = svg.selectAll(\".collector-group\")\r\n                                .data(collector_data)\r\n                                .enter()\r\n                                .append(\"g\")\r\n                                .attr(\"class\", \"barchart-collector-group\")\r\n                                .attr(\"transform\", function(d, i) {\r\n                                    return \"translate(0,\" + (2 * i + 1) * svg_height / (2 * collector_data.length + 1) + \")\"\r\n                                })\r\n    let collector_rect = collector_group.append(\"rect\")\r\n                                        .attr(\"class\", \"collector-rect\")\r\n                                        .attr(\"x\", svg_width * 0.28)\r\n                                        .attr(\"y\", 0)\r\n                                        .attr(\"width\", (d, i) => d[\"seals\"].length / max_seal_num * svg_width * (1 - 0.28))\r\n                                        .attr(\"height\", svg_height / (2 * collector_data.length + 1))\r\n                                        // .attr(\"fill\", function(d, i) {\r\n                                        //     return TypeColor.color_list[d[\"collector_name\"]]\r\n                                        // })\r\n                                        .attr(\"fill\", \"#8F7B6C\")\r\n    let collector_name = collector_group.append(\"text\")\r\n                                        .attr(\"class\", \"collector-name-text\")\r\n                                        .attr(\"x\", svg_width / 100)\r\n                                        .attr(\"y\", 0)\r\n                                        .attr(\"dy\", svg_height / (2 * 1.5 * collector_data.length + 1))\r\n                                        .attr(\"fill\", \"#724A2B\")\r\n                                        // .attr(\"font-weight\", \"bold\")\r\n                                        .text(d => d[\"collector_name\"].includes(\"爱新觉罗·\") ? d[\"collector_name\"].replace(\"爱新觉罗·\", \"\") : d[\"collector_name\"])\r\n    let seal_num = collector_group.append(\"text\")\r\n                                    .attr(\"class\", \"seal-num-text\")\r\n                                    .attr(\"x\", svg_width * (1 - 0.75 * 0.1))\r\n                                    .attr(\"y\", 0)\r\n                                    .attr(\"dy\", svg_height / (2 * 1.5 * collector_data.length + 1))\r\n                                    .attr(\"fill\", (d, i) => d[\"seals\"].length / max_seal_num * svg_width * (3 - 0.1) / 4 + svg_width / 4 > svg_width * (1 - 0.75 * 0.1) ? \"#FFFFFF\" : \"#724A2B\")\r\n                                    .attr(\"text-anchor\", \"end\")\r\n                                    .text(d => d[\"seals\"].length.toString())\r\n}\r\n\r\nfunction compute_max_seal_num(collector_data) {\r\n    let max_seal_num = 0\r\n    for (let i = 0; i < collector_data.length; i++) {\r\n        if (collector_data[i][\"seals\"].length > max_seal_num) {\r\n            max_seal_num = collector_data[i][\"seals\"].length\r\n        }\r\n    }\r\n    return max_seal_num\r\n}\r\n\r\n// 改变barchart的transition\r\nexport function barchartTransition(hover, selection, collector_data_ori) {\r\n    // console.log('barchartTransition换位置啦') // success\r\n    let resorted_collector_data = jsonCopy(collector_data_ori)\r\n    resorted_collector_data.sort((a, b) => b['seals'].length - a['seals'].length)\r\n    let collector_dict = initializeCollectorDict(resorted_collector_data) // 通过dict实现\r\n    let selected_collector_name = null,\r\n        hover_collector_name = null\r\n    if (selection.entity !== null || hover.entity !== null) { // 当前有处于selection状态的entity(seal_name, 设置的只有一个selected seal name)\r\n        for (let i = 0; i < resorted_collector_data.length; i++) {\r\n            const cur_seal_list = resorted_collector_data[i][\"seals\"]\r\n            for (let j = 0; j < cur_seal_list.length; j++) {\r\n                if (cur_seal_list[j][\"seal_name\"] === selection.value) { // selection\r\n                    selected_collector_name = resorted_collector_data[i][\"collector_name\"]\r\n                }\r\n                if (cur_seal_list[j][\"seal_name\"] === hover.value) { // hover\r\n                    hover_collector_name = resorted_collector_data[i][\"collector_name\"]\r\n                }\r\n            }\r\n        }\r\n    } else { // selection, hover均为null\r\n        // collector_dict按照default来\r\n    }\r\n\r\n    // 将selected_collector_name对应的collector放在最前面\r\n    if (selected_collector_name !== null) {\r\n        const selected_index = resorted_collector_data.findIndex(obj => obj[\"collector_name\"] === selected_collector_name)\r\n        const selected_item = resorted_collector_data[selected_index]\r\n        resorted_collector_data.splice(selected_index, 1)\r\n        resorted_collector_data.unshift(selected_item)\r\n    }\r\n    // 将hover_collector_name对应的collector放在最前面\r\n    if (hover_collector_name !== null) {\r\n        const hover_index = resorted_collector_data.findIndex(obj => obj[\"collector_name\"] === hover_collector_name)\r\n        const hover_item = resorted_collector_data[hover_index]\r\n        resorted_collector_data.splice(hover_index, 1)\r\n        resorted_collector_data.unshift(hover_item)\r\n    }\r\n\r\n    // update collector_dict\r\n    for (let i = 0; i < resorted_collector_data.length; i++) {\r\n        collector_dict[resorted_collector_data[i][\"collector_name\"]] = i\r\n    }\r\n\r\n    // update barchart\r\n    const svg_height = $(`#barchart-svg`).height()\r\n    d3.selectAll('.barchart-collector-group')\r\n        .transition()\r\n        .duration(time_duration) // filter时的过渡\r\n        .attr('transform', d => {\r\n            const i = collector_dict[d[\"collector_name\"]]\r\n            return `translate(0, ${(2 * i + 1) * svg_height / (2 * resorted_collector_data.length + 1)})`\r\n        })\r\n        .attr(\"filter\", (d) => [...new Set([hover_collector_name, selected_collector_name])].includes(d[\"collector_name\"]) ?\r\n            'drop-shadow(0.8px 0.8px 0.8px rgb(0 0 0 / 0.6))' : 'none'\r\n        )\r\n}\r\n\r\n// 初始化collector_dict\r\nfunction initializeCollectorDict(collector_data) {\r\n    let collector_dict = {}\r\n    for (let i = 0; i < collector_data.length; i++) {\r\n        collector_dict[collector_data[i][\"collector_name\"]] = i\r\n    }\r\n    return collector_dict\r\n}","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nexport function getSealPicDetail(seal_list, selection_value) { // selection_value: list(寻找的是最后一个seal_pic index)\r\n    const seal_pic_index = selection_value[selection_value.length - 1]\r\n    let detail_panel_info = seal_list.find(function(obj) { // current clicked seal_pic\r\n                            return obj[\"index\"] === seal_pic_index\r\n                        })\r\n    let series_list_sorted = jsonCopy(detail_panel_info[\"series_list\"])\r\n    series_list_sorted = resortSealPicList(series_list_sorted, selection_value)\r\n    detail_panel_info[\"image_href_list\"] = series_list_sorted.map(function(obj) {\r\n        return \"http://vis.pku.edu.cn/seal_visualization/assets/seal_images/que_hua_qiu_se_tu_juan/seal_\" + obj + \".jpg\"\r\n    })\r\n    console.log('detail_panel_info', detail_panel_info)\r\n    return detail_panel_info\r\n}\r\n\r\nfunction resortSealPicList(seal_pic_list, selection_value_ori) {\r\n    // seal_pic_list: list\r\n    let selection_value = jsonCopy(selection_value_ori)\r\n    let lastElement = selection_value[selection_value.length - 1]\r\n    selection_value.pop() // 删除最后一个元素\r\n\r\n    // 过滤出包含 selection_value 的元素\r\n    let included_list = seal_pic_list.filter(item => selection_value.includes(item))\r\n\r\n    // 过滤出不包含 selection_value 的元素\r\n    let excluded_list = seal_pic_list.filter(item => !selection_value.includes(item) && item !== lastElement)\r\n\r\n    // 合并两个子数组（list1在list2前面）\r\n    let result_list = included_list.concat(excluded_list)\r\n    // 将被删除的元素添加到数组的开头\r\n    result_list.unshift(lastElement) // 当前点击的seal pic放在最前面\r\n\r\n    if (result_list.length === seal_pic_list.length) {\r\n        return result_list\r\n    } else {    \r\n        console.log('error: result_list.length !== seal_pic_list.length')\r\n        return seal_pic_list\r\n    }\r\n}\r\n","import * as d3 from \"d3\";\r\nconst $ = require(\"jquery\");\r\n\r\nimport { jsonCopy } from \"@/utils/copy\";\r\nimport * as TypeColor from \"@/theme/type_color\";\r\n\r\nexport function renderSealRatioIcon(rem) {\r\n    const svg_height = rem * 1.5, // svg高度 $(`.seal-ratio-icon-svg`).height()，现在替换为rem为计量高度\r\n          svg_width = $(`.seal-ratio-icon-svg`).width(), // svg宽度\r\n          radius = svg_height * 0.75 / 2\r\n\r\n    let svg = d3.select(`.seal-ratio-icon-svg`)\r\n    let ratio_group = svg.append('g')\r\n                            .attr('transform', `translate(${svg_width * 0.05},${svg_height * 0.05})`)\r\n    const arcGeneratorLeft = d3.arc()\r\n                                .innerRadius(0)\r\n                                .outerRadius(radius)\r\n                                .startAngle(Math.PI)\r\n                                .endAngle(2 * Math.PI)\r\n                            \r\n    const arcGeneratorRight = d3.arc()\r\n                                .innerRadius(0)\r\n                                .outerRadius(radius)\r\n                                .startAngle(0)\r\n                                .endAngle(Math.PI)\r\n\r\n    let total_stamped = ratio_group.append('g')\r\n                        .attr('class', 'total_stamped-icon')\r\n    // 定义路径数据\r\n    const total_path = `M ${radius} ${0} L ${svg_width * 0.85} ${0} A ${radius} ${radius} 0 1 1 ${svg_width * 0.85} ${radius * 2} L ${radius} ${2 * radius}` // A 5,5 0,0,1 150,75\r\n    total_stamped.append('path')\r\n                        .attr('d', total_path)\r\n                        .attr('fill', 'none')\r\n                        .attr('stroke', '#8F7B6C')\r\n    total_stamped.append('text')\r\n                    .attr('x', svg_width * 0.85)\r\n                    .attr('y', svg_height * 0.3)\r\n                    .attr('dy', svg_height * 0.3)\r\n                    .attr(\"text-anchor\", \"end\")\r\n                    .text('全部')\r\n                    .attr('font-size', svg_height * 0.7)\r\n                    .attr('fill', '#8F7B6C')\r\n\r\n\r\n    let collector_stamped = ratio_group.append('g')\r\n                                        .attr('class', 'collector_stamped-icon')\r\n    collector_stamped.append('rect') // 鉴藏者加盖印章的数目\r\n                        .attr('x', radius)\r\n                        .attr('y', 0)\r\n                        .attr('width', (svg_width * 0.85 - radius) * 0.5)\r\n                        .attr('height', svg_height * 0.75)\r\n                        .attr('fill', '#8F7B6C')\r\n                        .attr('stroke', '#8F7B6C')\r\n    collector_stamped.append('path')\r\n                        .attr('d', arcGeneratorLeft)\r\n                        .attr('fill', '#8F7B6C')\r\n                        .attr('transform', `translate(${radius},${radius})`)\r\n    collector_stamped.append('path')\r\n                        .attr('d', arcGeneratorRight)\r\n                        .attr('fill', '#8F7B6C')\r\n                        .attr('transform', `translate(${radius + (svg_width * 0.85 - radius) * 0.5},${radius})`)\r\n    collector_stamped.append('text')\r\n                        .attr('x', (svg_width * 0.85) * 0.5 + radius)\r\n                        .attr('y', svg_height * 0.3)\r\n                        .attr('dy', svg_height * 0.3)\r\n                        .attr(\"text-anchor\", \"end\")\r\n                        .text('已盖')\r\n                        .attr('font-size', svg_height * 0.7)\r\n                        .attr('fill', 'white')\r\n}","import { render } from \"./LeftPanel.vue?vue&type=template&id=12970b11&scoped=true\"\nimport script from \"./LeftPanel.vue?vue&type=script&lang=js\"\nexport * from \"./LeftPanel.vue?vue&type=script&lang=js\"\n\nimport \"./LeftPanel.vue?vue&type=style&index=0&id=12970b11&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-12970b11\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=1334cf7c&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1334cf7c&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=1334cf7c&scoped=true&lang=scss\"\n\nimport exportComponent from \"E:\\\\DataVis\\\\vis_system\\\\seal_visualization\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1334cf7c\"]])\n\nexport default __exports__","import { createRouter, createWebHashHistory } from 'vue-router'\r\n// import { defineAsyncComponent } from 'vue'\r\n\r\nconst routes = [\r\n  {\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHashHistory(),\r\n  routes\r\n})\r\n\r\nexport default router","import { createStore } from \"vuex\";\r\nimport * as d3 from \"d3\";\r\n\r\nconst debug = false;\r\n\r\n// const overlay_duration = 500;\r\n\r\nexport default createStore({\r\n    state: {\r\n        rem: null,\r\n        language: \"zh\",\r\n        cur_view: \"timeline\", // \"timeline\", \"overview\", \"layout\"\r\n        overlay_view: null,\r\n        overlay_duration: 2000,\r\n        transition: {\r\n            from: null,\r\n            to: null,\r\n            state: null,\r\n        },\r\n        selection: {\r\n            entity: null, // collector, seal_name, seal_pic 3个层级\r\n            value: [], // list (For seal_pic, the \"index\" attribute is stored in the list)\r\n        },\r\n        hover: {\r\n            entity: null,\r\n            value: []\r\n        },\r\n\r\n        // seal visualization\r\n        painting_name: '鹊华秋色图卷',\r\n        painting_pic: {\r\n            loaded: false,\r\n            width: null,\r\n            height: null\r\n        }\r\n    },\r\n    mutations: {\r\n        changeRem(state, payload) {\r\n            state.rem = payload;\r\n        },\r\n        changeLanguage(state, payload) {\r\n            state.language = payload;\r\n        },\r\n        changeCurView(state, payload) {\r\n            if (debug) console.log(\"changeCurView\", payload);\r\n            if (state.cur_view === payload) {\r\n                console.log(\"error: no change in view\");\r\n                return;\r\n            } else if (state.transition.state !== null) {\r\n                console.log(\"error: transition in progress\");\r\n                return;\r\n            }\r\n            state.transition = {\r\n                from: state.cur_view,\r\n                to: payload,\r\n                state: \"out\",\r\n            };\r\n        },\r\n        changeCurViewForce(state, payload) {\r\n            if (debug) console.log(\"changeCurView\", payload);\r\n            state.cur_view = payload;\r\n        },\r\n        // changeFilter(state, payload) {\r\n        //     if (debug) console.log(\"changeFilter\", payload);\r\n        //     let entity = payload.entity;\r\n        //     let value = payload.value;\r\n        //     state.filter[entity] = value;\r\n        // },\r\n        // changeSelection(state, payload) {\r\n        //     if (debug) console.log(\"changeSelection\", payload);\r\n        //     state.selection = payload;\r\n        // },\r\n        // changeHover(state, payload) {\r\n        //     if (debug) console.log(\"changeHover\", payload);\r\n        //     state.hover = payload;\r\n        // },\r\n        transCompleted(state, payload) {\r\n            if (debug) {\r\n                console.log(\"transCompleted\");\r\n                console.log(state.transition);\r\n            }\r\n            let trans = state.transition;\r\n            if (trans.state === null) {\r\n                console.log(\"error: no transition in progress\");\r\n            } else if (trans.state === \"out\") {\r\n                state.cur_view = trans.to;\r\n                state.overlay_view = trans.from;\r\n                trans.state = \"overlay\";\r\n                setTimeout(() => {\r\n                    trans.state = \"in\";\r\n                    state.overlay_view = null;\r\n                    console.log(\"overlay finished, transition in\");\r\n                }, state.overlay_duration);\r\n                if (debug) console.log(\"transition out finished, overlaying\");\r\n            } else if (trans.state === \"overlay\") {\r\n                console.log(\"error: overlaying\");\r\n            } else if (trans.state === \"in\") {\r\n                trans.state = null;\r\n                if (debug) console.log(\"transition finished\");\r\n            }\r\n        },\r\n\r\n        // seal visualization\r\n        changePaintingName(state, payload) {\r\n            state.painting_name = payload;\r\n        },\r\n        changeSelection(state, payload) {\r\n            if (debug) console.log(\"changeSelection\", payload);\r\n            state.selection = payload;\r\n        },\r\n        changeHover(state, payload) {\r\n            if (debug) console.log(\"changeHover\", payload);\r\n            state.hover = payload;\r\n        },\r\n        changePaintingPic(state, payload) {\r\n            state.painting_pic = payload\r\n        },\r\n    },\r\n    actions: {},\r\n    modules: {},\r\n});\r\n","import ElementPlus from 'element-plus'\r\nimport 'element-plus/lib/theme-chalk/index.css'\r\nimport locale from 'element-plus/lib/locale/lang/zh-cn'\r\n\r\nexport default (app) => {\r\n  app.use(ElementPlus, { locale })\r\n}\r\n","import { createApp } from \"vue\";\r\nimport App from \"./App.vue\";\r\nimport router from \"./router\";\r\nimport store from \"./store\";\r\nimport * as Data from \"@/data/Data.js\";\r\nimport installElementPlus from \"./plugins/element\";\r\nimport * as Icons from \"@element-plus/icons\";\r\n\r\n// import \"./assets/css/main.scss\"\r\n\r\nasync function run() {\r\n    await Data.load_data();\r\n    const app = createApp(App);\r\n    installElementPlus(app);\r\n    Object.keys(Icons).forEach((key) => {\r\n        app.component(key, Icons[key]);\r\n    });\r\n    app.use(store).use(router).mount(\"#app\");\r\n}\r\n\r\nrun();\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkseal\"] = self[\"webpackChunkseal\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9481); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","id","render_main","style","window_width","render_width","window_height","render_height","canvas_width","canvas_height","title","language","name","data","langs","zh","en","lang_dict","computed","methods","handleSelectChange","e","console","log","this","cur_lang","$store","commit","initialize","mounted","__exports__","views","view_name","idx","key","cur_view","view_names","components","overview","layout","timeline","checkbox_name","showoutflow","view_name_list","map","d","lang","period_legend","jp_period_legend","big_event","getBins","l","r","step","bins","d3","Math","ceil","getPeriodLegend","getBigEvent","getJpPeriodData","dynasties","China","宋","元","明","清","民国","Japan","平安","镰仓","南北朝","室町","江户","明治","大正","昭和","axis_labels","中国朝代","日本朝代","刊刻","最后一次在中国","首次传入日本","color_list","require","getCollectorColor","i","TypeColor","j","getPaintingNameEn","painting_name","margin","top","left","right","bottom","props","specialData","specialEvents","timeGran","time_range_click","event_offset","watch","newVal","oldVal","initializeTimeline","canvasWidth","canvasHeight","timeStart","timeEnd","isDynasty","isEvent","sWidth","width","sHeight","height","yearStart","yearEnd","dynasty","event","yearStep","self","rem","ih","iw","periodLegendData","bigEventData","jpPeriodData","timeScale","scaleLinear","domain","range","select","$el","remove","svg","append","attr","bottomAxis","axisBottom","ticks","tickFormat","gap","divloc","th","container","call","g","text","selectAll","join","viewBox","fill","xmlns","stroke","fullImageModel","show","label","src","sealContainerShow","cardList","item","index","containerParam","x","card_width","unit_pixel","card_height","seal_name","length","image_href","toString","$","timeScale_param","containerRange","draw_seal_rect","seal_data","TimescaleParam","parentDiv","document","getElementById","seal_circle_radius","clientWidth","clientHeight","unselected_layer","seal_group","single_seal","seals","array","seal_per_column","column_num","group_container_width","floor","SealCardMapping","seal_mapped_list","sort","a","b","cur_collector","collector_para","cur_seal","series_num","seal_pic_index_list","k","push","getSealCardContainerSize","renderRange","renderWidth","reconstructSealData","card_list","collector_seal_dict","hasOwnProperty","found_seal_name","renderSealIconGroup","icon_size","container_width","seal_icon","includes","renderSealPicIcon","circle_radius","cur_seal_pic","seal_pic_group","indexOf","card2circleLink","seal_pic_list","eventDiv","link_group","link_svg_offset","offset","seal_card_svg_offset","pathData","inflexion_radius","seal","link_pos","card_pos","circle_pos","card_point_pos","circle_point_pos","node","getBBox","average_point_pos","random","ifRender","y","moveTo","lineTo","arcTo","addEventListener","HoverNull","selection","sealCardGroup","querySelector","sealCardDivs","querySelectorAll","forEach","div","seal_rect_svg","sealRectGroup","seal_rect_collector_group","collector_div","sealRectGroupCollector","entity","HoverSealName","value","ifHoverNull","findFirstSealCard","processedId","split","judgeIfVisible","scrollTo","parseInt","offsetParent","behavior","seal_card_container","cur_div","ifVisible","scrollLeft","offsetWidth","time_duration","timeout_duration","seal_card_num","sealIconSize","renderSealCard","detectInteraction","handler","deep","hover","getTimeScale","setTimeout","renderLink","target","classList","contains","currentSealName","that","collectorContainerShow","collectorPosDict","renderSealRatio","collector_list","collector_name","owned_seal_num","filter","svg_height","svg_width","radius","ratio_group","arcGeneratorLeft","innerRadius","outerRadius","startAngle","PI","endAngle","arcGeneratorRight","total_stamped","total_path","collector_stamped","renderCollectorSealIconGroup","computeCollectorCardPosition","card_size","collector_pos_dict","cur_pos_param","prev_collector","prev_pos_param","collector_card_num","renderCollectorCard","jsonCopy","o","JSON","parse","stringify","data_","async","load_data","read_data","TimeAxis","SealCard","CollectorCard","newValue","oldValue","transition","_","to","from","getSubSet","slice","whole_data","imageSrc","small","alt","imageParam","visible","detailSealInfo","seal_detail","resize_scale","original_painting","export_thumbnail_rect_x","export_full_image_container_x","setThumbnailRectX","setFullImageContainerX","thumbnailDragFullImage","image_thumbnail_ratio","fullImageContainer","fullImageDragThumbnail","thumbnail_image_ratio","clickPrevNextButton","button_choice","container_x","cur_pic_offset","another_pic_index","another_pic_param","scroll_left","selection_value","Set","clickPrevNext","selected_seal_pic_list","complete","origin","painting_name_en","thumbnail_resize_scale","thumbnail_rect_x","$nextTick","checkWidth","renderThumbnailRect","getThumbnailParams","original_img","previewImage","default_x_offset","default_y_offset","default_zoom","rect_aspect_ratio","thumbnail_rect_group","rect","cur_event2rect_offset","drag","on","Number","newX","exportCardListInLayout","setExportcardListInLayout","overview2layout","transition_direction","painting_pic","copy_duration","move_duration","overview_resize_scale","container_scrollLeft","transition_layer","image_group","seal_image","enter","duration","find","obj","layout2overview","overviewFunc","OverviewCard","Thumbnail","offsetX","dragging","zoom","resize_scaleX","fullImageContainerX","get","tar","renderUnselectedLayer","renderSealRect","transition_handler","detectFullImageScroll","getPaintingParams","img_preview","Image","img","pic_width","pic_height","onload","loaded","group","seal_rect_group","srcElement","__data__","del_index","splice","trans","fr","st","state","showSealDiv","layout_params","showSealInfoCard","get_seal_x_group","seal_group_list","x_offset2prev","seal_pic","del","overlay_group_list","ifOverlay","modified_seal_group_index","min","group_right_bound","reduce","maxValue","currentItem","itemValue","Infinity","modify_sealGroup_offset2prev","merged_seal_group","seal_group_x_new","seal_group_seal_pic_new","cur_overlay_group","concat","merge_seal_group_list","merge_seal_group","seal_group_dist_list","third_quarter","round","seal_merged_list","cur_x","cur_seal_pic_list","cur_seal_group","cur_group_width","find_subgroup_centerX","sub_seal_group","group_left_bound","minValue","compute_abstract_layout","painting_params","container_height","painting_center","x_axis","y_axis","resize_seal_size","LayoutFuncV2","whole_modified_seal_list","sub_seal_mapped_list","cur_centerX","constraint_list","generate_constraint_list","seal_detect_list","generate_seal_detect_list","modified_seal_list","rescale_seal_dist","canvas_area","max_area","min_area","sum_log_area","total","ave_area","area_resize_scale","logScale1","logScale2","sqrt","offset2prev","redefine_seal_list","seal_detect_list_copy","cur_redefined_seal","conflict_param","ifConflict","conflict_list","detectOverlay","moving_value","minimum_direction_moving_value","redefined_params","optimized_moving_direction","modified_redefined_seal","prev_direction","cur_substitute_seal_index","re_moving_value","redefined_params_again","seal_x_order_list","seal_y_order_list","seal_x_dist_list","seal_y_dist_list","x_order","y_order","x_dist","y_dist","center_x","center_y","pow","moving_value_list","cur_conflict_seal","cur2conflict","deta_x","deta_y","up","down","cur_detected_seal","ifConflict2Current","moving_index","moving_direction","seal_mapped_list_copy","direction_value","foundObject","found_index_number","foundObject_original_position","findDirection","new_seal_order","ifConsistent","judge_order_consistency","keys","Object","minKey","direction","new_order","choice","seal_pic_num","LayoutCard","seal_pic_index","rx","sealDetailInfo","getSealPicHrefIndex","renderBarchart","collector_data_ori","collector_data","max_seal_num","compute_max_seal_num","collector_group","replace","barchartTransition","resorted_collector_data","collector_dict","initializeCollectorDict","selected_collector_name","hover_collector_name","cur_seal_list","selected_index","findIndex","selected_item","unshift","hover_index","hover_item","getSealPicDetail","seal_list","detail_panel_info","series_list_sorted","resortSealPicList","selection_value_ori","lastElement","pop","included_list","excluded_list","result_list","renderSealRatioIcon","renderBarChart","href_link","baseSize","renderComponent","SwitchView","Title","SwitchLanguage","Timeline","Overview","LayoutView","LeftPanel","setRem","scale","max","documentElement","fontSize","setCanvas","window","innerWidth","innerHeight","render","routes","router","createRouter","history","createWebHashHistory","debug","createStore","overlay_view","overlay_duration","mutations","changeRem","payload","changeLanguage","changeCurView","changeCurViewForce","transCompleted","changePaintingName","changeSelection","changeHover","changePaintingPic","actions","modules","app","use","ElementPlus","locale","run","Data","createApp","App","installElementPlus","Icons","component","store","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","fulfilled","every","n","getter","__esModule","definition","defineProperty","enumerable","globalThis","Function","prop","prototype","Symbol","toStringTag","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}