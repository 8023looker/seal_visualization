(function(){"use strict";var e={9481:function(e,t,a){var i=a(4220),n=a(9812),l=a(5893);const r={class:"app backgrounded"},o={class:"header"},s={class:"left-panel"},c={class:"main-panel"},d={key:0,id:"main-view"};function h(e,t,a,h,u,p){const m=(0,n.up)("router-view"),g=(0,n.up)("Title"),_=(0,n.up)("SwitchView"),f=(0,n.up)("LeftPanel"),w=(0,n.up)("Overview"),v=(0,n.up)("Timeline"),x=(0,n.up)("LayoutView");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(m),(0,n._)("div",r,[u.render_main?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"app-canvas",style:(0,l.j5)({left:(u.window_width-u.render_width)/2+"px",top:(u.window_height-u.render_height)/2+"px",width:u.render_width+"px",height:u.render_height+"px"})},[(0,n._)("div",o,[(0,n.Wm)(g),(0,n.Wm)(_)]),(0,n._)("div",s,[(0,n.Wm)(f)]),(0,n._)("div",c,[u.render_main?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.wy)((0,n.Wm)(w,{canvas_width:u.canvas_width,canvas_height:u.canvas_height},null,8,["canvas_width","canvas_height"]),[[i.F8,"overview"===e.cur_view||"overview"===e.overlay_view]]),(0,n.wy)((0,n.Wm)(v,{canvas_width:u.canvas_width,canvas_height:u.canvas_height},null,8,["canvas_width","canvas_height"]),[[i.F8,"timeline"===e.cur_view]]),(0,n.wy)((0,n.Wm)(x,{canvas_width:u.canvas_width,canvas_height:u.canvas_height},null,8,["canvas_width","canvas_height"]),[[i.F8,"layout"===e.cur_view||"layout"===e.overlay_view]])])):(0,n.kq)("",!0)])],4)):(0,n.kq)("",!0)])],64)}const u={class:"container"},p={class:"title-name"};function m(e,t,a,i,r,o){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",p,(0,l.zw)(r.title[e.language]),1)])}var g=a(5121);a(2837),a(3570);var _={name:"Title",data(){return{langs:["zh","en"],title:{zh:"印章可视化",en:"Seal Visualization"},lang_dict:{zh:"中文",en:"English"}}},computed:{...(0,g.rn)(["language"])},methods:{handleSelectChange(e){console.log(e),this.cur_lang=e,this.$store.commit("changeLanguage",e)},initialize(){}},mounted(){this.initialize()}},f=a(8998);const w=(0,f.Z)(_,[["render",m],["__scopeId","data-v-49ce326a"]]);var v=w;const x={class:"container"},y={class:"buttons"},C=["onClick"];function S(e,t,a,i,r,o){return(0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",y,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.views,((t,a)=>((0,n.wg)(),(0,n.iD)("div",{key:"view-buttion-"+a,class:(0,l.C_)(t===e.cur_view?"button selected":"button"),onClick:a=>"timeline"===t||"timeline"===e.cur_view?e.$store.commit("changeCurViewForce",t):e.$store.commit("changeCurView",t)},(0,l.zw)(r.view_names[t][e.language]),11,C)))),128))])])}a(2837),a(3570);var P={name:"SwitchView",components:{},data(){return{views:["overview","layout","timeline"],view_names:{overview:{zh:"总览",en:"Overview"},layout:{zh:"抽象布局",en:"Abstract Layout"},timeline:{zh:"时间线",en:"Timeline"}},checkbox_name:{zh:"展示流出事件",en:"Show Outflow Events"},showoutflow:!0}},computed:{...(0,g.rn)(["language","cur_view"]),view_name_list(){return this.views.map((e=>this.view_names[e][this.language]))}},methods:{initialize(){}},mounted(){this.initialize()}};const z=(0,f.Z)(P,[["render",S],["__scopeId","data-v-1705f66d"]]);var b=z;const k={class:"container"},I={class:"langs"},L={class:"lang"};function j(e,t,a,i,r,o){return(0,n.wg)(),(0,n.iD)("div",k,[(0,n._)("div",I,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.langs,((e,t)=>((0,n.wg)(),(0,n.iD)("div",L,(0,l.zw)(e),1)))),256))])])}var $={name:"SwitchLanguage",data(){return{langs:["zh","en","jp"]}},computed:{...(0,g.rn)(["language"])},methods:{initialize(){}},mounted(){this.initialize()}};const M=(0,f.Z)($,[["render",j],["__scopeId","data-v-5531fe56"]]);var A=M;const D=e=>((0,n.dD)("data-v-1e6d7a76"),e=e(),(0,n.Cn)(),e),T={class:"timeline-container"},B={class:"seal-card"},F={class:"time-axis"},E={class:"collector-card"},O=D((()=>(0,n._)("div",{class:"link-container"},null,-1)));function H(e,t,a,i,l,r){const o=(0,n.up)("SealCard"),s=(0,n.up)("TimeAxis"),c=(0,n.up)("CollectorCard");return(0,n.wg)(),(0,n.iD)("div",T,[(0,n._)("div",B,[(0,n.Wm)(o,{canvas_width:a.canvas_width,canvas_height:a.canvas_height,data:l.data},null,8,["canvas_width","canvas_height","data"])]),(0,n._)("div",F,[(0,n.Wm)(s,{canvas_width:a.canvas_width,canvas_height:a.canvas_height,data:l.data},null,8,["canvas_width","canvas_height","data"])]),(0,n._)("div",E,[(0,n.Wm)(c,{canvas_width:a.canvas_width,canvas_height:a.canvas_height,data:l.data},null,8,["canvas_width","canvas_height","data"])]),O])}const V={class:"timeAxis-container"};function q(e,t,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",V)}var Z=a(2837);let W=[["宋",960,1271],["元",1271,1368],["明",1368,1644],["清",1644,1912],["民国",1912,1950]],R=[["平安",960,1192],["镰仓",1192,1334],["南北朝",1334,1392],["室町",1392,1603],["江户",1603,1869],["明治",1869,1912],["大正",1912,1927],["昭和",1927,1965]],Y=[["秦末农民起义",-209],["文景之治",-104],["夷陵之战",221],["永嘉之乱",311],["贞观之治",627],["安史之乱",755],["陈桥兵变",960],["靖康之乱",1127],["襄阳之战",1267],["明初大移民",1370],["满清入关",1644]];function N(e,t,a){let i=Z.range(Math.ceil((t-e)/a)).map((t=>[e+t*a,e+t*a+a]));return i}function X(){return W}function J(){return Y}function K(){return R}const U={China:{"宋":{zh:"宋",en:"Song"},"元":{zh:"元",en:"Yuan"},"明":{zh:"明",en:"Ming"},"清":{zh:"清",en:"Qing"},"民国":{zh:"民国",en:"Republic of China"}},Japan:{"平安":{zh:"平安",en:"Heian Period"},"镰仓":{zh:"镰仓",en:"Kamakura Period"},"南北朝":{zh:"南北朝",en:"North and South Dynasties"},"室町":{zh:"室町",en:"Muromachi Period"},"江户":{zh:"江户",en:"Edo Period"},"明治":{zh:"明治",en:"Meiji Period"},"大正":{zh:"大正",en:"Taisho Period"},"昭和":{zh:"昭和",en:"Showa Period"}}},G={"时间（公元）":{zh:"时间（公元）",en:"Time (AD)"},"中国朝代":{zh:"中国朝代",en:"Chinese Dynasty"},"日本朝代":{zh:"日本朝代",en:"Japanese Dynasty"},"刊刻":{zh:"刊刻",en:"Engrave"},"最后一次在中国":{zh:"最后一次在中国",en:"Last Seen in China"},"首次传入日本":{zh:"首次传入日本",en:"First Introduced to Japan"}};let Q={"项元汴":"#A56752","董其昌":"#85A552","爱新觉罗·永琰":"#52A5A5","纳兰性德":"#A59852","--":"#AAAAAA","陆质雅":"#5282A5","爱新觉罗·弘历":"#A55266","项铨":"#525FA5","曹溶":"#36852A","梁清标":"#A55293","文彭":"#43AE29","张应甲":"#54D8E1","郑板桥":"#E1548F","爱新觉罗·溥仪":"#937E10","张南阳":"#286C53"};a(3570);function ee(e){for(let t in e["collectors"]){e["collectors"][t]["collector_color"]=Q[e["collectors"][t]["collector_name"]];for(let a in e["collectors"][t]["seals"])e["collectors"][t]["seals"][a]["collector_color"]=Q[e["collectors"][t]["collector_name"]]}return e}function te(e){if("鹊华秋色图卷"===e)return"que_hua_qiu_se_tu_juan"}const ae=a(2837),ie=a(3570),ne={top:.01,left:.01,right:.01,bottom:.01};var le={name:"TimeAxis",props:["canvasWidth","canvasHeight","timeStart","timeEnd","isEvent","isDynasty","events"],data(){return{data:null,specialData:{},specialEvents:{},timeGran:"year",time_range_click:null,event_offset:0}},props:["canvas_width","canvas_height","data"],computed:{...(0,g.rn)(["yearRange","transition","rem","overlay_duration","cur_view","language","painting_name"])},watch:{language:function(e,t){console.log("timeAxis切换语言",e),this.initializeTimeline(this.canvasWidth,this.canvasHeight,this.timeStart,this.timeEnd,this.isDynasty,this.isEvent)}},methods:{initializeTimeline(e=.99*ie(".main-panel").width(),t=.1*ie(".main-panel").height(),a=1450,i=1965,n,l,r=25){const o=this,s=e;console.log("timeAxisSize",[e,t]),console.log("rem",this.rem),console.log("timeAxis-sWidth-sHeight",e,t);const c=t/e*s;let d=c*(1-ne.top-ne.bottom),h=s*(1-ne.left-ne.right);this.bins=N(a,i,r),this.periodLegendData=X(),this.bigEventData=J(),this.jpPeriodData=K(),console.log("yearStart, yarEnd",[a,i]),this.timeScale=ae.scaleLinear().domain([a,i]).range([.08*e,h]);this.timeScale(a+r),this.timeScale(a);ae.select(this.$el).select("svg").remove(),this.svg=ae.select(this.$el).append("svg").attr("height",`${t}`).attr("width",`${h}`);let u=ae.axisBottom(this.timeScale).ticks((i-a)/r).tickFormat((e=>e)),p=d/15,m=d/5,g=d/10;this.container=this.svg.append("g").attr("id","timeline-full-axis"),this.container.append("g").call((t=>{t.append("line").attr("transform","translate(0, 1.5)").attr("stroke","#6a4c2a").attr("x1",0).attr("x2",.08*e-2*p).attr("stroke-width",1.5)})),this.container.append("g").call((t=>{t.append("line").attr("transform",`translate(0, ${3*m-m/3+p+g})`).attr("stroke","#6a4c2a").attr("x1",0).attr("x2",.08*e-2*p).attr("stroke-width",1.5)})),this.container.append("g").attr("transform",`translate(0, ${p})`).call((e=>{e.append("rect").attr("x",0).attr("y",m/2).attr("width",m/4).attr("height",m/4).attr("stroke","#6a4c2a").attr("fill","#6a4c2a"),e.append("text").attr("x",m/2).attr("y",5*m/6).style("fill","#6a4c2a").attr("font-size",.9*o.rem).attr("font-family","FZQINGKBYSJF").text((()=>"zh"===this.language?G["时间（公元）"].zh:"en"===this.language?G["时间（公元）"].en:void 0))})),this.container.append("g").call((e=>{e.append("rect").attr("x",0).attr("y",3*m-5*m/12).attr("width",m/4).attr("height",m/4).attr("stroke","#6e4d2b").attr("fill","#6e4d2b"),e.append("text").attr("x",m/2).attr("y",3*m-m/12).style("fill","#6e4d2b").attr("font-size",.9*o.rem).attr("font-family","FZQINGKBYSJF").text((()=>"zh"===this.language?"朝代":"en"===this.language?"Dynasty":void 0))})),this.event_offset=3*m-m/5+2*p+g,this.container.append("g").attr("transform","translate(0, 0)").call(u).call((e=>{e.select(".domain").attr("stroke","#6a4c2a").attr("stroke-width",2).attr("transform","translate(0, 1.5)"),e.selectAll(".tick").append("line").attr("stroke","#ad9278").attr("y2",(function(e){return e%100===0?10:6})).attr("stroke-width",1),e.selectAll("text").text((function(e){return 0==e?1:e})).attr("font-size",(function(e){return e%100===0?.6*o.rem:.5*o.rem})).attr("dy",(function(e){return e%100===0?5:2})).attr("font-weight",(e=>e%100===0?"bold":null)).attr("fill","#5a3a20").attr("alignment-baseline","hanging")})),this.container.append("g").attr("transform",`translate(0, ${1.7*m+m/5})`).call((t=>{t.append("line").attr("stroke","#ad9278").attr("x1",.08*e).attr("x2",h).attr("stroke-width",.8)})),this.container.append("g").selectAll("g").data(this.periodLegendData).join("g").attr("x",(e=>this.timeScale(e[0]))).attr("transform",(e=>`translate(${this.timeScale(e[1])}, 0)`)).call((e=>{e.append("line").attr("transform",`translate(0, ${5*m/2-.5*p})`).attr("stroke","#ad9278").attr("y2",g+m/5).attr("stroke-width",.8).style("display",(e=>"宋"===e[0]?"none":"block")),e.append("text").attr("transform",`translate(3, ${5*m/2-.5*p+3*g/4})`).text((e=>"zh"===this.language?U.China[e[0]].zh:"en"===this.language?U.China[e[0]].en:void 0)).attr("x",(e=>.5*(this.timeScale(e[2])-this.timeScale(e[1]))-3)).attr("y",-5),e.selectAll("text").attr("font-family","FZQINGKBYSJF").attr("font-size",.8*o.rem).attr("fill","#6e4d2b").attr("alignment-baseline","hanging").attr("text-anchor","middle").style("cursor","pointer")})),this.container.append("line").attr("transform",`translate(0, ${3*m-m/3+p+g})`).attr("x1",.08*e).attr("x2",h).attr("stroke","#6a4c2a").attr("stroke-width",2)}},mounted(){this.initializeTimeline(this.canvasWidth,this.canvasHeight,this.timeStart,this.timeEnd,this.isDynasty,this.isEvent)}};const re=(0,f.Z)(le,[["render",q],["__scopeId","data-v-7c809e74"]]);var oe=re;const se=e=>((0,n.dD)("data-v-32c76cac"),e=e(),(0,n.Cn)(),e),ce={style:{height:"75vh",width:"70%"}},de=["src"],he={class:"seal-card-container",id:"seal-card-container"},ue=["id"],pe=["src","onClick"],me=se((()=>(0,n._)("div",{class:"agent-icon"},[(0,n._)("svg",{width:"11",height:"14",viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z",stroke:"#8F7B6C","stroke-linejoin":"round"})])],-1))),ge=se((()=>(0,n._)("div",{class:"time-icon"},[(0,n._)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z",fill:"#8F7B6C"})])],-1))),_e=["id"],fe=se((()=>(0,n._)("div",{class:"seal-circle-container",id:"seal-circle-container"},null,-1)));function we(e,t,a,i,r,o){const s=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s,{modelValue:r.fullImageModel.show,"onUpdate:modelValue":t[0]||(t[0]=e=>r.fullImageModel.show=e),title:r.fullImageModel.label,top:"5vh",width:"80%"},{default:(0,n.w5)((()=>[(0,n._)("div",ce,[(0,n._)("img",{src:r.fullImageModel.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,de)])])),_:1},8,["modelValue","title"]),(0,n._)("div",he,[r.sealContainerShow?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(r.cardList,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"seal-card",style:(0,l.j5)({left:r.containerParam.x+r.containerParam.card_width*(t+.05)*12.4/10-2*r.containerParam.unit_pixel+"px",top:"2%",height:1.1*r.containerParam.card_height+"px",width:1*r.containerParam.card_width+4*r.containerParam.unit_pixel+"px"})},[(0,n._)("div",{class:"seal-index-rect",style:(0,l.j5)({paddingLeft:2*r.containerParam.unit_pixel+"px",paddingRight:2*r.containerParam.unit_pixel+"px",height:18*r.containerParam.unit_pixel+"px",fontSize:16*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["index"]),5),(0,n._)("div",{class:"card-rect",id:"seal-card-"+e["seal_name"]+"-"+e["index"],style:(0,l.j5)({top:.05*r.containerParam.card_height+"px",height:r.containerParam.card_height+"px",left:0*r.containerParam.unit_pixel+"px",width:.9*r.containerParam.card_width+"px"})},[(0,n._)("div",{class:"seal-name",style:(0,l.j5)({fontSize:e.seal_name.length<=6?.9*r.containerParam.card_width/6.5+"px":.9*r.containerParam.card_width/(e.seal_name.length+.5)+"px",top:15*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["seal_name"]),5),(0,n._)("div",{class:"pic-row",style:(0,l.j5)({top:43*r.containerParam.unit_pixel+"px",height:64*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"seal-pic",style:(0,l.j5)({height:75*r.containerParam.unit_pixel+"px",width:75*r.containerParam.unit_pixel+"px"})},[(0,n._)("img",{src:e.image_href,style:{"{max-width":"100%","max-height":"100%","margin-top":"0em","margin-bottom":"0em, cursor: 'pointer'}"},onClick:t=>(r.fullImageModel.show=!0,r.fullImageModel.src=e.image_href,r.fullImageModel.label=e.seal_name)},null,8,pe)],4)],4),(0,n._)("div",{class:"seal-page",style:(0,l.j5)({top:107*r.containerParam.unit_pixel+"px",height:8*r.containerParam.unit_pixel+"px"})},null,4),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:120*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-time-group",style:(0,l.j5)({gap:2*r.containerParam.unit_pixel+"px"})},[me,(0,n._)("div",{class:"agent-name",style:(0,l.j5)({fontSize:12*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["collector_name"]),5)],4),(0,n._)("div",{class:"life-span",style:(0,l.j5)({fontSize:11*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["life_span"][0].toString()+"-"+e["life_span"][1].toString()),5)],4),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:135*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-time-group",style:(0,l.j5)({gap:2*r.containerParam.unit_pixel+"px"})},[ge,(0,n._)("div",{class:"time-span",style:(0,l.j5)({fontSize:12*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["stamped_year"][0].toString()+"-"+e["stamped_year"][1].toString()),5)],4)],4)],12,ue),(0,n._)("div",{class:"seal-pic-icon-container",style:(0,l.j5)({top:.05*r.containerParam.card_height+"px",left:.9*r.containerParam.card_width+2*r.containerParam.unit_pixel+"px",width:.1*r.containerParam.card_width+"px",height:r.containerParam.card_height+"px"})},[((0,n.wg)(),(0,n.iD)("svg",{class:"seal-pic-icon-svg",id:"seal-pic-icon-svg-"+e["index"]},null,8,_e))],4)],4)))),128)):(0,n.kq)("",!0)]),fe],64)}const ve=a(3570),xe={top:.01,left:.01,right:.01,bottom:.01};function ye(){let e=1450,t=1965,a=.99*ve(".main-panel").width(),i=[.08*a,a*(1-xe.left-xe.right)];return{domain:[e,t],range:i}}const Ce=a(3570),Se={top:.01,left:.01,right:.01,bottom:.01};let Pe;function ze(e,t){Pe=Z.scaleLinear().domain(ye()["domain"]).range(ye()["range"]);let a=document.getElementById("seal-circle-container");const i=t/3;Z.select(".seal-circle-container").selectAll("svg").remove();let n=Z.select(".seal-circle-container").append("svg").attr("class","seal-circle-svg").attr("width",a.clientWidth*(1-Se.left-Se.right)).attr("height",a.clientHeight),l=n.append("g").attr("class","seal-rect-unselected-layer");l.append("rect").attr("x",0).attr("y",0).attr("width",a.clientWidth*(1-Se.left-Se.right)).attr("height",a.clientHeight).attr("fill","white").style("opacity",0);let r=n.selectAll(".seal-rect-group").data(e["collectors"]).join("g").attr("class","seal-rect-group").attr("id",(e=>`${e["collector_name"]}-seal-circle-group`)).attr("transform",(e=>`translate(${Pe((e["life_span"][0]+e["life_span"][1])/2)},0)`)),o=r.selectAll("g").data((e=>e.seals)).join("g").attr("transform",((e,t,a)=>{const n=6,l=Math.ceil(a.length/n),r=l*i*2+(l-1)*i*.1;return`translate(${Math.floor(t/6)*i*2.1-r/2-i},${.9*Ce(".seal-circle-svg").height()-t%6*i*2.5-1.1*i})`}));o.append("rect").attr("class","seal-single-rect").attr("id",(e=>`${e["seal_name"]}-circle`)).attr("x",0).attr("y",0).attr("width",1.8*i).attr("height",1.8*i).attr("fill",(e=>e["collector_color"])).append("title").text((e=>`${e.seal_name}`))}function be(e){let t=[];e["collectors"].sort(((e,t)=>(e["life_span"][0]+e["life_span"][1])/2<(t["life_span"][0]+t["life_span"][1])/2?-1:(e["life_span"][0]+e["life_span"][1])/2>(t["life_span"][0]+t["life_span"][1])/2?1:0));for(let a in e["collectors"]){const i=e["collectors"][a],n={collector_id:i["collector_id"],collector_id_ori:i["collector_id_ori"],collector_name:i["collector_name"],intro:i["intro"],life_span:i["life_span"],collector_color:Q[i["collector_name"]]};for(let e in i["seals"]){const a=i["seals"][e],l=a["seal_name"],r=a["seal_pic"].length;let o=[];for(let e in a["seal_pic"])o.push(a["seal_pic"][e]["index"]);for(let s in a["seal_pic"])t.push({...a["seal_pic"][s],seal_name:l,series_num:r,series_list:o,image_href:"http://vis.pku.edu.cn/seal_visualization/assets/seal_images/que_hua_qiu_se_tu_juan/seal_"+a["seal_pic"][s]["index"]+".jpg",collector_seal_offset:e,stamped_year:i["life_span"],...n})}}return console.log("seal_mapped_list",t),t}function ke(){let e=.99*Ce(".main-panel").width(),t=[.08*e,e*(1-Se.left-Se.right)],a=t[1]-t[0];return{x:.08*e,width:a}}function Ie(e){let t={};for(let a in e)if(t.hasOwnProperty(e[a]["collector_name"])){let i=!1;for(let n in t[e[a]["collector_name"]])if(t[e[a]["collector_name"]][n]["seal_name"]===e[a]["seal_name"]){i=!0,t[e[a]["collector_name"]][n]["seal_pic"].push(e[a]);break}i||t[e[a]["collector_name"]].push({seal_name:e[a]["seal_name"],seal_pic:[e[a]]})}else t[e[a]["collector_name"]]=[{seal_name:e[a]["seal_name"],seal_pic:[e[a]]}];return t}function Le(e,t){const a=Ce(".seal-icon-group").width(),i=(a-6*t)/5;let n=Ie(e);for(let l in e){let r=n[e[l]["collector_name"]],o=Z.select(`#seal-icon-group-${e[l]["index"]}`).attr("width",a).attr("height",Math.ceil(r.length/6)*t+.3*t*1+(Math.ceil(r.length/6)-1)*t*.4);o.selectAll("g").remove();let s=o.selectAll("g").data(r).join("g").attr("class",(e=>`seal-icon-rect-${e["seal_name"]}`)).attr("transform",((e,a)=>`translate(${a%6*(t+i)},${Math.floor(a/6)*t*1.4+.3*t})`));s.append("rect").attr("x",0).attr("y",0).attr("width",t).attr("height",t).attr("fill",(e=>e["seal_pic"][0]["collector_color"])).attr("fill-opacity",(t=>t["seal_pic"][0]["series_list"].includes(e[l]["index"])?1:.6)),s.append("text").attr("x",t/2).attr("y",t/2).attr("dy",.325*t).attr("text-anchor","middle").text((e=>e["seal_pic"].length)).attr("font-size",1*t).attr("fill","white").style("visibility",(e=>1===e["seal_pic"].length?"hidden":"visible")),s.append("title").text((e=>`${e.seal_name}`))}}function je(e,t){const a=120*t*(.1*.8)/1.8;for(let i in e){const t=e[i];let n=Z.select(`#seal-pic-icon-svg-${t["index"]}`).attr("height",(t["series_list"].length+1)*a*2);n.selectAll("g").remove();let l=n.append("g").attr("class","seal_pic_group");l.selectAll("circle").data(t["series_list"]).join("circle").attr("cx",1.35*a).attr("cy",((e,t)=>(2*t+1)*a)).attr("r",a).attr("fill",Q[t["collector_name"]]).attr("fill-opacity",((e,a)=>t["series_list"].indexOf(t["index"])===a?1:.5)).attr("stroke","none")}}const $e=a(3570);function Me(e,t){Z.select("#card2circle-link-svg").selectAll("g").remove();let a=document.getElementById("seal-card-container"),i=Z.select("#card2circle-link-svg").append("g").attr("class","card2circle-group"),n=$e("#card2circle-link-svg").offset(),l=($e(".seal-circle-svg").offset(),$e(".seal-card-container").offset()),r=Z.path();const o=t;for(let s in e){const c=e[s];let d,h=$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).offset(),u=$e(`#${c["seal_name"]}-circle`).offset(),p={top:h.top+$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).height()+2*t,left:h.left+$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).width()/2},m={top:u.top,left:u.left+Z.select(`#${c["seal_name"]}-circle`).node().getBBox().width/2},g={top:(p.top+m.top)/2+Math.random()*t,left:(p.left+m.left)/2},_=!(p.left<l.left||p.left>l.left+$e(".seal-card-container").width()||m.left<l.left||m.left>l.left+$e(".seal-card-container").width());_&&(d=[{x:p.left-n.left,y:p.top-n.top},{x:p.left-n.left,y:g.top-n.top-o},{x:p.left-m.left>0?p.left-o-n.left:p.left+o-n.left,y:g.top-n.top},{x:p.left-m.left>0?m.left+o-n.left:m.left-o-n.left,y:g.top-n.top},{x:m.left-n.left,y:g.top-n.top+o},{x:m.left-n.left,y:m.top-n.top}],r.moveTo(d[0].x,d[0].y),r.lineTo(d[1].x,d[1].y),r.arcTo(d[1].x,d[2].y,d[2].x,d[2].y,o),r.lineTo(d[3].x,d[3].y),r.arcTo(d[4].x,d[3].y,d[4].x,d[4].y,o),r.lineTo(d[5].x,d[5].y),Z.selectAll(`#${c["seal_name"]}-card2circle-${c["index"]}`).remove(),i.append("path").attr("d",r.toString()).attr("id",`${c["seal_name"]}-card2circle-${c["index"]}`).attr("stroke","#D3BEAF").attr("stroke-width",.5).attr("fill","none")),a.addEventListener("scroll",(function(){h=$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).offset(),u=$e(`#${c["seal_name"]}-circle`).offset(),p={top:h.top+$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).height(),left:h.left+$e(`#seal-card-${c["seal_name"]}-${c["index"]}`).width()/2},m={top:u.top,left:u.left+Z.select(`#${c["seal_name"]}-circle`).node().getBBox().width/2},g={top:(p.top+m.top)/2+Math.random()*t,left:(p.left+m.left)/2},_=!(p.left<l.left||p.left>l.left+$e(".seal-card-container").width()||m.left<l.left||m.left>l.left+$e(".seal-card-container").width()),_?(d=[{x:p.left-n.left,y:p.top-n.top},{x:p.left-n.left,y:g.top-n.top-o},{x:p.left-m.left>0?p.left-o-n.left:p.left+o-n.left,y:g.top-n.top},{x:p.left-m.left>0?m.left+o-n.left:m.left-o-n.left,y:g.top-n.top},{x:m.left-n.left,y:g.top-n.top+o},{x:m.left-n.left,y:m.top-n.top}],r=Z.path(),r.moveTo(d[0].x,d[0].y),r.lineTo(d[1].x,d[1].y),r.arcTo(d[1].x,d[2].y,d[2].x,d[2].y,o),r.lineTo(d[3].x,d[3].y),r.arcTo(d[4].x,d[3].y,d[4].x,d[4].y,o),r.lineTo(d[5].x,d[5].y),Z.selectAll(`#${c["seal_name"]}-card2circle-${c["index"]}`).remove(),i.append("path").attr("d",r.toString()).attr("id",`${c["seal_name"]}-card2circle-${c["index"]}`).attr("stroke","#8F7B6C").attr("stroke-width",.5).attr("fill","none").style("opacity",.5)):Z.selectAll(`#${c["seal_name"]}-card2circle-${c["index"]}`).remove()}))}}a(3570);a(3570);function Ae(e){let t=document.querySelector("#seal-card-container"),a=t.querySelectorAll(".card-rect");a.forEach((function(e){Z.select(e).style("border","2px solid #8F7B6C").style("filter","none")}));let i=document.querySelector(".seal-circle-svg"),n=i.querySelectorAll(".seal-single-rect");n.forEach((function(e){Z.select(e).style("opacity",1).style("filter","none")}));let l=document.querySelectorAll(".seal-icon-group");l.forEach((function(e){let t=e.querySelectorAll(".seal-single-icon");t.forEach((function(e){Z.select(e).style("opacity",1).style("filter","none")}))})),null===e.entity||"collector"===e.entity||"seal_name"===e.entity&&De(e.value,!0)}function De(e,t){let a=document.querySelector("#seal-card-container"),i=a.querySelectorAll(".card-rect"),n=!1;i.forEach((function(i){let l=i.id.split("-")[2];l===e&&(Z.select(i).style("border","3px solid #8F7B6C").style("filter","drop-shadow(0.2px 0.2px 0.2px rgb(0 0 0 / 0.6))"),n||Te(a,i)||t||(a.scrollTo({left:parseInt(i.offsetParent.style.left),behavior:"smooth"}),n=!0))}));let l=document.querySelector(".seal-circle-svg"),r=l.querySelectorAll(".seal-single-rect");r.forEach((function(t){let a=t.id.split("-")[0];a===e&&Z.select(t).style("opacity",.5).style("filter","drop-shadow(0.2px 0.2px 0.2px rgb(0 0 0 / 0.6))")}));let o=document.querySelectorAll(".seal-icon-group");o.forEach((function(t){let a=t.querySelectorAll(".seal-single-icon");a.forEach((function(t){let a=t.id.split("-")[3];a===e&&Z.select(t).style("opacity",.4).style("filter","drop-shadow(1px 1px 1px rgb(0 0 0 / 0.6))")}))}))}function Te(e,t){let a=e.scrollLeft<parseInt(t.offsetParent.style.left)&&e.scrollLeft+e.offsetWidth>parseInt(t.offsetParent.style.left);return a}const Be=a(2837),Fe=a(3570),Ee={top:.01,left:.01,right:.01,bottom:.01},Oe=1e3,He=100,Ve=10;var qe={name:"SealCard",components:{},data(){return{timeScale:null,cardList:[],containerParam:{x:0,width:0,card_width:0,card_height:0,unit_pixel:0,sealIconSize:1},sealContainerShow:!1,fullImageModel:{show:!1,src:null,label:null}}},props:["canvas_width","canvas_height","data"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection","hover"])},watch:{cur_view:function(e,t){const a=this;"timeline"===e&&e!==t&&(a.renderSealCard(),a.detectInteraction())},selection:{handler:function(e,t){e!==t&&(console.log("selection",e),null!==e.entity||Ae(e))},deep:!0},hover:{handler:function(e,t){const a=this;e!==t&&(null===e.entity?Ae(a.selection):"seal_name"===e.entity&&De(e.value,!1))},deep:!0}},methods:{initialize(){},getTimeScale(){const e=this;let t=1450,a=1965,i=.99*Fe(".main-panel").width(),n=[.08*i,i*(1-Ee.left-Ee.right)];e.timeScale=Be.scaleLinear().domain([t,a]).range(n)},renderSealCard(){const e=this;setTimeout((()=>{e.containerParam=ke(),e.containerParam["card_width"]=e.containerParam["width"]/(Ve+2),e.containerParam["card_height"]=.9*e.containerParam["card_width"]*175/120,e.containerParam["unit_pixel"]=e.containerParam["card_height"]/175,ze(e.data,12*e.containerParam["unit_pixel"]),e.cardList=be(e.data),e.sealContainerShow=!0,setTimeout((()=>{je(e.cardList,e.containerParam["unit_pixel"]),e.containerParam["sealIconSize"]=Fe(".seal-icon-group").height()/3,Le(e.cardList,e.containerParam["sealIconSize"]),e.renderLink()}),He)}),He)},renderLink(){const e=this;Be.select(".link-container").selectAll("svg").remove(),Be.select(".link-container").append("svg").attr("width",Fe(".link-container").width()).attr("height",Fe(".link-container").height()).attr("id","card2circle-link-svg"),Me(e.cardList,e.containerParam["unit_pixel"])},detectInteraction(){const e=this;setTimeout((()=>{let t=document.querySelector(".seal-circle-svg");t.addEventListener("mouseover",(function(t){if(t.target.classList.contains("seal-single-rect")){const a=t.target.id.split("-")[0];e.$store.commit("changeHover",{entity:"seal_name",value:a})}})),t.addEventListener("mouseout",(function(t){e.$store.commit("changeHover",{entity:null,value:[]})})),t.addEventListener("click",(function(t){t.target.classList.contains("seal-single-rect")&&e.$store.commit("changeSelection",{entity:"seal_name",value:t.target.id.split("-")[0]})}));let a=document.querySelector(".seal-rect-unselected-layer");a.addEventListener("click",(function(t){e.$store.commit("changeSelection",{entity:null,value:[]})}));let i=document.querySelectorAll(".seal-icon-group-svg");i.forEach((function(t){t.addEventListener("mouseover",(function(t){if(t.target.classList.contains("seal-single-icon")){const a=t.target.id.split("-")[3];e.$store.commit("changeHover",{entity:"seal_name",value:a})}})),t.addEventListener("mouseout",(function(t){e.$store.commit("changeHover",{entity:null,value:[]})})),t.addEventListener("click",(function(t){t.target.classList.contains("seal-single-icon")?e.$store.commit("changeSelection",{entity:"seal_name",value:t.target.id.split("-")[3]}):t.target.classList.contains("seal-collector-icon-unselected-layer")&&e.$store.commit("changeSelection",{entity:null,value:[]})}))}))}),Oe)}},mounted(){const e=this;e.initialize(),e.getTimeScale(),e.renderSealCard(),e.detectInteraction()}};const Ze=(0,f.Z)(qe,[["render",we],["__scopeId","data-v-32c76cac"]]);var We=Ze;const Re=["id"],Ye={class:"info-column"},Ne={class:"stamp-ratio"},Xe=["id"],Je=["id"];function Ke(e,t,a,i,r,o){return r.collectorContainerShow?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(a.data["collectors"],((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"collector-card",id:"collector-card-"+e["collector_name"],style:(0,l.j5)({left:r.collectorPosDict[e["collector_name"]].x+"px",top:r.collectorPosDict[e["collector_name"]].y+"px",height:1.1*r.containerParam.card_height+"px",width:.9*r.containerParam.card_width+4*r.containerParam.unit_pixel+"px"})},[(0,n._)("div",{class:"collector-title-row",style:(0,l.j5)({top:5*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%",height:25*r.containerParam.unit_pixel+"px"})},[(0,n._)("div",{class:"collector-name",style:(0,l.j5)({fontSize:20*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["collector_name"]),5),(0,n._)("div",Ye,[(0,n._)("div",{class:"collector-life-span",style:(0,l.j5)({fontSize:11*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["life_span"][0].toString()+"-"+e["life_span"][1].toString()),5),(0,n._)("div",Ne,[((0,n.wg)(),(0,n.iD)("svg",{class:"seal-ratio-svg",id:e["collector_name"]+"-seal-ratio-svg"},null,8,Xe))])])],4),(0,n._)("div",{class:"seal-icon-group",style:(0,l.j5)({top:35*r.containerParam.unit_pixel+"px",height:30*r.containerParam.unit_pixel+"px"})},[((0,n.wg)(),(0,n.iD)("svg",{class:"seal-icon-group-svg",id:"seal-icon-group-"+e["collector_name"]},null,8,Je))],4),(0,n._)("div",{class:"collector-intro",style:(0,l.j5)({top:70*r.containerParam.unit_pixel+"px",height:35*r.containerParam.unit_pixel+"px",fontSize:11*r.containerParam.unit_pixel+"px"})},(0,l.zw)(e["intro"]),5)],12,Re)))),128)):(0,n.kq)("",!0)}const Ue=a(3570);let Ge;function Qe(e,t){for(let a in e){const i=e[a]["collector_name"],n=t.filter((e=>e["collector_name"]===i)).length,l=Ue(`#${i}-seal-ratio-svg`).height(),r=Ue(`#${i}-seal-ratio-svg`).width(),o=.75*l/2;let s=Z.select(`#${i}-seal-ratio-svg`);s.selectAll("g").remove();let c=s.append("g").attr("class","stamp-ratio").attr("transform",`translate(${.05*r},${.05*l})`);const d=Z.arc().innerRadius(0).outerRadius(o).startAngle(Math.PI).endAngle(2*Math.PI),h=Z.arc().innerRadius(0).outerRadius(o).startAngle(0).endAngle(Math.PI);let u=c.append("g").attr("class","total_stamped");const p=`M ${o} 0 L ${.85*r} 0 A ${o} ${o} 0 1 1 ${.85*r} ${2*o} L ${o} ${2*o}`;u.append("path").attr("d",p).attr("fill","none").attr("stroke","#8F7B6C"),u.append("text").attr("x",.85*r).attr("y",.3*l).attr("dy",.3*l).attr("text-anchor","end").text(t.length.toString()).attr("font-size",.7*l).attr("fill","#8F7B6C");let m=c.append("g").attr("class","collector_stamped");m.append("rect").attr("x",o).attr("y",0).attr("width",(.85*r-o)*(n/t.length)).attr("height",.75*l).attr("fill","#8F7B6C").attr("stroke","#8F7B6C"),m.append("path").attr("d",d).attr("fill","#8F7B6C").attr("transform",`translate(${o},${o})`),m.append("path").attr("d",h).attr("fill","#8F7B6C").attr("transform",`translate(${o+(.85*r-o)*(n/t.length)},${o})`),m.append("text").attr("x",.85*r*(n/t.length)+o).attr("y",.3*l).attr("dy",.3*l).attr("text-anchor","end").text(n.toString()).attr("font-size",.7*l).attr("fill","white")}}function et(e,t){const a=Ue(".seal-icon-group").width(),i=(a-10*t)/9;for(let n in e){const l=e[n]["collector_name"],r=e[n]["seals"];let o=Z.select(`#seal-icon-group-${l}`).attr("width",a).attr("height",Math.ceil(r.length/10)*t+.3*t*1+(Math.ceil(r.length/10)-1)*t*.4);o.selectAll("g").remove();let s=o.append("g");s.append("rect").attr("class","seal-collector-icon-unselected-layer").attr("x",0).attr("y",0).attr("width",a).attr("height",Math.ceil(r.length/10)*t+.3*t*1+(Math.ceil(r.length/10)-1)*t*.4).attr("fill","white").style("opacity",0);let c=o.selectAll(".seal-icon-group").data(r).join("g").attr("transform",((e,a)=>`translate(${a%10*(t+i)},${Math.floor(a/10)*t*1.4+.3*t})`));c.append("rect").attr("x",0).attr("y",0).attr("width",t).attr("height",t).attr("class","seal-single-icon").attr("id",(e=>`seal-icon-rect-${e["seal_name"]}`)).attr("fill",Q[l]).attr("fill-opacity",.6),c.append("text").attr("x",t/2).attr("y",t/2).attr("dy",.325*t).attr("text-anchor","middle").text((e=>e["seal_pic"].length)).attr("font-size",1*t).attr("fill","white").style("visibility",(e=>1===e["seal_pic"].length?"hidden":"visible"))}}function tt(e,t){const a=t["width"],i=t["height"];Ge=Z.scaleLinear().domain(ye()["domain"]).range(ye()["range"]),e.sort(((e,t)=>e["life_span"][0]<t["life_span"][0]?-1:e["life_span"][0]>t["life_span"][0]?1:0));let n={};for(let l in e)n[e[l]["collector_name"]]={x:Ge(e[l]["life_span"][0]),y:.1*i};console.log("collector_pos_dict",n);for(let l in e){const t=e[l],r=n[t["collector_name"]];if(l>0){const o=e[l-1],s=n[o["collector_name"]];r["x"]<s["x"]+a&&(s["y"]===.1*i?n[t["collector_name"]]["y"]=1.3*i:s["y"]===1.3*i?n[t["collector_name"]]["y"]=2.5*i:s["y"]===2.5*i?n[t["collector_name"]]["y"]=3.7*i:n[t["collector_name"]]["y"]=.1*i)}}return n["--"]={x:Ge(1820),y:2.5*i},n}const at=a(2837),it=a(3570),nt={top:.01,left:.01,right:.01,bottom:.01},lt=100,rt=6;var ot={name:"CollectorCard",components:{},data(){return{timeScale:null,collectorContainerShow:!1,containerParam:{x:0,width:0,card_width:0,card_height:0,unit_pixel:0,sealIconSize:1},cardList:[],collectorPosDict:{}}},props:["canvas_width","canvas_height","data"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection","hover"])},watch:{cur_view:function(e,t){const a=this;"timeline"===e&&e!==t&&a.renderCollectorCard()},selection:{handler:function(e,t){const a=this;"timeline"===e&&e!==t&&a.renderCollectorCard()},deep:!0},hover:{handler:function(e,t){},deep:!0}},methods:{initialize(){},getTimeScale(){const e=this;let t=1450,a=1965,i=.99*it(".main-panel").width(),n=[.08*i,i*(1-nt.left-nt.right)];e.timeScale=at.scaleLinear().domain([t,a]).range(n)},renderCollectorCard(){const e=this;setTimeout((()=>{e.containerParam=ke(),e.containerParam["card_width"]=e.containerParam["width"]/rt,e.containerParam["card_height"]=.9*e.containerParam["card_width"]*100/220,e.containerParam["unit_pixel"]=e.containerParam["card_height"]/100,console.log(e.data["collectors"]),e.cardList=be(e.data),e.collectorPosDict=tt(e.data["collectors"],{width:e.containerParam["card_width"],height:e.containerParam["card_height"]}),e.collectorContainerShow=!0,setTimeout((()=>{e.containerParam["sealIconSize"]=it(".seal-icon-group").height()/3,et(e.data["collectors"],e.containerParam["sealIconSize"]),Qe(e.data["collectors"],e.cardList)}),lt)}),lt)}},mounted(){const e=this;e.initialize(),e.getTimeScale(),e.renderCollectorCard()}};const st=(0,f.Z)(ot,[["render",Ke],["__scopeId","data-v-36e815e2"]]);var ct=st;function dt(e){return e?JSON.parse(JSON.stringify(e)):e}let ht;async function ut(){ht=await Z.json("data/seal_constructed_data.json")}function pt(){return dt(ht)}a(2837),a(3570);var mt={name:"Timeline",components:{TimeAxis:oe,SealCard:We,CollectorCard:ct},data(){return{data:null}},props:["canvas_width","canvas_height"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection","hover","transition"])},watch:{cur_view:function(e,t){e!==t&&("timeline"===e?console.log("从其他视图切换到timeline视图啦"):console.log("从timeline视图切换到其他视图啦"))},selection:{handler:function(e,t){const a=this;"timeline"===e&&e!==t&&a.renderCollectorCard()},deep:!0},hover:{handler:function(e,t){},deep:!0},transition:{handler:function(e,t){const a=this;"timeline"!==e.to&&"timeline"!==e.from||a.$store.commit("changeCurViewForce",e.to)},deep:!0}},methods:{initialize(){},getSubSet(){const e=this;e.data={painting_name:e.data["painting_name"],meta_data:e.data["meta_data"],collectors:e.data["collectors"].slice(0,1)}}},mounted(){const e=this;let t=pt();for(let a in t)t[a]["painting_name"]===e.painting_name&&(e.data=t[a]);e.data=ee(e.data),e.initialize()}};const gt=(0,f.Z)(mt,[["render",H],["__scopeId","data-v-1e6d7a76"]]);var _t=gt;const ft={class:"overview-container"},wt={class:"full-image-container",id:"full-image-container"},vt={class:"image-scroll-container"},xt=["src"],yt={class:"seal-checkbox-svg"},Ct={class:"thumbnail-container",id:"thumbnail-container"},St={class:"overview-transition-svg"};function Pt(e,t,a,l,r,o){const s=(0,n.up)("OverviewCard"),c=(0,n.up)("Thumbnail");return(0,n.wg)(),(0,n.iD)("div",ft,[(0,n._)("div",wt,[(0,n.wy)((0,n._)("div",vt,[(0,n._)("img",{src:r.imageSrc.small,alt:"Long Image",class:"long-image",id:"preview-image",style:{height:"100%"}},null,8,xt),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",yt,null,512)),[[i.F8,r.imageParam.visible]]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.detailSealInfo,((e,t)=>((0,n.wg)(),(0,n.j4)(s,{seal_detail:JSON.parse(JSON.stringify(e)),resize_scale:r.resize_scale,cardList:r.cardList},null,8,["seal_detail","resize_scale","cardList"])))),256))],512),[[i.F8,r.imageParam.visible]])]),(0,n._)("div",Ct,[(0,n.Wm)(c,{original_painting:r.original_painting},null,8,["original_painting"])]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",St,null,512)),[[i.F8,r.imageParam.visible]])])}const zt=e=>((0,n.dD)("data-v-5bc1ffa2"),e=e(),(0,n.Cn)(),e),bt={style:{height:"75vh",width:"70%"}},kt=["src"],It=["src"],Lt=zt((()=>(0,n._)("div",{class:"agent-icon"},[(0,n._)("svg",{width:"11",height:"14",viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z",stroke:"#8F7B6C","stroke-linejoin":"round"})])],-1))),jt=zt((()=>(0,n._)("div",{class:"time-icon"},[(0,n._)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z",fill:"#8F7B6C"})])],-1)));function $t(e,t,a,r,o,s){const c=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c,{modelValue:o.fullImageModel.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.fullImageModel.show=e),title:o.fullImageModel.label,top:"5vh",width:"80%"},{default:(0,n.w5)((()=>[(0,n._)("div",bt,[(0,n._)("img",{src:o.fullImageModel.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,kt)])])),_:1},8,["modelValue","title"]),(0,n.wy)((0,n._)("div",{class:"overview-seal-card",style:(0,l.j5)({left:(a.seal_detail["x"]+a.seal_detail["width"])*a.resize_scale+"px",top:a.seal_detail["y"]*a.resize_scale+"px",height:1.1*o.containerParam.card_height+"px",width:.9*o.containerParam.card_width+4*o.containerParam.unit_pixel+"px"})},[(0,n._)("div",{class:"seal-index-rect",style:(0,l.j5)({paddingLeft:2*o.containerParam.unit_pixel+"px",paddingRight:2*o.containerParam.unit_pixel+"px",height:18*o.containerParam.unit_pixel+"px",fontSize:16*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["index"]),5),(0,n._)("div",{class:"card-rect",style:(0,l.j5)({top:.05*o.containerParam.card_height+"px",height:o.containerParam.card_height+"px",left:0*o.containerParam.unit_pixel+"px",width:.9*o.containerParam.card_width+"px"})},[(0,n._)("div",{class:"seal-name",style:(0,l.j5)({fontSize:a.seal_detail.seal_name.length<=6?.9*o.containerParam.card_width/6.5+"px":.9*o.containerParam.card_width/(a.seal_detail.seal_name.length+.5)+"px",top:15*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["seal_name"]),5),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:43*o.containerParam.unit_pixel+"px",height:64*o.containerParam.unit_pixel+"px",left:"2.5%",width:"95%",justifyContent:"center"})},[(0,n._)("div",{class:"seal-pic",style:(0,l.j5)({height:75*o.containerParam.unit_pixel+"px",width:75*o.containerParam.unit_pixel+"px"})},[(0,n._)("img",{src:a.seal_detail.image_href,style:{"{max-width":"100%","max-height":"100%","margin-top":"0em","margin-bottom":"0em, cursor: 'pointer'}"},onClick:t[1]||(t[1]=e=>(o.fullImageModel.show=!0,o.fullImageModel.src=a.seal_detail.image_href,o.fullImageModel.label=a.seal_detail.seal_name))},null,8,It)],4)],4),(0,n._)("div",{class:"seal-page",style:(0,l.j5)({top:107*o.containerParam.unit_pixel+"px",height:8*o.containerParam.unit_pixel+"px",left:"2.5%",width:"95%",fontSize:11*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["series_list"].indexOf(a.seal_detail["index"])+1+"/"+a.seal_detail["series_list"].length),5),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:120*o.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-group",style:(0,l.j5)({gap:2*o.containerParam.unit_pixel+"px"})},[Lt,(0,n._)("div",{class:"agent-name",style:(0,l.j5)({fontSize:12*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["collector_name"]),5)],4),(0,n._)("div",{class:"life-span",style:(0,l.j5)({fontSize:11*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["life_span"][0].toString()+"-"+a.seal_detail["life_span"][1].toString()),5)],4),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:135*o.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-time-group",style:(0,l.j5)({gap:2*o.containerParam.unit_pixel+"px"})},[jt,(0,n._)("div",{class:"time-span",style:(0,l.j5)({fontSize:12*o.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["stamped_year"][0].toString()+"-"+a.seal_detail["stamped_year"][1].toString()),5)],4)],4)],4)],4),[[i.F8,o.sealContainerShow]])],64)}const Mt=a(3570);let At=0,Dt=0;function Tt(e){At=e}function Bt(e){Dt=e}function Ft(){const e=Mt(".long-image").width()/Mt(".thumbnail-image").width(),t=document.getElementById("full-image-container");t.scrollLeft=At*e}function Et(){const e=Mt(".thumbnail-image").width()/Mt(".long-image").width();Z.select("#thumbnail_rect").attr("x",Dt*e)}function Ot(e,t,a,i,n){const l=document.getElementById("full-image-container");console.log("cur_scrollLeft",l.scrollLeft);const r=Mt(".full-image-container").width(),o=l.scrollLeft,s=e["series_list"].indexOf(e["index"]);let c=null,d=null;if("prev"===n&&s>0?c=e["series_list"][s-1]:"next"===n&&s<e["series_list"].length-1&&(c=e["series_list"][s+1]),d=t.filter((e=>e["index"]===c))[0],!(d["x"]*a>o+.2*r&&d["x"]*a<o+.8*r)){let e=d["x"]*a-r/2;l.scrollLeft=e<0?0:e+r>Mt(".image-scroll-container").width()?Mt(".image-scroll-container").width()-r:e}let h=i.value;return"seal_pic"!==i.entity||h.includes(c)||(h=[...new Set(h)],h.push(c)),h}a(2837),a(3570);const Ht=100,Vt=12;var qt={name:"OverviewCard",components:{},data(){return{containerParam:{x:0,width:0,card_width:0,card_height:0,unit_pixel:0,sealIconSize:1},sealContainerShow:!1,fullImageModel:{show:!1,src:null,label:null}}},props:["seal_detail","resize_scale","cardList"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection"])},watch:{seal_detail:{handler:function(e,t){},deep:!0},resize_scale:function(e,t){},cur_view:function(e,t){const a=this;"overview"===e?setTimeout((()=>{a.sealContainerShow=!0}),Ht):a.sealContainerShow=!1}},methods:{initialize(){},renderSealCard(){const e=this;setTimeout((()=>{e.containerParam=ke(),e.containerParam["card_width"]=e.containerParam["width"]/Vt,e.containerParam["card_height"]=.9*e.containerParam["card_width"]*175/120,e.containerParam["unit_pixel"]=e.containerParam["card_height"]/175,"overview"===e.cur_view&&(e.sealContainerShow=!0)}),Ht)},clickPrevNext(e){const t=this;let a=Ot(t.seal_detail,t.cardList,t.resize_scale,t.selection,e);t.$store.commit("changeSelection",{entity:"seal_pic",value:a})}},mounted(){const e=this;e.initialize(),e.renderSealCard()}};const Zt=(0,f.Z)(qt,[["render",$t],["__scopeId","data-v-5bc1ffa2"]]);var Wt=Zt;const Rt=["src"],Yt={class:"thumbnail-rect-svg",id:"thumbnail-rect-svg"};function Nt(e,t,a,l,r,o){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("img",{src:r.imageSrc.small,alt:"Thumbnail Image",class:"thumbnail-image",id:"thumbnail-image",style:{maxHeight:"100%",maxWidth:"100%"}},null,8,Rt),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",Yt,null,512)),[[i.F8,a.original_painting.complete]])],64)}const Xt=a(2837),Jt=a(3570),Kt=100;var Ut={name:"Thumbnail",components:{},data(){return{imageSrc:{origin:null,small:null},painting_name_en:"",thumbnail_resize_scale:1,thumbnail_rect_x:0}},props:["original_painting"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection"])},watch:{cur_view:function(e,t){const a=this;"overview"===e&&e!==t&&this.$nextTick((()=>{const e=()=>{Jt(".thumbnail-rect-svg").width()>0?a.renderThumbnailRect(0,0,1):setTimeout(e,Kt)};e()}))},resize_scale:function(e,t){},original_painting:function(e,t){const a=this;e.complete&&"overview"===a.cur_view&&(a.getThumbnailParams(e),a.renderThumbnailRect(0,0,1))},thumbnail_rect_x:function(e,t){e!==t&&(Tt(e),Ft())}},methods:{initialize(){},getThumbnailParams(e){const t=this;t.imageSrc["origin"]="data/"+t.painting_name_en+".jpg",t.thumbnail_resize_scale=.1*Jt(".main-panel").height()/e.height,t.imageSrc["origin"]=e.src;const a=document.getElementById("thumbnail-image");a.src=t.imageSrc["origin"]},renderThumbnailRect(e,t,a=1){const i=this;let n=Jt(".thumbnail-rect-svg").width(),l=Jt(".thumbnail-rect-svg").height(),r=Jt(".full-image-container").width()/Jt(".full-image-container").height();Xt.select(".thumbnail-rect-svg").selectAll("g").remove();let o=Xt.select(".thumbnail-rect-svg").append("g");const s=o.append("rect").attr("x",e).attr("y",t).attr("width",l*r/a).attr("height",l/a).attr("fill","white").attr("fill-opacity",0).attr("stroke","red").attr("id","thumbnail_rect");let c;const d=Xt.drag().on("start",(e=>{s.style("cursor","grabbing"),c=e.x-Number(s.attr("x"))})).on("drag",(e=>{const t=e.x;t-c<0?s.attr("x",0):t-c+l*r/a>n?s.attr("x",n-l*r/a):s.attr("x",t-c),i.thumbnail_rect_x=Number(s.attr("x"))})).on("end",(()=>{s.style("cursor","grab")}));d(s)}},mounted(){const e=this;console.log("进入到overview啦"),e.painting_name_en=te(e.painting_name),e.imageSrc["small"]="https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/"+e.painting_name_en+"_small.jpg",e.initialize()}};const Gt=(0,f.Z)(Ut,[["render",Nt],["__scopeId","data-v-fbb503da"]]);var Qt=Gt;const ea=a(3570);let ta={};function aa(e){ta=e}function ia(e,t,a,i,n){const l=e/3,r=e/3,o=.88*ea(".main-panel").height()/n["height"],s=document.getElementById("full-image-container").scrollLeft;let c=Z.select(".overview-transition-svg");c.selectAll(".transition_layer").remove();let d=c.append("g").attr("class","transition_layer"),h=d.append("g").attr("class","image-group");console.log("seal_mapped_list in transition",i);let u=h.selectAll(".seal-image-overview").data(i).enter().append("image").attr("class","seal-image-overview").attr("xlink:href",(e=>e["image_href"])).attr("width",(e=>e["width"]*o)).attr("height",(e=>e["height"]*o)).attr("x",(e=>e["x"]*o-s)).attr("y",(e=>e["y"]*o));Z.select("#full-image-container").transition().duration(l).style("opacity",0),Z.select("#thumbnail-container").transition().duration(l).style("opacity",0),Z.select(".layout-container").transition().duration(l).style("opacity",1);let p=i.map((e=>ta.find((t=>t["index"]===e["index"]))));setTimeout((()=>{u.transition().duration(r).attr("x",((e,t)=>p[t]["layout_params"]["x"])).attr("y",((e,t)=>p[t]["layout_params"]["y"])).attr("width",((e,t)=>p[t]["layout_params"]["width"])).attr("height",((e,t)=>p[t]["layout_params"]["height"]))}),l),setTimeout((()=>{}),l+r),setTimeout((()=>{c.selectAll(".transition_layer").remove()}),e)}function na(e,t,a,i,n){const l=e/3,r=e/3;let o=Z.select(".layout-transition-svg");o.selectAll(".transition_layer").remove();let s=o.append("g").attr("class","transition_layer"),c=s.append("g").attr("class","image-group");console.log("seal_mapped_list in transition",i);let d=i.map((e=>ta.find((t=>t["index"]===e["index"]))));const h=.88*ea(".main-panel").height()/n["height"],u=Dt;let p=c.selectAll(".seal-image-overview").data(i).enter().append("image").attr("class","seal-image-overview").attr("xlink:href",(e=>e["image_href"])).attr("x",((e,t)=>d[t]["layout_params"]["x"])).attr("y",((e,t)=>d[t]["layout_params"]["y"])).attr("width",((e,t)=>d[t]["layout_params"]["width"])).attr("height",((e,t)=>d[t]["layout_params"]["height"]));Z.selectAll(".layout-container").transition().duration(l).style("opacity",0),Z.select("#full-image-container").transition().duration(l).style("opacity",1),Z.select("#thumbnail-container").transition().duration(l).style("opacity",1),setTimeout((()=>{p.transition().duration(r).attr("width",(e=>e["width"]*h)).attr("height",(e=>e["height"]*h)).attr("x",(e=>e["x"]*h-u)).attr("y",(e=>e["y"]*h))}),l),setTimeout((()=>{}),l+r),setTimeout((()=>{o.selectAll(".transition_layer").remove()}),e)}const la=a(2837),ra=a(3570),oa=1e3,sa=100;var ca={name:"Overview",components:{OverviewCard:Wt,Thumbnail:Qt},data(){return{data:null,cardList:[],painting_name_en:"",imageSrc:{origin:null,small:null},imageParam:{visible:!1,offsetX:0,dragging:!1,zoom:1},resize_scale:1,resize_scaleX:1,original_painting:{complete:!1},fullImageContainerX:0}},props:["canvas_width","canvas_height"],computed:{...(0,g.rn)(["language","cur_view","painting_name","selection","transition","overlay_duration","painting_pic"]),detailSealInfo:{get(){const e=this,t=null!==e.selection.entity&&e.selection.value;if(!t)return[];let a=[];return a=dt(e.cardList.filter((e=>t.includes(e["index"])))),a}}},watch:{cur_view:function(e,t){const a=this;"overview"===e&&e!==t&&(console.log("从其他视图切换到overview视图啦"),setTimeout((()=>{a.renderUnselectedLayer(),a.renderSealRect(a.cardList,a.resize_scale)}),sa))},imageParam:{handler:function(e,t){console.log(e.visible),e.visible},deep:!0},selection:{handler:function(e,t){},deep:!0},original_painting:{handler:function(e,t){},deep:!0},fullImageContainerX:function(e,t){e!==t&&(Bt(e),Et())},transition:{handler:function(e,t){const a=this;"timeline"!==e.to&&"timeline"!==e.from?a.transition_handler(e):a.$store.commit("changeCurViewForce",e.to)},deep:!0}},methods:{initialize(){},getSubSet(){const e=this;e.data={painting_name:e.data["painting_name"],meta_data:e.data["meta_data"],collectors:e.data["collectors"].slice(0,1)}},detectFullImageScroll(){const e=this;let t=document.getElementById("full-image-container");t.addEventListener("scroll",(function(){e.fullImageContainerX=t.scrollLeft}))},getPaintingParams(){const e=this;e.imageSrc["origin"]="data/"+e.painting_name_en+".jpg";let t=new Image;t.src=e.imageSrc["small"];let a=new Image;if(a.src=e.imageSrc["origin"],t.complete){const a=t.width,i=t.height;e.resize_scale=.88*ra(".main-panel").height()/i,e.resize_scaleX=ra(".main-panel").width()/a,console.log("resize_scale",e.resize_scale),e.imageParam["offsetX"]=-(e.resize_scale*a/2-ra(".main-panel").width()/2),e.imageParam["visible"]=!0}else t.onload=function(){const a=t.width,i=t.height;e.resize_scale=.88*ra(".main-panel").height()/i,e.resize_scaleX=ra(".main-panel").width()/a,console.log("resize_scale",e.resize_scale),e.imageParam["offsetX"]=-(e.resize_scale*a/2-ra(".main-panel").width()/2),e.imageParam["visible"]=!0};if(a.complete){const t=a.width,i=a.height;e.$store.commit("changePaintingPic",{loaded:!0,width:t,height:i}),e.resize_scale=.88*ra(".main-panel").height()/i,e.resize_scaleX=ra(".main-panel").width()/t,console.log("resize_scale",e.resize_scale),e.imageParam["offsetX"]=-(e.resize_scale*t/2-ra(".main-panel").width()/2);const n=document.getElementById("preview-image");n.src=e.imageSrc["origin"],e.original_painting=a,setTimeout((()=>{e.renderUnselectedLayer(),e.renderSealRect(e.cardList,e.resize_scale)}),sa)}else a.onload=function(){const t=a.width,i=a.height;e.$store.commit("changePaintingPic",{loaded:!0,width:t,height:i}),e.resize_scale=.88*ra(".main-panel").height()/i,e.resize_scaleX=ra(".main-panel").width()/t,console.log("resize_scale",e.resize_scale),e.imageParam["offsetX"]=-(e.resize_scale*t/2-ra(".main-panel").width()/2);const n=document.getElementById("preview-image");n.src=e.imageSrc["origin"],e.original_painting=a,setTimeout((()=>{e.renderUnselectedLayer(),e.renderSealRect(e.cardList,e.resize_scale)}),sa)}},renderSealRect(e,t){const a=this;let i=la.select(".seal-checkbox-svg");i.selectAll(".seal_rect_group").remove();let n=i.append("g").attr("class","seal_rect_group"),l=n.selectAll("g").data(e).join("g").attr("id",(e=>`${e["seal_name"]}-${e["index"]}-rect`));l.append("rect").attr("x",(e=>e["x"]*t-e["width"]*t/25)).attr("y",(e=>e["y"]*t-e["height"]*t/25)).attr("height",(e=>e["height"]*t)).attr("width",(e=>e["width"]*t)).attr("fill","white").attr("fill-opacity",0).attr("stroke","red").style("cursor","pointer").on("click",(e=>{let t=a.selection["value"];if(t.includes(e.srcElement.__data__.index)){const a=t.indexOf(e.srcElement.__data__.index);-1!==a&&t.splice(a,1)}t=[...new Set(t)],t.push(e.srcElement.__data__.index),a.$store.commit("changeSelection",{entity:"seal_pic",value:t})}))},renderUnselectedLayer(){const e=this;let t=la.select(".seal-checkbox-svg");t.selectAll(".unselected_layer").remove();let a=t.append("g").attr("class","unselected_layer");a.append("rect").attr("x",0).attr("width",ra(".image-scroll-container").width()).attr("height",ra(".image-scroll-container").height()).attr("fill-opacity",0).on("click",(t=>{console.log("Click unselected layer!"),e.$store.commit("changeSelection",{entity:null,value:[]})}))},transition_handler(e){console.log(e);const t=this,a=e.from,i=e.to,n=e.state;"overview"===a&&"out"===n?(console.log("transition out"),ia(6*oa,"from",t.selection,t.cardList,t.painting_pic),setTimeout((()=>{t.$store.commit("transCompleted",null)}),6*oa)):"overview"===i&&"out"===n?console.log("preparing for transition"):"overview"===i&&"overlay"===n||"overview"===i&&"in"===n&&(console.log("transition in"),setTimeout((()=>{t.$store.commit("transCompleted",null)}),oa))}},mounted(){const e=this;console.log("进入到overview啦"),e.painting_name_en=te(e.painting_name),e.imageSrc["small"]="https://vis.pku.edu.cn/seal_visualization/assets/painting_images/que_hua_qiu_se_tu_juan/"+e.painting_name_en+"_small.jpg",e.getPaintingParams();let t=pt();for(let a in t)t[a]["painting_name"]===e.painting_name&&(e.data=t[a]);e.data=ee(e.data),e.cardList=be(e.data),e.detectFullImageScroll(),e.initialize()}};const da=(0,f.Z)(ca,[["render",Pt],["__scopeId","data-v-dce95496"]]);var ha=da;const ua={style:{height:"75vh",width:"70%"}},pa=["src"],ma={class:"layout-container",id:"layout-container"},ga=["src","id"],_a={class:"layout-transition-svg"};function fa(e,t,a,r,o,s){const c=(0,n.up)("el-dialog"),d=(0,n.up)("LayoutCard");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c,{modelValue:o.fullImageModel.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.fullImageModel.show=e),title:o.fullImageModel.label,top:"5vh",width:"80%"},{default:(0,n.w5)((()=>[(0,n._)("div",ua,[(0,n._)("img",{src:o.fullImageModel.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,pa)])])),_:1},8,["modelValue","title"]),(0,n.wy)((0,n._)("div",ma,[o.showSealDiv?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(o.cardList,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:"seal-image-container",style:(0,l.j5)({width:e.layout_params.width+"px",height:e.layout_params.height+"px",left:e.layout_params.x+"px",top:e.layout_params.y+"px"})},[(0,n._)("img",{src:e.image_href,class:"seal-image",id:"sealImageLayout-"+e.index,onClick:t[1]||(t[1]=(...e)=>s.showSealInfoCard&&s.showSealInfoCard(...e))},null,8,ga)],4)))),128)):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.detailSealInfo,((e,t)=>((0,n.wg)(),(0,n.j4)(d,{seal_detail:JSON.parse(JSON.stringify(e)),cardList:o.cardList},null,8,["seal_detail","cardList"])))),256))],512),[[i.F8,"layout"===e.cur_view]]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("svg",_a,null,512)),[[i.F8,"layout"===e.cur_view]])],64)}const wa=e=>((0,n.dD)("data-v-41175b42"),e=e(),(0,n.Cn)(),e),va={style:{height:"75vh",width:"70%"}},xa=["src"],ya=wa((()=>(0,n._)("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M13.877 2L6.78967 9.76364L13.877 17.1163",stroke:"#8F7B6C","stroke-width":"3.22","stroke-linecap":"round","stroke-linejoin":"round"}),(0,n._)("path",{d:"M8.96387 2L1.87658 9.76364L8.96387 17.1163",stroke:"#8F7B6C","stroke-width":"3.22","stroke-linecap":"round","stroke-linejoin":"round"})],-1))),Ca=[ya],Sa=["src"],Pa=wa((()=>(0,n._)("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M2 2L9.08728 9.76364L2 17.1163",stroke:"#8F7B6C","stroke-width":"3.22","stroke-linecap":"round","stroke-linejoin":"round"}),(0,n._)("path",{d:"M6.91309 2L14.0004 9.76364L6.91309 17.1163",stroke:"#8F7B6C","stroke-width":"3.22","stroke-linecap":"round","stroke-linejoin":"round"})],-1))),za=[Pa],ba=wa((()=>(0,n._)("div",{class:"agent-icon"},[(0,n._)("svg",{width:"11",height:"14",viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z",stroke:"#8F7B6C","stroke-linejoin":"round"})])],-1))),ka=wa((()=>(0,n._)("div",{class:"time-icon"},[(0,n._)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.1444 9.08594C11.0154 9.30091 10.7383 9.36779 10.5281 9.23881C10.3132 9.10983 10.2463 8.83276 10.3753 8.62257C10.8482 7.82958 11.1014 6.92672 11.1014 5.99997C11.1014 3.18151 8.81804 0.898087 5.99971 0.898087C3.18138 0.898087 0.898047 3.18151 0.898047 5.99997C0.898047 8.81843 3.18138 11.1019 5.99971 11.1019C6.92164 11.1019 7.82923 10.8535 8.62218 10.3805C8.83714 10.2516 9.10943 10.3232 9.2384 10.5334C9.36737 10.7436 9.29572 11.0206 9.08554 11.1496C8.15406 11.7085 7.08883 12.0047 5.99971 11.9999C2.68459 11.9999 0 9.31524 0 5.99997C0 2.6847 2.68459 0 5.99971 0C9.31483 0 11.9994 2.6847 11.9994 5.99997C11.9946 7.10347 11.6985 8.15919 11.1444 9.08594ZM3.425 7.9299L5.54113 5.80889V3.29616C5.54113 3.04775 5.74176 2.84712 5.99015 2.84712C6.23855 2.84712 6.43918 3.04775 6.43918 3.29616V5.99519C6.43918 6.11462 6.39141 6.22927 6.30543 6.31526L4.05553 8.56524C3.88357 8.742 3.59696 8.74678 3.42021 8.57481C3.24347 8.40283 3.23869 8.1162 3.41066 7.93945C3.42021 7.93945 3.425 7.93468 3.425 7.9299Z",fill:"#8F7B6C"})])],-1)));function Ia(e,t,a,i,r,o){const s=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s,{modelValue:r.fullImageModel.show,"onUpdate:modelValue":t[0]||(t[0]=e=>r.fullImageModel.show=e),title:r.fullImageModel.label,top:"5vh",width:"80%"},{default:(0,n.w5)((()=>[(0,n._)("div",va,[(0,n._)("img",{src:r.fullImageModel.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,xa)])])),_:1},8,["modelValue","title"]),r.sealContainerShow?((0,n.wg)(),(0,n.iD)("div",{key:0,class:"layout-seal-card",style:(0,l.j5)({left:a.seal_detail["layout_params"]["x"]+a.seal_detail["layout_params"]["width"]+"px",top:a.seal_detail["layout_params"]["y"]+"px",height:1.1*r.containerParam.card_height+"px",width:.9*r.containerParam.card_width+4*r.containerParam.unit_pixel+"px"})},[(0,n._)("div",{class:"seal-index-rect",style:(0,l.j5)({paddingLeft:2*r.containerParam.unit_pixel+"px",paddingRight:2*r.containerParam.unit_pixel+"px",height:18*r.containerParam.unit_pixel+"px",fontSize:16*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["index"]),5),(0,n._)("div",{class:"card-rect",style:(0,l.j5)({top:.05*r.containerParam.card_height+"px",height:r.containerParam.card_height+"px",left:0*r.containerParam.unit_pixel+"px",width:.9*r.containerParam.card_width+"px"})},[(0,n._)("div",{class:"seal-name",style:(0,l.j5)({fontSize:a.seal_detail.seal_name.length<=6?.9*r.containerParam.card_width/6.5+"px":.9*r.containerParam.card_width/(a.seal_detail.seal_name.length+.5)+"px",top:15*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["seal_name"]),5),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:43*r.containerParam.unit_pixel+"px",height:64*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"prev-next-arrow",style:(0,l.j5)({height:20*r.containerParam.unit_pixel+"px"}),onClick:t[1]||(t[1]=e=>o.clickPrevNext("prev"))},Ca,4),(0,n._)("div",{class:"seal-pic",style:(0,l.j5)({height:60*r.containerParam.unit_pixel+"px",width:60*r.containerParam.unit_pixel+"px"})},[(0,n._)("img",{src:a.seal_detail.image_href,style:{"{max-width":"100%","max-height":"100%","margin-top":"0.1em","margin-bottom":"0em, cursor: 'pointer'}"},onClick:t[2]||(t[2]=e=>(r.fullImageModel.show=!0,r.fullImageModel.src=a.seal_detail.image_href,r.fullImageModel.label=a.seal_detail.seal_name))},null,8,Sa)],4),(0,n._)("div",{class:"prev-next-arrow",style:(0,l.j5)({height:20*r.containerParam.unit_pixel+"px"}),onClick:t[3]||(t[3]=e=>o.clickPrevNext("next"))},za,4)],4),(0,n._)("div",{class:"seal-page",style:(0,l.j5)({top:107*r.containerParam.unit_pixel+"px",height:8*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%",fontSize:11*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["series_list"].indexOf(a.seal_detail["index"])+1+"/"+a.seal_detail["series_list"].length),5),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:120*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-group",style:(0,l.j5)({gap:2*r.containerParam.unit_pixel+"px"})},[ba,(0,n._)("div",{class:"agent-name",style:(0,l.j5)({fontSize:12*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["collector_name"]),5)],4),(0,n._)("div",{class:"life-span",style:(0,l.j5)({fontSize:11*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["life_span"][0].toString()+"-"+a.seal_detail["life_span"][1].toString()),5)],4),(0,n._)("div",{class:"info-row",style:(0,l.j5)({top:135*r.containerParam.unit_pixel+"px",left:"2.5%",width:"95%"})},[(0,n._)("div",{class:"agent-time-group",style:(0,l.j5)({gap:2*r.containerParam.unit_pixel+"px"})},[ka,(0,n._)("div",{class:"time-span",style:(0,l.j5)({fontSize:12*r.containerParam.unit_pixel+"px"})},(0,l.zw)(a.seal_detail["stamped_year"][0].toString()+"-"+a.seal_detail["stamped_year"][1].toString()),5)],4)],4)],4)],4)):(0,n.kq)("",!0)],64)}a(2837),a(3570);const La=100,ja=12;var $a={name:"LayoutCard",components:{},data(){return{containerParam:{x:0,width:0,card_width:0,card_height:0,unit_pixel:0,sealIconSize:1},sealContainerShow:!1,fullImageModel:{show:!1,src:null,label:null}}},props:["seal_detail","cardList"],computed:{...(0,g.rn)(["language","cur_view","painting_name","rem","selection"])},watch:{seal_detail:{handler:function(e,t){},deep:!0},resize_scale:function(e,t){},cur_view:function(e,t){const a=this;"layout"===e?(console.log("从其他视图切换到layout视图啦"),setTimeout((()=>{a.renderSealCard(),a.sealContainerShow=!0}),La)):a.sealContainerShow=!1}},methods:{initialize(){},renderSealCard(){const e=this;setTimeout((()=>{e.containerParam=ke(),e.containerParam["card_width"]=e.containerParam["width"]/ja,e.containerParam["card_height"]=.9*e.containerParam["card_width"]*175/120,e.containerParam["unit_pixel"]=e.containerParam["card_height"]/175,"layout"===e.cur_view&&(e.sealContainerShow=!0)}),La)},clickPrevNext(e){const t=this;let a=Ot(t.seal_detail,t.cardList,t.resize_scale,t.selection,e);t.$store.commit("changeSelection",{entity:"seal_pic",value:a})}},mounted(){const e=this;e.initialize(),e.renderSealCard()}};const Ma=(0,f.Z)($a,[["render",Ia],["__scopeId","data-v-41175b42"]]);var Aa=Ma;a(3570);function Da(e){e.sort(((e,t)=>e["width"]<t["width"]?1:e["width"]>t["width"]?-1:0));let t=[];for(let i in e){t=t.map((e=>(e["del"]=!1,e)));const a=e[i];if(0===i)t.push({x_offset2prev:a["x"],seal_pic:[a],x:a["x"],width:a["width"],del:!1});else{let e=[];for(let i in t){let n=!(a["x"]+a["width"]<t[i]["x"]||t[i]["x"]+t[i]["width"]<a["x"]);n&&(e.push(t[i]),t[i]["del"]=!0)}if(0===e.length)t.push({x_offset2prev:a["x"],seal_pic:[a],x:a["x"],width:a["width"],del:!1});else if(1===e.length){const i=t.indexOf(e[0]);t[i]["seal_pic"].push(a),t[i]["x"]=Math.min(t[i]["x"],a["x"]);let n=t[i]["seal_pic"].reduce(((e,t)=>{const a=t.x+t.width;return a>e?a:e}),-1/0);t[i]["width"]=n-t[i]["x"],t=Ta(t)}else{let i={},n=a["x"],l=[a];for(let t in e){const a=e[t];n=Math.min(a["x"],n),l=l.concat(a["seal_pic"])}i={x_offset2prev:-1/0,seal_pic:l,x:n,width:a["width"]};let r=i["seal_pic"].reduce(((e,t)=>{const a=t.x+t.width;return a>e?a:e}),-1/0);i["width"]=r-i["x"],t=t.filter((e=>!e["del"])),t.push(i),t=Ta(t)}}}let a=Ba(t);return a}function Ta(e){e.sort(((e,t)=>e["x"]<t["x"]?-1:e["x"]>t["x"]?1:0));for(let t=0;t<e.length;t++)e[t]["x_offset2prev"]=0===t?e[t]["x"]:e[t]["x"]-(e[t-1]["x"]+e[t-1]["width"]);return e}function Ba(e){let t=e.map((e=>e["x_offset2prev"]));t.sort(((e,t)=>e-t));const a=t[Math.round(11*t.length/12)];let i=[],n=e[0]["x"],l=e[0]["seal_pic"];for(let r=0;r<e.length;r++){const t=e[r];if(0===r);else if(Math.ceil((t["x"]-n)/a)<=1)l=l.concat(t["seal_pic"]);else{let e=l.reduce(((e,t)=>{const a=t.x+t.width;return a>e?a:e}),-1/0);const a=e-n;i.push({x_offset2prev:n,seal_pic:l,x:n,width:a}),l=t["seal_pic"],n=t["x"]}if(r===e.length-1){let e=l.reduce(((e,t)=>{const a=t.x+t.width;return a>e?a:e}),-1/0);const t=e-n;i.push({x_offset2prev:n,seal_pic:l,x:n,width:t})}}return i=Ta(i),i}function Fa(e){let t=e.reduce(((e,t)=>{const a=t["layout_params"]["x"]+t["layout_params"]["width"];return a>e?a:e}),-1/0),a=e.reduce(((e,t)=>{const a=t["layout_params"]["x"];return a<e?a:e}),1/0);return(a+t)/2}const Ea=a(3570);function Oa(e,t){const a=Ea(".main-panel").width(),i=Ea(".main-panel").height(),n={x:t["width"]/2,y:t["height"]/2},l={x_axis:a/t["width"],y_axis:i/t["height"]};e=Ha(e,a*i,l);let r=Da(e),o=[];for(let s in r){let e=r[s]["seal_pic"],t=Fa(e);const a=qa(e);let i=Za(e,{x:t,y:n["y"]}),l=Va(i,a);o=o.concat(l)}return o}function Ha(e,t,a){let i=e.reduce(((e,t)=>{const a=t.width*t.height;return a>e?a:e}),-1/0),n=e.reduce(((e,t)=>{const a=t.width*t.height;return a<e?a:e}),1/0),l=e.reduce(((e,t)=>e+t.width*t.height),0),r=l/e.length,o=t/3.65/l;const s=Z.scaleLog().domain([n,r]).range([.5*r*o,r*o*.7]),c=Z.scaleLog().domain([r,i]).range([r*o*.7,2.5*r*o]);for(let d in e){const t=e[d];e[d]["layout_params"]={x:t["x"]*a["x_axis"],y:t["y"]*a["y_axis"],width:t["width"]*t["height"]<r?Math.sqrt(s(t["width"]*t["height"])/(t["height"]/t["width"])):Math.sqrt(c(t["width"]*t["height"])/(t["height"]/t["width"])),height:t["width"]*t["height"]<r?Math.sqrt(s(t["width"]*t["height"])/(t["width"]/t["height"])):Math.sqrt(c(t["width"]*t["height"])/(t["width"]/t["height"])),offset2prev:0}}return e}function Va(e,t){let a=[];for(let i in e){let n=dt(e);const l=e[i];if(0===i)a.push(l);else{let i={ifConflict:!1,conflict_list:[]};if(i=Ra(l,a),i["ifConflict"]){const r=Wa(l,i["conflict_list"],a);let o=Ya(l,r,t,e,a,null),s=o["modified_redefined_seal"],c=o["direction"];if(i=Ra(s,a),i["ifConflict"]){const r=e.indexOf(e.find((e=>e["index"]===l["index"])));n[r]=s;let o=Wa(s,i["conflict_list"],a),d=Ya(s,o,t,n,a,c);c=d["direction"],s=d["modified_redefined_seal"],i=Ra(s,a)}a.push(s)}else a.push(l)}}return a}function qa(e){let t=dt(e),a=dt(e);t.sort(((e,t)=>e["x"]<t["x"]?-1:e["x"]>t["x"]?1:0)),a.sort(((e,t)=>e["y"]<t["y"]?-1:e["y"]>t["y"]?1:0));for(let l in e)l>0?(t[l]["offset2prev"]=t[l]["x"]+t[l]["layout_params"]["width"]/2-(t[l-1]["x"]+t[l-1]["layout_params"]["width"]/2),a[l]["offset2prev"]=a[l]["y"]+a[l]["layout_params"]["height"]/2-(a[l-1]["y"]+a[l-1]["layout_params"]["height"]/2)):(t[l]["offset2prev"]=t[l]["x"]+t[l]["layout_params"]["width"]/2,a[l]["offset2prev"]=a[l]["y"]+a[l]["layout_params"]["height"]/2);let i=dt(t),n=dt(a);return i.sort(((e,t)=>e["offset2prev"]<t["offset2prev"]?-1:e["offset2prev"]>t["offset2prev"]?1:0)),n.sort(((e,t)=>e["offset2prev"]<t["offset2prev"]?-1:e["offset2prev"]>t["offset2prev"]?1:0)),{x_order:t,y_order:a,x_dist:i,y_dist:n}}function Za(e,t){const a=t.x,i=t.y;let n=dt(e);return n.sort(((e,t)=>Math.pow(e["layout_params"]["x"]+e["layout_params"]["width"]/2-a,2)+Math.pow(e["layout_params"]["y"]+e["layout_params"]["height"]/2-i,2)<Math.pow(t["layout_params"]["x"]+t["layout_params"]["width"]/2-a,2)+Math.pow(t["layout_params"]["y"]+t["layout_params"]["height"]/2-i,2)?-1:Math.pow(e["layout_params"]["x"]+e["layout_params"]["width"]/2-a,2)+Math.pow(e["layout_params"]["y"]+e["layout_params"]["height"]/2-i,2)>Math.pow(t["layout_params"]["x"]+t["layout_params"]["width"]/2-a,2)+Math.pow(t["layout_params"]["y"]+t["layout_params"]["height"]/2-i,2)?1:0)),n}function Wa(e,t){let a=[];for(let i in t){const n=t[i];let l={deta_x:e["layout_params"]["x"]+e["layout_params"]["width"]/2-(n["layout_params"]["x"]+n["layout_params"]["width"]/2),deta_y:e["layout_params"]["y"]+e["layout_params"]["height"]/2-(n["layout_params"]["y"]+n["layout_params"]["height"]/2)};a.push({left:(e["layout_params"]["width"]+n["layout_params"]["width"])/2+l["deta_x"],right:(e["layout_params"]["width"]+n["layout_params"]["width"])/2-l["deta_x"],up:(e["layout_params"]["height"]+n["layout_params"]["height"])/2+l["deta_y"],down:(e["layout_params"]["height"]+n["layout_params"]["height"])/2-l["deta_y"]})}return{left:a.reduce(((e,t)=>{const a=t.left;return a>e?a:e}),-1/0),right:a.reduce(((e,t)=>{const a=t.right;return a>e?a:e}),-1/0),up:a.reduce(((e,t)=>{const a=t.up;return a>e?a:e}),-1/0),down:a.reduce(((e,t)=>{const a=t.down;return a>e?a:e}),-1/0)}}function Ra(e,t){let a={ifConflict:!1,conflict_list:[]};for(let i in t){const n=t[i];let l=!(n["layout_params"]["x"]+n["layout_params"]["width"]<e["layout_params"]["x"]||n["layout_params"]["x"]>e["layout_params"]["x"]+e["layout_params"]["width"])&&!(n["layout_params"]["y"]+n["layout_params"]["height"]<e["layout_params"]["y"]||n["layout_params"]["y"]>e["layout_params"]["y"]+e["layout_params"]["height"]);l&&(a["ifConflict"]=!0,a["conflict_list"].push(n))}return a}function Ya(e,t,a,i,n,l){const r=e["index"],o=["left","right","up","down"];let s=dt(i),c=null;const d=s.find((e=>e["index"]===r));if(d){const i=s.indexOf(d),r={x:s[i]["layout_params"]["x"],y:s[i]["layout_params"]["y"]};let h=!1,u={};for(let d in o)if("left"===o[d]){s[i]["layout_params"]["x"]-=t["left"],s[i]["layout_params"]["y"]=r["y"],u=qa(s);let o=Na(u,a,"high");Ra(e,n);if(o&&"right"!==l){h=!0,c="left";break}}else if("right"===o[d]){s[i]["layout_params"]["x"]+=t["right"],s[i]["layout_params"]["y"]=r["y"],u=qa(s);let o=Na(u,a,"high");Ra(e,n);if(o&&"left"!==l){h=!0,c="right";break}}else if("up"===o[d]){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]-=t["up"],u=qa(s);let o=Na(u,a,"high");Ra(e,n);if(o&&"down"!==l){h=!0,c="up";break}}else if("down"===o[d]){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]+=t["up"],u=qa(s);let o=Na(u,a,"high");Ra(e,n);if(o&&"up"!==l){h=!0,c="down";break}}if(!h){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]=r["y"];for(let d in o)if("left"===o[d]){s[i]["layout_params"]["x"]-=t["left"],s[i]["layout_params"]["y"]=r["y"],u=qa(s);let o=Na(u,a,"middle");Ra(e,n);if(o&&"right"!==l){h=!0,c="left";break}}else if("right"===o[d]){s[i]["layout_params"]["x"]+=t["right"],s[i]["layout_params"]["y"]=r["y"],u=qa(s);let o=Na(u,a,"middle");Ra(e,n);if(o&&"left"!==l){h=!0,c="right";break}}else if("up"===o[d]){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]-=t["up"],u=qa(s);let o=Na(u,a,"middle");Ra(e,n);if(o&&"down"!==l){h=!0,c="up";break}}else if("down"===o[d]){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]+=t["up"],u=qa(s);let o=Na(u,a,"middle");Ra(e,n);if(o&&"up"!==l){h=!0,c="down";break}}if(!h){s[i]["layout_params"]["x"]=r["x"],s[i]["layout_params"]["y"]=r["y"];let e=Object.keys(t);"left"===l?e.splice(e.indexOf("right"),1):"right"===l?e.splice(e.indexOf("left"),1):"up"===l?e.splice(e.indexOf("down"),1):"down"===l&&e.splice(e.indexOf("up"),1);const a=e.reduce(((e,a)=>t[e]<t[a]?e:a));"left"===a?(c="left",s[i]["layout_params"]["x"]-=t["left"]):"right"===a?(c="right",s[i]["layout_params"]["x"]+=t["right"]):"up"===a?(c="up",s[i]["layout_params"]["y"]-=t["up"]):"down"===a&&(c="down",s[i]["layout_params"]["y"]+=t["down"])}}e["layout_params"]["x"]=s[i]["layout_params"]["x"],e["layout_params"]["y"]=s[i]["layout_params"]["y"]}return{modified_redefined_seal:e,direction:c}}function Na(e,t,a){let i=!0,n=t["x_order"].length;if("high"===a){for(let l=0;l<n;l++)if(e["x_order"][l]["index"]!==t["x_order"][l]["index"]&&e["y_order"][l]["index"]!==t["y_order"][l]["index"]&&e["x_dist"][l]["index"]!==t["x_dist"][l]["index"]&&e["y_dist"][l]["index"]!==t["y_dist"][l]["index"]){i=!1;break}}else if("middle"===a)for(let l=0;l<n;l++)if(e["x_order"][l]["index"]!==t["x_order"][l]["index"]&&e["y_order"][l]["index"]!==t["y_order"][l]["index"]){i=!1;break}return i}a(2837),a(3570);const Xa=1e3,Ja=100;var Ka={name:"LayoutView",components:{LayoutCard:Aa},data(){return{data:null,cardList:[],painting_name_en:"",fullImageModel:{show:!1,src:null,label:null},showSealDiv:!1}},props:["canvas_width","canvas_height"],computed:{...(0,g.rn)(["language","cur_view","painting_name","selection","hover","painting_pic","transition","overlay_duration"]),detailSealInfo:{get(){const e=this,t=null!==e.selection.entity&&e.selection.value;if(!t)return[];let a=[];return a=dt(e.cardList.filter((e=>t.includes(e["index"])))),a}}},watch:{cur_view:function(e,t){const a=this;"layout"===e?(console.log("从其他视图切换到layout视图啦"),setTimeout((()=>{a.showSealDiv=!0}),Ja)):a.showSealDiv=!1},selection:{handler:function(e,t){},deep:!0},painting_pic:{handler:function(e,t){const a=this;e.loaded&&(a.showSealDiv=!1,a.cardList=dt(Oa(a.cardList,{width:e.width,height:e.height})),console.log(a.cardList),a.showSealDiv=!0)},deep:!0},transition:{handler:function(e,t){const a=this;"timeline"!==e.to&&"timeline"!==e.from?a.transition_handler(e):a.$store.commit("changeCurViewForce",e.to)},deep:!0},cardList:{handler:function(e,t){aa(e)},deep:!0},showSealDiv:function(e,t){const a=this;e&&setTimeout((()=>{document.getElementById("layout-container").addEventListener("click",(function(e){e.target.id.includes("sealImageLayout-")||a.$store.commit("changeSelection",{entity:null,value:[]})}))}),Ja)}},methods:{initialize(){},showSealInfoCard(e){const t=this;let a=t.selection["value"];const i=e.target.id.split("-")[1];if(a.includes(i)){const e=a.indexOf(i);-1!==e&&a.splice(e,1)}a=[...new Set(a)],a.push(i),t.$store.commit("changeSelection",{entity:"seal_pic",value:a})},transition_handler(e){console.log(e);const t=this,a=e.from,i=e.to,n=e.state;"layout"===a&&"out"===n?(console.log("transition out"),na(6*Xa,"to",t.selection,t.cardList,t.painting_pic),setTimeout((()=>{t.$store.commit("transCompleted",null)}),6*Xa)):"layout"===i&&"out"===n?console.log("preparing for transition"):"layout"===i&&"overlay"===n||"layout"===i&&"in"===n&&(console.log("transition in"),setTimeout((()=>{t.$store.commit("transCompleted",null)}),Xa))}},mounted(){const e=this;console.log("进入到layout view啦"),e.painting_name_en=te(e.painting_name);let t=pt();for(let a in t)t[a]["painting_name"]===e.painting_name&&(e.data=t[a]);e.data=ee(e.data),e.cardList=be(e.data),e.initialize()}};const Ua=(0,f.Z)(Ka,[["render",fa],["__scopeId","data-v-44eb1d3e"]]);var Ga=Ua;const Qa=e=>((0,n.dD)("data-v-12970b11"),e=e(),(0,n.Cn)(),e),ei={style:{height:"75vh",width:"70%"}},ti=["src"],ai={class:"barchart-container"},ii=Qa((()=>(0,n._)("svg",{id:"barchart-svg"},null,-1))),ni={key:0,class:"detail-info-container"},li={class:"info-row",style:{marginTop:"5%"}},ri={class:"info-row"},oi={class:"agent-time-group"},si=Qa((()=>(0,n._)("div",{class:"agent-icon"},[(0,n._)("svg",{width:"11",height:"14",viewBox:"0 0 11 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M8.94846 13H1.90909C1.31263 13 0.881532 12.2323 1.02917 11.4469C1.37759 9.58661 2.352 8.05709 3.62169 7.30709C3.62169 7.30709 3.62759 7.30709 3.62759 7.30118C2.65909 6.70472 2.01539 5.63583 2.01539 4.41339C2.01539 2.52953 3.54492 1 5.42878 1C7.31263 1 8.84216 2.52953 8.84216 4.41339C8.84216 5.63583 8.19846 6.70472 7.22996 7.30118C7.22996 7.30709 7.23586 7.30709 7.23586 7.30709C8.50555 8.05709 9.47996 9.58661 9.82838 11.4469C9.97602 12.2323 9.54492 13 8.94846 13Z",stroke:"#8F7B6C","stroke-linejoin":"round"})])],-1))),ci={class:"seal-series-pic"},di=["src","onClick"],hi={class:"glyth-container"},ui={class:"data-level-container"},pi={class:"icon-row"},mi=Qa((()=>(0,n._)("svg",{width:"14",height:"18",viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("path",{d:"M11.7684 17.2573H2.23161C1.42355 17.2573 0.839502 16.2172 1.03952 15.1531C1.51156 12.6329 2.83166 10.5608 4.5518 9.54469C4.5518 9.54469 4.5598 9.54469 4.5598 9.53669C3.2477 8.72862 2.37563 7.28051 2.37563 5.62437C2.37563 3.07217 4.44779 1 7 1C9.55221 1 11.6244 3.07217 11.6244 5.62437C11.6244 7.28051 10.7523 8.72862 9.4402 9.53669C9.4402 9.54469 9.4482 9.54469 9.4482 9.54469C11.1683 10.5608 12.4884 12.6329 12.9605 15.1531C13.1605 16.2172 12.5765 17.2573 11.7684 17.2573Z",stroke:"#724A2B","stroke-width":"1.5","stroke-linejoin":"round"})],-1))),gi={class:"icon-row"},_i=Qa((()=>(0,n._)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("rect",{x:"0.75",y:"0.75",width:"10.5",height:"10.5",stroke:"#724A2B","stroke-width":"1.5"})],-1))),fi={class:"icon-row"},wi=Qa((()=>(0,n._)("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,n._)("rect",{x:"0.950195",y:"0.75",width:"10.5",height:"10.5",rx:"5.25",stroke:"#724A2B","stroke-width":"1.5"})],-1))),vi=Qa((()=>(0,n._)("div",{class:"stamp-ratio-icon"},[(0,n._)("svg",{class:"seal-ratio-icon-svg"})],-1)));function xi(e,t,a,r,o,s){const c=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(c,{modelValue:o.fullImageModel.show,"onUpdate:modelValue":t[0]||(t[0]=e=>o.fullImageModel.show=e),title:o.fullImageModel.label,top:"5vh",width:"80%"},{default:(0,n.w5)((()=>[(0,n._)("div",ei,[(0,n._)("img",{src:o.fullImageModel.src,style:{width:"100%",height:"100%","object-fit":"contain"}},null,8,ti)])])),_:1},8,["modelValue","title"]),(0,n.wy)((0,n._)("div",ai,[(0,n._)("div",{class:"barchart-title",style:(0,l.j5)({fontSize:1.5*e.rem+"px"})},(0,l.zw)("鉴藏人物"),4),ii],512),[[i.F8,"timeline"===e.cur_view||"timeline"!==e.cur_view&&null===e.selection.entity]]),"timeline"!==e.cur_view&&null!==e.selection.entity?((0,n.wg)(),(0,n.iD)("div",ni,[(0,n._)("div",li,[(0,n._)("div",{class:"seal-name",style:(0,l.j5)({fontSize:1.5*e.rem+"px",fontWeight:"bold"})},(0,l.zw)(o.sealDetailInfo["seal_name"]),5),(0,n._)("div",{class:"seal-number",style:(0,l.j5)({fontSize:1.5*e.rem+"px"})},(0,l.zw)(o.sealDetailInfo["series_list"].length),5)]),(0,n._)("div",ri,[(0,n._)("div",oi,[si,(0,n._)("div",{class:"agent-name",style:(0,l.j5)({fontSize:1.2*e.rem+"px"})},(0,l.zw)(o.sealDetailInfo["collector_name"]),5)]),(0,n._)("div",{class:"life-span",style:(0,l.j5)({fontSize:1.2*e.rem+"px"})},(0,l.zw)(o.sealDetailInfo["life_span"][0].toString()+"-"+o.sealDetailInfo["life_span"][1].toString()),5)]),(0,n._)("div",{class:"collector-intro",style:(0,l.j5)({fontSize:1.1*e.rem+"px"})},(0,l.zw)(o.sealDetailInfo["intro"]),5),(0,n._)("div",ci,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.sealDetailInfo["image_href_list"],((t,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:"single-seal-pic"},[(0,n._)("img",{src:t,style:{"{max-width":"100%","max-height":"11.7vh",cursor:"'pointer'","box-shadow":"(selection.entity === 'seal_pic' && selection.value.includes(getSealPicHrefIndex(item))) ? '5px 5px 10px rgba(0, 0, 0, 0.5)' : 'none'}"},onClick:e=>(o.fullImageModel.show=!0,o.fullImageModel.src=t,o.fullImageModel.label=o.sealDetailInfo["seal_name"]+"-"+s.getSealPicHrefIndex(t))},null,8,di),(0,n._)("div",{style:(0,l.j5)({fontSize:e.rem+"px",color:"#724A2B"})},(0,l.zw)(o.sealDetailInfo["seal_name"]+"-"+s.getSealPicHrefIndex(t)),5)])))),128))])])):(0,n.kq)("",!0),(0,n._)("div",hi,[(0,n._)("div",{class:"glyth-title",style:(0,l.j5)({fontSize:1.3*e.rem+"px"})},(0,l.zw)("层次结构"),4),(0,n._)("div",ui,[(0,n._)("div",pi,[mi,(0,n._)("div",{class:"icon-text",style:(0,l.j5)({fontSize:1.1*e.rem+"px"})},(0,l.zw)("鉴藏人物"),4)]),(0,n._)("div",gi,[_i,(0,n._)("div",{class:"icon-text",style:(0,l.j5)({fontSize:1.1*e.rem+"px"})},(0,l.zw)("印章名称"),4)]),(0,n._)("div",fi,[wi,(0,n._)("div",{class:"icon-text",style:(0,l.j5)({fontSize:1.1*e.rem+"px"})},(0,l.zw)("印章图片"),4)])]),(0,n._)("div",{class:"glyth-title",style:(0,l.j5)({fontSize:1.3*e.rem+"px"})},(0,l.zw)("印章比例"),4),vi])],64)}const yi=a(3570),Ci=1e3;function Si(e){const t=Z.select("#barchart-svg"),a=yi("#barchart-svg").width(),i=yi("#barchart-svg").height();let n=dt(e);n.sort(((e,t)=>t["seals"].length-e["seals"].length));let l=Pi(n),r=t.selectAll(".collector-group").data(n).enter().append("g").attr("class","barchart-collector-group").attr("transform",(function(e,t){return"translate(0,"+(2*t+1)*i/(2*n.length+1)+")"}));r.append("rect").attr("class","collector-rect").attr("x",.28*a).attr("y",0).attr("width",((e,t)=>e["seals"].length/l*a*.72)).attr("height",i/(2*n.length+1)).attr("fill","#8F7B6C"),r.append("text").attr("class","collector-name-text").attr("x",a/100).attr("y",0).attr("dy",i/(3*n.length+1)).attr("fill","#724A2B").text((e=>e["collector_name"].includes("爱新觉罗·")?e["collector_name"].replace("爱新觉罗·",""):e["collector_name"])),r.append("text").attr("class","seal-num-text").attr("x",.925*a).attr("y",0).attr("dy",i/(3*n.length+1)).attr("fill",((e,t)=>e["seals"].length/l*a*2.9/4+a/4>.925*a?"#FFFFFF":"#724A2B")).attr("text-anchor","end").text((e=>e["seals"].length.toString()))}function Pi(e){let t=0;for(let a=0;a<e.length;a++)e[a]["seals"].length>t&&(t=e[a]["seals"].length);return t}function zi(e,t,a){let i=dt(a);i.sort(((e,t)=>t["seals"].length-e["seals"].length));let n=bi(i),l=null,r=null;if(null!==t.entity||null!==e.entity)for(let s=0;s<i.length;s++){const a=i[s]["seals"];for(let n=0;n<a.length;n++)a[n]["seal_name"]===t.value&&(l=i[s]["collector_name"]),a[n]["seal_name"]===e.value&&(r=i[s]["collector_name"])}if(null!==l){const e=i.findIndex((e=>e["collector_name"]===l)),t=i[e];i.splice(e,1),i.unshift(t)}if(null!==r){const e=i.findIndex((e=>e["collector_name"]===r)),t=i[e];i.splice(e,1),i.unshift(t)}for(let s=0;s<i.length;s++)n[i[s]["collector_name"]]=s;const o=yi("#barchart-svg").height();Z.selectAll(".barchart-collector-group").transition().duration(Ci).attr("transform",(e=>{const t=n[e["collector_name"]];return`translate(0, ${(2*t+1)*o/(2*i.length+1)})`})).attr("filter",(e=>[...new Set([r,l])].includes(e["collector_name"])?"drop-shadow(0.8px 0.8px 0.8px rgb(0 0 0 / 0.6))":"none"))}function bi(e){let t={};for(let a=0;a<e.length;a++)t[e[a]["collector_name"]]=a;return t}a(3570);function ki(e,t){const a=t[t.length-1];let i=e.find((function(e){return e["index"]===a})),n=dt(i["series_list"]);return n=Ii(n,t),i["image_href_list"]=n.map((function(e){return"http://vis.pku.edu.cn/seal_visualization/assets/seal_images/que_hua_qiu_se_tu_juan/seal_"+e+".jpg"})),console.log("detail_panel_info",i),i}function Ii(e,t){let a=dt(t),i=a[a.length-1];a.pop();let n=e.filter((e=>a.includes(e))),l=e.filter((e=>!a.includes(e)&&e!==i)),r=n.concat(l);return r.unshift(i),r.length===e.length?r:(console.log("error: result_list.length !== seal_pic_list.length"),e)}const Li=a(3570);function ji(e){const t=1.5*e,a=Li(".seal-ratio-icon-svg").width(),i=.75*t/2;let n=Z.select(".seal-ratio-icon-svg"),l=n.append("g").attr("transform",`translate(${.05*a},${.05*t})`);const r=Z.arc().innerRadius(0).outerRadius(i).startAngle(Math.PI).endAngle(2*Math.PI),o=Z.arc().innerRadius(0).outerRadius(i).startAngle(0).endAngle(Math.PI);let s=l.append("g").attr("class","total_stamped-icon");const c=`M ${i} 0 L ${.85*a} 0 A ${i} ${i} 0 1 1 ${.85*a} ${2*i} L ${i} ${2*i}`;s.append("path").attr("d",c).attr("fill","none").attr("stroke","#8F7B6C"),s.append("text").attr("x",.85*a).attr("y",.3*t).attr("dy",.3*t).attr("text-anchor","end").text("全部").attr("font-size",.7*t).attr("fill","#8F7B6C");let d=l.append("g").attr("class","collector_stamped-icon");d.append("rect").attr("x",i).attr("y",0).attr("width",.5*(.85*a-i)).attr("height",.75*t).attr("fill","#8F7B6C").attr("stroke","#8F7B6C"),d.append("path").attr("d",r).attr("fill","#8F7B6C").attr("transform",`translate(${i},${i})`),d.append("path").attr("d",o).attr("fill","#8F7B6C").attr("transform",`translate(${i+.5*(.85*a-i)},${i})`),d.append("text").attr("x",.85*a*.5+i).attr("y",.3*t).attr("dy",.3*t).attr("text-anchor","end").text("已盖").attr("font-size",.7*t).attr("fill","white")}a(2837),a(3570);const $i=100;var Mi={name:"LeftPanel",components:{},data(){return{data:null,cardList:[],sealDetailInfo:null,fullImageModel:{show:!1,src:null,label:null}}},props:["canvas_width","canvas_height"],computed:{...(0,g.rn)(["language","cur_view","painting_name","selection","hover","transition","overlay_duration","rem"])},watch:{cur_view:function(e,t){},selection:{handler:function(e,t){const a=this;"seal_pic"===e.entity&&e.value.length>0&&(console.log("selection in left panel",e),a.sealDetailInfo=ki(a.cardList,e.value)),"timeline"===a.cur_view&&zi(a.hover,e,a.data["collectors"])},deep:!0},hover:{handler:function(e,t){const a=this;"timeline"===a.cur_view&&zi(e,a.selection,a.data["collectors"])},deep:!0},transition:{handler:function(e,t){},deep:!0},cardList:{handler:function(e,t){},deep:!0},sealDetailInfo:{handler:function(e,t){},deep:!0}},methods:{initialize(){},renderBarChart(){const e=this;Si(e.data["collectors"])},getSealPicHrefIndex(e){return e.split("/")[e.split("/").length-1].split(".")[0].replace("seal_","")}},mounted(){const e=this;let t=pt();for(let a in t)t[a]["painting_name"]===e.painting_name&&(e.data=t[a]);e.cardList=be(e.data),setTimeout((()=>{e.renderBarChart(),ji(e.rem)}),$i),e.initialize()}};const Ai=(0,f.Z)(Mi,[["render",xi],["__scopeId","data-v-12970b11"]]);var Di=Ai;a(3570);const Ti=16;var Bi={name:"App",data(){return{render_main:!1,renderComponent:!0,canvas_width:null,canvas_height:null,window_width:null,window_height:null,render_width:null,render_height:null}},components:{SwitchView:b,Title:v,SwitchLanguage:A,Timeline:_t,Overview:ha,LayoutView:Ga,LeftPanel:Di},computed:{...(0,g.rn)(["cur_view","overlay_view"])},watch:{},methods:{setRem(){let e=this.render_width,t=this.render_height;const a=Math.max(e,t)/1280;let i=Ti*Math.min(a,2);i=Math.min(i,16),this.$store.commit("changeRem",i),document.documentElement.style.fontSize=i+"px"},setCanvas(){let e=window.innerWidth,t=window.innerHeight;this.window_width=window.innerWidth,this.window_height=window.innerHeight,e/t>16/9?e=16*t/9:t=9*e/16,this.render_width=e,this.render_height=t,this.canvas_width=.9*e,this.canvas_height=t*(1-.064)},initialize(){const e=this;e.setCanvas(),e.setRem(),setTimeout((()=>{e.render_main=!0}),500)}},mounted(){const e=this;this.initialize(),window.addEventListener("resize",(function(){e.renderComponent=!1,e.render_main=!1,e.initialize(),setTimeout((()=>{e.renderComponent=!0}),500)}))}};const Fi=(0,f.Z)(Bi,[["render",h],["__scopeId","data-v-1334cf7c"]]);var Ei=Fi,Oi=a(3065);const Hi=[{}],Vi=(0,Oi.p7)({history:(0,Oi.r5)(),routes:Hi});var qi=Vi;const Zi=!1;var Wi=(0,g.MT)({state:{rem:null,language:"zh",cur_view:"timeline",overlay_view:null,overlay_duration:2e3,transition:{from:null,to:null,state:null},selection:{entity:null,value:[]},hover:{entity:null,value:[]},painting_name:"鹊华秋色图卷",painting_pic:{loaded:!1,width:null,height:null}},mutations:{changeRem(e,t){e.rem=t},changeLanguage(e,t){e.language=t},changeCurView(e,t){Zi&&console.log("changeCurView",t),e.cur_view!==t?null===e.transition.state?e.transition={from:e.cur_view,to:t,state:"out"}:console.log("error: transition in progress"):console.log("error: no change in view")},changeCurViewForce(e,t){Zi&&console.log("changeCurView",t),e.cur_view=t},transCompleted(e,t){Zi&&(console.log("transCompleted"),console.log(e.transition));let a=e.transition;null===a.state?console.log("error: no transition in progress"):"out"===a.state?(e.cur_view=a.to,e.overlay_view=a.from,a.state="overlay",setTimeout((()=>{a.state="in",e.overlay_view=null,console.log("overlay finished, transition in")}),e.overlay_duration),Zi&&console.log("transition out finished, overlaying")):"overlay"===a.state?console.log("error: overlaying"):"in"===a.state&&(a.state=null,Zi&&console.log("transition finished"))},changePaintingName(e,t){e.painting_name=t},changeSelection(e,t){Zi&&console.log("changeSelection",t),e.selection=t},changeHover(e,t){Zi&&console.log("changeHover",t),e.hover=t},changePaintingPic(e,t){e.painting_pic=t}},actions:{},modules:{}}),Ri=a(9025),Yi=a(447),Ni=e=>{e.use(Ri.ZP,{locale:Yi.Z})},Xi=a(6786);async function Ji(){await ut();const e=(0,i.ri)(Ei);Ni(e),Object.keys(Xi).forEach((t=>{e.component(t,Xi[t])})),e.use(Wi).use(qi).mount("#app")}Ji()}},t={};function a(i){var n=t[i];if(void 0!==n)return n.exports;var l=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,i,n,l){if(!i){var r=1/0;for(d=0;d<e.length;d++){i=e[d][0],n=e[d][1],l=e[d][2];for(var o=!0,s=0;s<i.length;s++)(!1&l||r>=l)&&Object.keys(a.O).every((function(e){return a.O[e](i[s])}))?i.splice(s--,1):(o=!1,l<r&&(r=l));if(o){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[i,n,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var i in t)a.o(t,i)&&!a.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,l,r=i[0],o=i[1],s=i[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(s)var d=s(a)}for(t&&t(i);c<r.length;c++)l=r[c],a.o(e,l)&&e[l]&&e[l][0](),e[r[c]]=0;return a.O(d)},i=self["webpackChunkseal"]=self["webpackChunkseal"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9481)}));i=a.O(i)})();
//# sourceMappingURL=app.ab508494.js.map